{"version":3,"file":"Measure/Measure.min.js","mappings":"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","sources":["webpack://Autodesk.Extensions/./Measure/Calibration.css","webpack://Autodesk.Extensions/./Measure/Measure.css","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/api.js","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://Autodesk.Extensions/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://Autodesk.Extensions/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://Autodesk.Extensions/webpack/bootstrap","webpack://Autodesk.Extensions/webpack/runtime/compat get default export","webpack://Autodesk.Extensions/webpack/runtime/define property getters","webpack://Autodesk.Extensions/webpack/runtime/global","webpack://Autodesk.Extensions/webpack/runtime/hasOwnProperty shorthand","webpack://Autodesk.Extensions/webpack/runtime/make namespace object","webpack://Autodesk.Extensions/webpack/runtime/publicPath","webpack://Autodesk.Extensions/webpack/runtime/jsonp chunk loading","webpack://Autodesk.Extensions/webpack/runtime/nonce","webpack://Autodesk.Extensions/./Measure/MeasurementsManager.js","webpack://Autodesk.Extensions/./Measure/Indicator.js","webpack://Autodesk.Extensions/./Measure/PolygonCentroid.js","webpack://Autodesk.Extensions/./Measure/MeasureToolIndicator.js","webpack://Autodesk.Extensions/./Measure/MeasureTool.js","webpack://Autodesk.Extensions/./Measure/CalibrationToolIndicator.js","webpack://Autodesk.Extensions/./Measure/CalibrationPanels.js","webpack://Autodesk.Extensions/./Measure/CalibrationTool.js","webpack://Autodesk.Extensions/./Measure/MagnifyingGlass.js","webpack://Autodesk.Extensions/./Measure/MeasureToolbar.js","webpack://Autodesk.Extensions/./Measure/Measure.css?e2e8","webpack://Autodesk.Extensions/./Measure/Calibration.css?2585","webpack://Autodesk.Extensions/./Measure/Measure.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:application/octet-stream;base64,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\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@font-face {\\r\\n    font-family: 'calibration-icon';\\r\\n    src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format('woff');\\r\\n    font-weight: normal;\\r\\n    font-style: normal;\\r\\n}\\r\\n\\r\\n[class^=\\\"calibration-icon\\\"], [class*=\\\" calibration-icon\\\"] {\\r\\n    font-family: 'calibration-icon';\\r\\n    font-style: normal;\\r\\n    font-weight: normal;\\r\\n    font-variant: normal;\\r\\n    line-height: 1;\\r\\n    padding-top: 2px;\\r\\n    speak: none;\\r\\n    text-transform: none;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n    -moz-osx-font-smoothing: grayscale;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-icon:before {\\r\\n    content: 'a';\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-panel {\\r\\n    left:calc(50% - 190px);\\r\\n    top: calc(50% - 145px);\\r\\n    width: 300px;\\r\\n    height: auto;\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .option-drop-down,\\r\\n.adsk-viewing-viewer .calibration-panel .option-drop-down {\\r\\n    width: 100%;\\r\\n    padding-right: 0px;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,\\r\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td {\\r\\n    width: auto;\\r\\n    padding: 2px 15px 2px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input {\\r\\n    margin: 0px;\\r\\n    box-sizing: border-box;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .switch {\\r\\n    margin-left: 25px;\\r\\n}\\r\\n.adsk-viewing-viewer .measure-settings-popup .switch .slider {\\r\\n    width: 26px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button, \\r\\n.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button { \\r\\n    -webkit-appearance: none; \\r\\n    margin: 0; \\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-text {\\r\\n    text-align: left;\\r\\n    padding: 6px 10px 6px 10px;\\r\\n    margin: 20px 20px 14px 20px;\\r\\n    font-size: 14px;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button {\\r\\n    margin-top: 15px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button-left {\\r\\n    width: calc(50% - 15px);\\r\\n    margin-right: 5px !important;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button-right {\\r\\n    width: calc(50% - 15px);\\r\\n    margin-left: 5px !important;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-line {\\r\\n    position: absolute;\\r\\n    display: block;    \\r\\n    top:0;\\r\\n    left:0;\\r\\n    pointer-events: none;\\r\\n    z-index: 0;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    pointer-events: none;\\r\\n    text-align: 'center';\\r\\n    vertical-align: middle;\\r\\n    cursor: default;\\r\\n    padding: 2px;\\r\\n    color: #000000;\\r\\n    background: #FFFFFF;\\r\\n    border-radius: 10px;\\r\\n    -webkit-transform-origin: 50%  53%;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label-text {\\r\\n    display: inline-block;\\r\\n    pointer-events: none;\\r\\n    text-align: 'center';\\r\\n    vertical-align: middle;\\r\\n    font-size: 12px;\\r\\n    cursor: default;\\r\\n    padding: 2px;\\r\\n    color: #000000;\\r\\n    background: #FFFFFF;\\r\\n    border-bottom: 1px dashed #000000;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label-text:hover {\\r\\n    color: #039be5;\\r\\n    border-bottom: 1px dashed #039be5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,\\r\\n.adsk-viewing-viewer .calibration-endpoint.edit {\\r\\n    background-color: #039be5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover > * ,\\r\\n.adsk-viewing-viewer .calibration-endpoint.edit > * {\\r\\n    color: #ffffff;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint.editable {\\r\\n    pointer-events: all;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    cursor: move;\\r\\n    pointer-events: none;\\r\\n    width: 30px;\\r\\n    height: 30px;\\r\\n    background-color: #ffffff;\\r\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.24), 0 0 8px 0 rgba(0, 0, 0, 0.12);\\r\\n    -moz-border-radius: 50px;\\r\\n    -webkit-border-radius: 50px;\\r\\n    border-radius: 50px;\\r\\n    justify-content:center;\\r\\n    align-items:center;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint-text {\\r\\n    display: inline-block;\\r\\n    font-size: 14px;\\r\\n    vertical-align: middle;\\r\\n    cursor: default;\\r\\n    margin: 5px 5px 5px 5px;\\r\\n    vertical-align: middle;\\r\\n    text-align: center;\\r\\n    color: #039be5;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-buttons-wrapper {\\r\\n    text-align: center;\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./Measure/Calibration.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,+BAA+B;IAC/B,2DAAg2H;IACh2H,mBAAmB;IACnB,kBAAkB;AACtB;;AAEA;IACI,+BAA+B;IAC/B,kBAAkB;IAClB,mBAAmB;IACnB,oBAAoB;IACpB,cAAc;IACd,gBAAgB;IAChB,WAAW;IACX,oBAAoB;IACpB,mCAAmC;IACnC,kCAAkC;AACtC;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,sBAAsB;IACtB,sBAAsB;IACtB,YAAY;IACZ,YAAY;IACZ,UAAU;AACd;;AAEA;;IAEI,WAAW;IACX,kBAAkB;IAClB,sBAAsB;AAC1B;;AAEA;;IAEI,WAAW;IACX,yBAAyB;AAC7B;;AAEA;IACI,WAAW;IACX,sBAAsB;IACtB,WAAW;AACf;;AAEA;IACI,iBAAiB;AACrB;AACA;IACI,WAAW;AACf;;AAEA;;IAEI,wBAAwB;IACxB,SAAS;AACb;;AAEA;IACI,gBAAgB;IAChB,0BAA0B;IAC1B,2BAA2B;IAC3B,eAAe;IACf,mCAAmC;AACvC;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,uBAAuB;IACvB,4BAA4B;IAC5B,qBAAqB;AACzB;;AAEA;IACI,uBAAuB;IACvB,2BAA2B;IAC3B,qBAAqB;AACzB;;AAEA;IACI,kBAAkB;IAClB,cAAc;IACd,KAAK;IACL,MAAM;IACN,oBAAoB;IACpB,UAAU;AACd;;AAEA;IACI,aAAa;IACb,kBAAkB;IAClB,oBAAoB;IACpB,oBAAoB;IACpB,sBAAsB;IACtB,eAAe;IACf,YAAY;IACZ,cAAc;IACd,mBAAmB;IACnB,mBAAmB;IACnB,kCAAkC;AACtC;;AAEA;IACI,qBAAqB;IACrB,oBAAoB;IACpB,oBAAoB;IACpB,sBAAsB;IACtB,eAAe;IACf,eAAe;IACf,YAAY;IACZ,cAAc;IACd,mBAAmB;IACnB,iCAAiC;IACjC,qBAAqB;IACrB,yBAAyB;IACzB,mCAAmC;AACvC;;AAEA;IACI,cAAc;IACd,iCAAiC;AACrC;;AAEA;IACI,cAAc;AAClB;;AAEA;;IAEI,yBAAyB;AAC7B;;AAEA;;IAEI,cAAc;AAClB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,kBAAkB;IAClB,YAAY;IACZ,oBAAoB;IACpB,WAAW;IACX,YAAY;IACZ,yBAAyB;IACzB,0EAA0E;IAC1E,wBAAwB;IACxB,2BAA2B;IAC3B,mBAAmB;IACnB,sBAAsB;IACtB,kBAAkB;IAClB,kBAAkB;AACtB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,qBAAqB;IACrB,eAAe;IACf,sBAAsB;IACtB,eAAe;IACf,uBAAuB;IACvB,sBAAsB;IACtB,kBAAkB;IAClB,cAAc;IACd,qBAAqB;IACrB,yBAAyB;IACzB,oBAAoB;AACxB;;AAEA;IACI,kBAAkB;AACtB\",\"sourcesContent\":[\"@font-face {\\r\\n    font-family: 'calibration-icon';\\r\\n    src: url('data:application/octet-stream;base64,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') format('woff');\\r\\n    font-weight: normal;\\r\\n    font-style: normal;\\r\\n}\\r\\n\\r\\n[class^=\\\"calibration-icon\\\"], [class*=\\\" calibration-icon\\\"] {\\r\\n    font-family: 'calibration-icon';\\r\\n    font-style: normal;\\r\\n    font-weight: normal;\\r\\n    font-variant: normal;\\r\\n    line-height: 1;\\r\\n    padding-top: 2px;\\r\\n    speak: none;\\r\\n    text-transform: none;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n    -moz-osx-font-smoothing: grayscale;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-icon:before {\\r\\n    content: 'a';\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-panel {\\r\\n    left:calc(50% - 190px);\\r\\n    top: calc(50% - 145px);\\r\\n    width: 300px;\\r\\n    height: auto;\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .option-drop-down,\\r\\n.adsk-viewing-viewer .calibration-panel .option-drop-down {\\r\\n    width: 100%;\\r\\n    padding-right: 0px;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,\\r\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td {\\r\\n    width: auto;\\r\\n    padding: 2px 15px 2px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input {\\r\\n    margin: 0px;\\r\\n    box-sizing: border-box;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup .switch {\\r\\n    margin-left: 25px;\\r\\n}\\r\\n.adsk-viewing-viewer .measure-settings-popup .switch .slider {\\r\\n    width: 26px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button, \\r\\n.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button { \\r\\n    -webkit-appearance: none; \\r\\n    margin: 0; \\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-text {\\r\\n    text-align: left;\\r\\n    padding: 6px 10px 6px 10px;\\r\\n    margin: 20px 20px 14px 20px;\\r\\n    font-size: 14px;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button {\\r\\n    margin-top: 15px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button-left {\\r\\n    width: calc(50% - 15px);\\r\\n    margin-right: 5px !important;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-button-right {\\r\\n    width: calc(50% - 15px);\\r\\n    margin-left: 5px !important;\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-line {\\r\\n    position: absolute;\\r\\n    display: block;    \\r\\n    top:0;\\r\\n    left:0;\\r\\n    pointer-events: none;\\r\\n    z-index: 0;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    pointer-events: none;\\r\\n    text-align: 'center';\\r\\n    vertical-align: middle;\\r\\n    cursor: default;\\r\\n    padding: 2px;\\r\\n    color: #000000;\\r\\n    background: #FFFFFF;\\r\\n    border-radius: 10px;\\r\\n    -webkit-transform-origin: 50%  53%;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label-text {\\r\\n    display: inline-block;\\r\\n    pointer-events: none;\\r\\n    text-align: 'center';\\r\\n    vertical-align: middle;\\r\\n    font-size: 12px;\\r\\n    cursor: default;\\r\\n    padding: 2px;\\r\\n    color: #000000;\\r\\n    background: #FFFFFF;\\r\\n    border-bottom: 1px dashed #000000;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n    -webkit-font-smoothing: antialiased;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label-text:hover {\\r\\n    color: #039be5;\\r\\n    border-bottom: 1px dashed #039be5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-label.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,\\r\\n.adsk-viewing-viewer .calibration-endpoint.edit {\\r\\n    background-color: #039be5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover > * ,\\r\\n.adsk-viewing-viewer .calibration-endpoint.edit > * {\\r\\n    color: #ffffff;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint.editable {\\r\\n    pointer-events: all;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    cursor: move;\\r\\n    pointer-events: none;\\r\\n    width: 30px;\\r\\n    height: 30px;\\r\\n    background-color: #ffffff;\\r\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.24), 0 0 8px 0 rgba(0, 0, 0, 0.12);\\r\\n    -moz-border-radius: 50px;\\r\\n    -webkit-border-radius: 50px;\\r\\n    border-radius: 50px;\\r\\n    justify-content:center;\\r\\n    align-items:center;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-endpoint-text {\\r\\n    display: inline-block;\\r\\n    font-size: 14px;\\r\\n    vertical-align: middle;\\r\\n    cursor: default;\\r\\n    margin: 5px 5px 5px 5px;\\r\\n    vertical-align: middle;\\r\\n    text-align: center;\\r\\n    color: #039be5;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .calibration-buttons-wrapper {\\r\\n    text-align: center;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"res/icon-spinner-sm.svg\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover\\r\\n{\\r\\n\\tbox-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n\\t-webkit-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n    -moz-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n\\r\\n    height: 19px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    padding: 2px 0 2px 0;\\r\\n\\r\\n    background-color: #009bff;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\r\\n\\r\\n    color: #f4f4f4;\\r\\n    font-size:12px;\\r\\n    text-align: center;\\r\\n    line-height: 1.2;\\r\\n    white-space: nowrap;\\r\\n\\r\\n    border-radius: 8px;\\r\\n    pointer-events: none;\\r\\n    cursor: pointer;\\r\\n    z-index: 2;\\r\\n\\r\\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length.fetching-topology {\\r\\n    background-color: rgba(34, 34, 34, 0.8);\\r\\n    box-shadow: 0 0.5px 1.5px 0 rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-text {\\r\\n    display: inline-block;\\r\\n    margin: 0 5px 0 5px;\\r\\n    vertical-align: middle;\\r\\n    font-size: 16px;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-text {\\r\\n    margin: 0 5px 0 5px;\\r\\n    align-self: center;\\r\\n    font-size: 14px;\\r\\n\\toverflow: hidden;\\r\\n\\twhite-space: nowrap;\\r\\n\\theight: 16px;\\r\\n\\tline-height: 16px;\\r\\n\\tvertical-align: middle;\\r\\n\\tpointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-button {\\r\\n    display: inline-block;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n\\r\\n    color: #FFFFFF;\\r\\n    opacity: 0.7;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-button:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,\\r\\n.adsk-viewing-viewer .measure-label.on-edit {\\r\\n\\tbox-shadow: 0 0 4px 4px #0d69ca;\\r\\n\\t-webkit-box-shadow: 0 0 4px 4px #0d69ca;\\r\\n    -moz-box-shadow: 0 0 4px 4px #0d69ca;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label.editable {\\r\\n\\tpointer-events: all;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    cursor: move;\\r\\n    pointer-events: none; \\r\\n    border-radius:100px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-hit-area {\\r\\n\\tdisplay: inline-block;\\r\\n    position: absolute;\\r\\n    width: 44px;\\r\\n    height: 44px;\\r\\n    left: -22px;\\r\\n    top: -22px;\\r\\n    border-radius:100px;\\r\\n    z-index: 2;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-icon {\\r\\n    display: inline-block;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    left: -2px;\\r\\n    top: -2px;\\r\\n    background-color: #009bff;\\r\\n    border-style: solid;\\r\\n    border-width: 2px;\\r\\n    border-color: #FFFFFF;\\r\\n    border-radius:100px;\\r\\n\\tbox-shadow: 0 2px 5px 0 #182A3D;\\r\\n\\tz-index: 2;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-text {\\r\\n    display: inline-block;\\r\\n    margin: 0px 5px 0px 5px;\\r\\n    vertical-align: middle;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-horizontal-divider\\r\\n{\\r\\n    height: 1px;\\r\\n    border-top: 1px solid rgba(200,200,200,0.8);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-submenu-select\\r\\n{\\r\\n    display: block;\\r\\n    position: relative;\\r\\n    width: calc(100% - 40px);\\r\\n    padding: 10px 20px 0px 20px;\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .option-drop-down:disabled {\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-submenu-selectlabel\\r\\n{\\r\\n    position: relative;\\r\\n    display:  inline-block;\\r\\n    padding-right:  20px;\\r\\n    padding-bottom:  4px;\\r\\n}\\r\\n\\r\\n/*.measure-result {*/\\r\\n    /*display: inline-block;*/\\r\\n    /*padding: 10px 0px  10px 20px;*/\\r\\n/*}*/\\r\\n\\r\\n.adsk-viewing-viewer .measure-results {\\r\\n    position: relative;\\r\\n    display: block;\\r\\n    padding: 5px 0px  10px 30px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-label {\\r\\n    display: inline-block;\\r\\n    padding-right: 10px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-number {\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-collapse {\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    display: inline-block;\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n    margin: 0px 4px 0px 4px;\\r\\n    padding: 0px 4px 0px 4px;\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-collapse:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-repick {\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    display: inline-block;\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n    margin: 4px 4px 4px 4px;\\r\\n    padding: 4px 4px 4px 4px;\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-repick:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-restart {\\r\\n    margin: 10px 20px 15px 20px;\\r\\n    padding: 6px 10px 6px 10px;\\r\\n    width: calc(100% - 55px);\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n    border-style: solid;\\r\\n    border-width: 1px;\\r\\n    border-color: rgba(255, 255, 255, 0.2);\\r\\n    border-radius: 3px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel:hover .measure-restart {\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel .measure-restart:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title {\\r\\n    padding-top:   0px;\\r\\n    padding-left: 20px;\\r\\n    margin-top: 10px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title:hover {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title.collapsed  {\\r\\n    background-image: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");\\r\\n    background-repeat:no-repeat;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title.expanded  {\\r\\n    background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \");\\r\\n    background-repeat:no-repeat;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td {\\r\\n    padding: 10px 0px  10px 20px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-container {\\r\\n\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-one-label {\\r\\n    display: inline-block;\\r\\n    margin: 18px 18px 18px 18px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: left;\\r\\n\\r\\n    padding: 2px;\\r\\n    background-color: #0033FF;\\r\\n    border-radius:         10px;\\r\\n    opacity: 0.6;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-two-label {\\r\\n    display: inline-block;\\r\\n    margin: 18px 18px 18px 18px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: left;\\r\\n\\r\\n    padding: 2px;\\r\\n    background-color: #0033FF;\\r\\n    border-radius:         10px;\\r\\n    opacity: 0.6;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-repick {\\r\\n    display: inline-block;\\r\\n    cursor: default;\\r\\n    margin: 20px 20px 20px 20px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-repick:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-result {\\r\\n    display: inline-block;\\r\\n    margin: 21px 0px 21px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-distance-icon {\\r\\n    display: inline-block;\\r\\n    margin: 20px 2px 20px 2px;\\r\\n    font-size: 52px;\\r\\n    color: #FF9900;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-angle-icon {\\r\\n    display: inline-block;\\r\\n    margin: 20px 2px 20px 2px;\\r\\n    font-size: 52px;\\r\\n    color: #FF9900;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-result {\\r\\n    font-size: 20px;\\r\\n    color: #FF9900;\\r\\n    display: inline-block;\\r\\n    margin: 38px 0px 38px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-initial {\\r\\n    font-size: 20px;\\r\\n    display: inline-block;\\r\\n    margin: 38px 0px 38px 56px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-button {\\r\\n    cursor: default;\\r\\n    position: relative;\\r\\n    top: 20px;\\r\\n    right: 20px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 18px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-button:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button {\\r\\n    position: relative;\\r\\n    top: 56px;\\r\\n    right: 4px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n    -webkit-transform : rotate(-90deg);\\r\\n    -moz-transform : rotate(-90deg);\\r\\n    -ms-transform : rotate(-90deg);\\r\\n    -o-transform : rotate(-90deg);\\r\\n    transform : rotate(-90deg);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button.rotated {\\r\\n    -webkit-transform : rotate(90deg);\\r\\n    -moz-transform : rotate(90deg);\\r\\n    -ms-transform : rotate(90deg);\\r\\n    -o-transform : rotate(90deg);\\r\\n    transform : rotate(90deg);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-result {\\r\\n    display: inline-block;\\r\\n    margin: 0px 0px 20px 0px;\\r\\n    padding: 0px 0px 0px 56px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    background-color: #f4f4f4;\\r\\n    border-radius: 8px;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.X {\\r\\n    background-color: #EC4545;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.Y {\\r\\n    background-color: #45C345;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.Z {\\r\\n    background-color: #5757DA;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon {\\r\\n\\twidth: 20px;\\r\\n    height: 18px;\\r\\n    color: #f4f4f4;\\r\\n    border-radius: 8px 0 0 8px;\\r\\n    font-size: 12px;\\r\\n    padding-top: 4px;\\r\\n    line-height: 15px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{\\r\\n\\ttransition: opacity 0.1s linear;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-delta {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    font-size: 18px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    background-color: #ffffff;\\r\\n    pointer-events: none;\\r\\n    \\r\\n    opacity: 0;\\r\\n\\r\\n    border-radius: 8px;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-delta.visible {\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-x {\\r\\n    color: #EC4545;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-y {\\r\\n    color: #45C345;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-z {\\r\\n    color: #5757DA;\\r\\n}\\r\\n\\r\\n\\r\\n.adsk-viewing-viewer .magnifying-glass.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .magnifying-glass {\\r\\n    position: absolute;\\r\\n    display: none;\\r\\n    -moz-border-radius: 100%;\\r\\n    -webkit-border-radius: 100%;\\r\\n    border-radius: 100%;\\r\\n    background: transparent;\\r\\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\r\\n    -webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);  \\r\\n    -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-fetching-topology {\\r\\n    display: inline-block;\\r\\n    width: 10px;\\r\\n    height: 10px;\\r\\n    background: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \");\\r\\n    margin: 3px 0px -2px 3px;\\r\\n    animation: measure-topology-fetching-anim 1.4s infinite linear;\\r\\n    -webkit-animation: measure-topology-fetching-anim 1.4s infinite linear;\\r\\n}\\r\\n\\r\\n@keyframes measure-topology-fetching-anim {\\r\\n    0% {\\r\\n        -webkit-transform: rotate(0deg);\\r\\n        transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n        -webkit-transform: rotate(360deg);\\r\\n        transform: rotate(360deg);\\r\\n    }\\r\\n}\\r\\n\\r\\n@-webkit-keyframes measure-topology-fetching-anim {\\r\\n    0% {\\r\\n        -webkit-transform: rotate(0deg);\\r\\n        transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n        -webkit-transform: rotate(360deg);\\r\\n        transform: rotate(360deg);\\r\\n    }\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    flex-direction: column;\\r\\n    bottom: 120%;\\r\\n    box-sizing: border-box;\\r\\n    text-align: left;\\r\\n    position: absolute;\\r\\n    padding-top: 15px;\\r\\n    padding-bottom: 15px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup {\\r\\n    right: 120%;\\r\\n    bottom: unset;\\r\\n    height: max-content;\\r\\n    width: max-content;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td {\\r\\n    width: auto;\\r\\n    padding-bottom: 0px;\\r\\n    padding-top: 0px;\\r\\n    vertical-align: inherit;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup tbody {\\r\\n    top: 15px;\\r\\n}\\r\\n\\r\\n.adsk-toolbar .measure-toolbar-seperator {\\r\\n    height: 18px;\\r\\n    width: 1px;\\r\\n    background-color: #999;\\r\\n    float: left;\\r\\n    margin: 16px 5px;\\r\\n}\\r\\n\\r\\n.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator {\\r\\n    height: 1px;\\r\\n    width: 18px;\\r\\n    margin: 5px 16px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-area {\\r\\n\\tdisplay: block;\\r\\n\\tposition: absolute;\\r\\n\\tcursor: pointer;\\r\\n\\tz-index: 1;\\r\\n\\t-webkit-tap-highlight-color: rgba(0,0,0,0);\\r\\n}\\r\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./Measure/Measure.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover\\r\\n{\\r\\n\\tbox-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n\\t-webkit-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n    -moz-box-shadow: 0 0 16px 3px rgba(0, 117, 210, 0.7);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n\\r\\n    height: 19px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    padding: 2px 0 2px 0;\\r\\n\\r\\n    background-color: #009bff;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\r\\n\\r\\n    color: #f4f4f4;\\r\\n    font-size:12px;\\r\\n    text-align: center;\\r\\n    line-height: 1.2;\\r\\n    white-space: nowrap;\\r\\n\\r\\n    border-radius: 8px;\\r\\n    pointer-events: none;\\r\\n    cursor: pointer;\\r\\n    z-index: 2;\\r\\n\\r\\n    -webkit-tap-highlight-color: rgba(0,0,0,0);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length.fetching-topology {\\r\\n    background-color: rgba(34, 34, 34, 0.8);\\r\\n    box-shadow: 0 0.5px 1.5px 0 rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-text {\\r\\n    display: inline-block;\\r\\n    margin: 0 5px 0 5px;\\r\\n    vertical-align: middle;\\r\\n    font-size: 16px;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-text {\\r\\n    margin: 0 5px 0 5px;\\r\\n    align-self: center;\\r\\n    font-size: 14px;\\r\\n\\toverflow: hidden;\\r\\n\\twhite-space: nowrap;\\r\\n\\theight: 16px;\\r\\n\\tline-height: 16px;\\r\\n\\tvertical-align: middle;\\r\\n\\tpointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-button {\\r\\n    display: inline-block;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n\\r\\n    color: #FFFFFF;\\r\\n    opacity: 0.7;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-length-button:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,\\r\\n.adsk-viewing-viewer .measure-label.on-edit {\\r\\n\\tbox-shadow: 0 0 4px 4px #0d69ca;\\r\\n\\t-webkit-box-shadow: 0 0 4px 4px #0d69ca;\\r\\n    -moz-box-shadow: 0 0 4px 4px #0d69ca;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label.editable {\\r\\n\\tpointer-events: all;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    cursor: move;\\r\\n    pointer-events: none; \\r\\n    border-radius:100px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-hit-area {\\r\\n\\tdisplay: inline-block;\\r\\n    position: absolute;\\r\\n    width: 44px;\\r\\n    height: 44px;\\r\\n    left: -22px;\\r\\n    top: -22px;\\r\\n    border-radius:100px;\\r\\n    z-index: 2;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-icon {\\r\\n    display: inline-block;\\r\\n    position: absolute;\\r\\n    width: 7px;\\r\\n    height: 7px;\\r\\n    left: -2px;\\r\\n    top: -2px;\\r\\n    background-color: #009bff;\\r\\n    border-style: solid;\\r\\n    border-width: 2px;\\r\\n    border-color: #FFFFFF;\\r\\n    border-radius:100px;\\r\\n\\tbox-shadow: 0 2px 5px 0 #182A3D;\\r\\n\\tz-index: 2;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-text {\\r\\n    display: inline-block;\\r\\n    margin: 0px 5px 0px 5px;\\r\\n    vertical-align: middle;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-horizontal-divider\\r\\n{\\r\\n    height: 1px;\\r\\n    border-top: 1px solid rgba(200,200,200,0.8);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-submenu-select\\r\\n{\\r\\n    display: block;\\r\\n    position: relative;\\r\\n    width: calc(100% - 40px);\\r\\n    padding: 10px 20px 0px 20px;\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .option-drop-down:disabled {\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-submenu-selectlabel\\r\\n{\\r\\n    position: relative;\\r\\n    display:  inline-block;\\r\\n    padding-right:  20px;\\r\\n    padding-bottom:  4px;\\r\\n}\\r\\n\\r\\n/*.measure-result {*/\\r\\n    /*display: inline-block;*/\\r\\n    /*padding: 10px 0px  10px 20px;*/\\r\\n/*}*/\\r\\n\\r\\n.adsk-viewing-viewer .measure-results {\\r\\n    position: relative;\\r\\n    display: block;\\r\\n    padding: 5px 0px  10px 30px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-label {\\r\\n    display: inline-block;\\r\\n    padding-right: 10px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-number {\\r\\n    display: inline-block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-collapse {\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    display: inline-block;\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n    margin: 0px 4px 0px 4px;\\r\\n    padding: 0px 4px 0px 4px;\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-collapse:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-repick {\\r\\n    position: absolute;\\r\\n    right: 20px;\\r\\n    display: inline-block;\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n    margin: 4px 4px 4px 4px;\\r\\n    padding: 4px 4px 4px 4px;\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-repick:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-restart {\\r\\n    margin: 10px 20px 15px 20px;\\r\\n    padding: 6px 10px 6px 10px;\\r\\n    width: calc(100% - 55px);\\r\\n    cursor: pointer;\\r\\n    text-align: center;\\r\\n    border-style: solid;\\r\\n    border-width: 1px;\\r\\n    border-color: rgba(255, 255, 255, 0.2);\\r\\n    border-radius: 3px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel:hover .measure-restart {\\r\\n    background-color: rgba(255,255,255, .12);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel .measure-restart:hover {\\r\\n    background-color: rgba(166,194,255, 0.7);\\r\\n    -webkit-transition: all 0.2s ease;\\r\\n    -moz-transition: all 0.2s ease;\\r\\n    -ms-transition: all 0.2s ease;\\r\\n    -o-transition: all 0.2s ease;\\r\\n    transition: all 0.2s ease;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title {\\r\\n    padding-top:   0px;\\r\\n    padding-left: 20px;\\r\\n    margin-top: 10px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title:hover {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title.collapsed  {\\r\\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);\\r\\n    background-repeat:no-repeat;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-panel-title.expanded  {\\r\\n    background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);\\r\\n    background-repeat:no-repeat;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td {\\r\\n    padding: 10px 0px  10px 20px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-result-container {\\r\\n\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-one-label {\\r\\n    display: inline-block;\\r\\n    margin: 18px 18px 18px 18px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: left;\\r\\n\\r\\n    padding: 2px;\\r\\n    background-color: #0033FF;\\r\\n    border-radius:         10px;\\r\\n    opacity: 0.6;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-two-label {\\r\\n    display: inline-block;\\r\\n    margin: 18px 18px 18px 18px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: left;\\r\\n\\r\\n    padding: 2px;\\r\\n    background-color: #0033FF;\\r\\n    border-radius:         10px;\\r\\n    opacity: 0.6;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-repick {\\r\\n    display: inline-block;\\r\\n    cursor: default;\\r\\n    margin: 20px 20px 20px 20px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-repick:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-result {\\r\\n    display: inline-block;\\r\\n    margin: 21px 0px 21px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-distance-icon {\\r\\n    display: inline-block;\\r\\n    margin: 20px 2px 20px 2px;\\r\\n    font-size: 52px;\\r\\n    color: #FF9900;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-angle-icon {\\r\\n    display: inline-block;\\r\\n    margin: 20px 2px 20px 2px;\\r\\n    font-size: 52px;\\r\\n    color: #FF9900;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-viewing-viewer .measure-result {\\r\\n    font-size: 20px;\\r\\n    color: #FF9900;\\r\\n    display: inline-block;\\r\\n    margin: 38px 0px 38px 0px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-initial {\\r\\n    font-size: 20px;\\r\\n    display: inline-block;\\r\\n    margin: 38px 0px 38px 56px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-button {\\r\\n    cursor: default;\\r\\n    position: relative;\\r\\n    top: 20px;\\r\\n    right: 20px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 18px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-button:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button {\\r\\n    position: relative;\\r\\n    top: 56px;\\r\\n    right: 4px;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    font-size: 16px;\\r\\n    float: right;\\r\\n    opacity: 0.5;\\r\\n    -webkit-transform : rotate(-90deg);\\r\\n    -moz-transform : rotate(-90deg);\\r\\n    -ms-transform : rotate(-90deg);\\r\\n    -o-transform : rotate(-90deg);\\r\\n    transform : rotate(-90deg);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button.rotated {\\r\\n    -webkit-transform : rotate(90deg);\\r\\n    -moz-transform : rotate(90deg);\\r\\n    -ms-transform : rotate(90deg);\\r\\n    -o-transform : rotate(90deg);\\r\\n    transform : rotate(90deg);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-button:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-delta-result {\\r\\n    display: inline-block;\\r\\n    margin: 0px 0px 20px 0px;\\r\\n    padding: 0px 0px 0px 56px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    background-color: #f4f4f4;\\r\\n    border-radius: 8px;\\r\\n    pointer-events: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.X {\\r\\n    background-color: #EC4545;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.Y {\\r\\n    background-color: #45C345;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon.Z {\\r\\n    background-color: #5757DA;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-icon {\\r\\n\\twidth: 20px;\\r\\n    height: 18px;\\r\\n    color: #f4f4f4;\\r\\n    border-radius: 8px 0 0 8px;\\r\\n    font-size: 12px;\\r\\n    padding-top: 4px;\\r\\n    line-height: 15px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n/* hover shouldn't work on mobile devices */\\r\\n.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{\\r\\n\\ttransition: opacity 0.1s linear;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-delta {\\r\\n    display: none;\\r\\n    position: absolute;\\r\\n    font-size: 18px;\\r\\n\\r\\n    left: 0px;\\r\\n    top:  0px;\\r\\n\\r\\n    background-color: #ffffff;\\r\\n    pointer-events: none;\\r\\n    \\r\\n    opacity: 0;\\r\\n\\r\\n    border-radius: 8px;\\r\\n    box-shadow: 0px 1px 3px 1px rgba(0,0,0,0.25);\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-delta.visible {\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-x {\\r\\n    color: #EC4545;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-y {\\r\\n    color: #45C345;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-label-axis-z {\\r\\n    color: #5757DA;\\r\\n}\\r\\n\\r\\n\\r\\n.adsk-viewing-viewer .magnifying-glass.visible {\\r\\n    display: block;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .magnifying-glass {\\r\\n    position: absolute;\\r\\n    display: none;\\r\\n    -moz-border-radius: 100%;\\r\\n    -webkit-border-radius: 100%;\\r\\n    border-radius: 100%;\\r\\n    background: transparent;\\r\\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\r\\n    -webkit-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);  \\r\\n    -moz-box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), inset 2px 2px 4px rgba(0,0,0,.5);\\r\\n    z-index: 4;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-fetching-topology {\\r\\n    display: inline-block;\\r\\n    width: 10px;\\r\\n    height: 10px;\\r\\n    background: url(res/icon-spinner-sm.svg);\\r\\n    margin: 3px 0px -2px 3px;\\r\\n    animation: measure-topology-fetching-anim 1.4s infinite linear;\\r\\n    -webkit-animation: measure-topology-fetching-anim 1.4s infinite linear;\\r\\n}\\r\\n\\r\\n@keyframes measure-topology-fetching-anim {\\r\\n    0% {\\r\\n        -webkit-transform: rotate(0deg);\\r\\n        transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n        -webkit-transform: rotate(360deg);\\r\\n        transform: rotate(360deg);\\r\\n    }\\r\\n}\\r\\n\\r\\n@-webkit-keyframes measure-topology-fetching-anim {\\r\\n    0% {\\r\\n        -webkit-transform: rotate(0deg);\\r\\n        transform: rotate(0deg);\\r\\n    }\\r\\n    100% {\\r\\n        -webkit-transform: rotate(360deg);\\r\\n        transform: rotate(360deg);\\r\\n    }\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup {\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    flex-direction: column;\\r\\n    bottom: 120%;\\r\\n    box-sizing: border-box;\\r\\n    text-align: left;\\r\\n    position: absolute;\\r\\n    padding-top: 15px;\\r\\n    padding-bottom: 15px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup {\\r\\n    right: 120%;\\r\\n    bottom: unset;\\r\\n    height: max-content;\\r\\n    width: max-content;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td {\\r\\n    width: auto;\\r\\n    padding-bottom: 0px;\\r\\n    padding-top: 0px;\\r\\n    vertical-align: inherit;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-settings-popup tbody {\\r\\n    top: 15px;\\r\\n}\\r\\n\\r\\n.adsk-toolbar .measure-toolbar-seperator {\\r\\n    height: 18px;\\r\\n    width: 1px;\\r\\n    background-color: #999;\\r\\n    float: left;\\r\\n    margin: 16px 5px;\\r\\n}\\r\\n\\r\\n.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator {\\r\\n    height: 1px;\\r\\n    width: 18px;\\r\\n    margin: 5px 16px;\\r\\n}\\r\\n\\r\\n.adsk-viewing-viewer .measure-selection-area {\\r\\n\\tdisplay: block;\\r\\n\\tposition: absolute;\\r\\n\\tcursor: pointer;\\r\\n\\tz-index: 1;\\r\\n\\t-webkit-tap-highlight-color: rgba(0,0,0,0);\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (!url) {\n    return url;\n  }\n\n  url = String(url.__esModule ? url.default : url); // If url is already wrapped in quotes, remove them\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t900: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon; //These come from main lmv bundle.\r\n\r\n    // /** @constructor */\r\n    export function MeasurementsManager(viewer)\r\n    {   \r\n        this.viewer = viewer;\r\n        this.init();\r\n\r\n        this.restoredMeasurementData = [];\r\n    }\r\n\r\n    var proto = MeasurementsManager.prototype;\r\n\r\n    proto.getCurrentMeasurement = function() {\r\n        return this.currentMeasurement;\r\n    };\r\n\r\n    proto.getRestoredMeasurementData = function() {\r\n        return this.restoredMeasurementData.slice();\r\n    }\r\n\r\n    proto.selectMeasurementById = function(id) {\r\n        var measurement = this.measurementsList[id];\r\n        \r\n        if (measurement) {\r\n            this.changeCurrentMeasurement(measurement);\r\n            return this.currentMeasurement;    \r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    proto.createMeasurement = function(measurementType) {\r\n        var id = this.measurementsCounter;\r\n        var measurement = new MeasureCommon.Measurement(measurementType, id);\r\n        this.measurementsList[id] = measurement;\r\n        this.measurementsCounter++;\r\n        this.changeCurrentMeasurement(measurement);\r\n        return this.currentMeasurement;\r\n    };\r\n\r\n    // Renders measurements from data.\r\n    proto.createMeasurementFromData = function(measurementData, measurementType, createIndicatorCb, preparePicksCb) {\r\n        this.createMeasurement(measurementType);\r\n        if (createIndicatorCb instanceof Function) {\r\n            createIndicatorCb(this.currentMeasurement);\r\n        }\r\n\r\n        this.initPicks(measurementData.picks);\r\n\r\n        if (preparePicksCb instanceof Function) {\r\n            preparePicksCb();\r\n        }\r\n\r\n        if (this.currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\r\n            this.currentMeasurement.closedArea = true;\r\n        }\r\n\r\n        this.currentMeasurement.isRestored = true;\r\n\r\n        const convertUnits = (value, square) => {\r\n            return Autodesk.Viewing.Private.convertUnits(\r\n                measurementData.sharedUnits,\r\n                this.viewer.model.getUnitString(),\r\n                measurementData.sharedCalibrationFactor,\r\n                parseFloat(value),\r\n                square\r\n            );\r\n        };\r\n\r\n        this.currentMeasurement.distanceXYZ = convertUnits(measurementData.distance);\r\n        this.currentMeasurement.distanceX = convertUnits(measurementData.deltaX);\r\n        this.currentMeasurement.distanceY = convertUnits(measurementData.deltaY);\r\n        this.currentMeasurement.distanceZ = convertUnits(measurementData.deltaZ);\r\n\r\n        this.currentMeasurement.area = convertUnits(measurementData.area, 'square');\r\n        this.currentMeasurement.angle = parseFloat(measurementData.angle);\r\n\r\n        const getIntersectPoints = () => {\r\n            const points = this.restoredMeasurementData[this.currentMeasurement.id];\r\n            const keys = Object.keys(points);\r\n            const intersectPoints = [];\r\n            for (let i = 0; i < keys.length; i++) {\r\n                const key = keys[i];\r\n                const pointData = points[key];\r\n                intersectPoints[key] = pointData.intersection;\r\n            }\r\n            return intersectPoints;\r\n        };\r\n\r\n        // This will render the measurements\r\n        this.currentMeasurement.indicator.renderFromPoints(getIntersectPoints(), true);\r\n\r\n        this.currentMeasurement.indicator.changeAllEndpointsEditableStyle(true);\r\n        this.currentMeasurement.indicator.enableSelectionAreas(true);\r\n        this.currentMeasurement.indicator.enableLabelsTouchEvents(true);\r\n\r\n        this.activatePicks();\r\n    };\r\n\r\n    // Initializes picks from pick data\r\n    proto.initPicks = function(pickData) {\r\n        if (!pickData) return;\r\n        const points = [];\r\n\r\n        for (let i = 0; i < pickData.length; i++) {\r\n            const pick = pickData[i];\r\n            if (!pick) continue;\r\n            const key = i + 1;\r\n\r\n            let pickPoint = new THREE.Vector3(pick.intersection.x, pick.intersection.y, pick.intersection.z);\r\n            const model =\r\n                pick.hasOwnProperty('modelId') && pick.modelId\r\n                    ? this.viewer.impl.findModel(pick.modelId)\r\n                    : this.viewer.model;\r\n\r\n            if (model) {\r\n                const modelData = model.getData();\r\n                pickPoint =\r\n                    modelData && modelData.hasOwnProperty('globalOffset')\r\n                        ? pickPoint.add(modelData.globalOffset).clone()\r\n                        : pickPoint.clone();\r\n            }\r\n\r\n            points[key] = {\r\n                intersection: pickPoint,\r\n                viewportId: pick.viewportIndex2d,\r\n                hasTopology: pick.hasTopology,\r\n                modelId: pick.modelId\r\n            };\r\n            this.currentMeasurement.getPick(key);\r\n        }\r\n\r\n        this.restoredMeasurementData[this.currentMeasurement.id] = points;\r\n    };\r\n\r\n    // Stores information from the restored measurement pick data in the current measurement picks\r\n    proto.activatePicks = function() {\r\n        if (!this.currentMeasurement.picks) return;\r\n        const keys = Object.keys(this.currentMeasurement.picks);\r\n\r\n        const id = this.currentMeasurement.id;\r\n        for (let i = 0; i < keys.length; i++) {\r\n            const key = keys[i];\r\n\r\n            const pick = this.currentMeasurement.picks[key];\r\n            const restoredMeasurements = this.getRestoredMeasurementData();\r\n            const pointInfo = restoredMeasurements[id][key];\r\n            let p = pointInfo.intersection.clone();\r\n\r\n            if (!pick.getGeometry() && pointInfo.intersection) {\r\n                pick.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\r\n                pick.geomVertex = p;\r\n                pick.intersectPoint = p;\r\n                pick.modelId = pointInfo.modelId;\r\n\r\n                // Set the isRestored flag if all of the picks are valid.\r\n                pick.viewportIndex2d = pointInfo.viewportId;\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.changeCurrentMeasurement = function(measurement) {\r\n        this.currentMeasurement = measurement;\r\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, data: { type: measurement.measurementType, id: measurement.id }});\r\n    };\r\n\r\n    proto.removeCurrentMeasurement = function() { \r\n        // Remove current measurement from the list\r\n        if (Object.keys(this.measurementsList).length > 0) {\r\n            delete this.measurementsList[this.currentMeasurement.id];\r\n        }\r\n    };\r\n\r\n    proto.init = function() {\r\n        this.reset();\r\n    };\r\n\r\n    proto.destroy = function() {\r\n        this.reset();\r\n    };\r\n\r\n    proto.reset = function() {\r\n        this.currentMeasurement = null;\r\n        this.measurementsList = {};\r\n        this.measurementsCounter = 0;\r\n    };\r\n\r\n","\r\n    var av = Autodesk.Viewing;\r\n    var MeasureCommon = av.MeasureCommon;\r\n    \r\n    /**\r\n     * Base class for an indicator.\r\n     */\r\n\r\n    export var Indicator = function(viewer, measurement, tool)\r\n    {\r\n        this.viewer = viewer;\r\n        this.setGlobalManager(viewer.globalManager);\r\n        this.measurement = measurement;\r\n        this.tool = tool;\r\n        this.snapper = tool.getSnapper();\r\n        this.materialExtensionLine = null;\r\n        this.materialExtensionFace = null;\r\n        this.extensionLines = [];\r\n        this.extensionFaces = [];\r\n        this.grayOutPlane = [];\r\n        this.materialPoint = null;\r\n        this.materialLine = null;\r\n        this.materialAngle = null;\r\n        this.materialAngleOutline = null;\r\n        this.materialGreyOutPlane = null;\r\n        this.materialFace = null;\r\n        this.angleArc = null;\r\n        this.angleOutline = [];\r\n        this.showMeasureResult = false;\r\n        this.visibleLabels = [];\r\n        this.overlayName = 'measure-indicator-overlay-' + (measurement.id || '');\r\n        this.xAxis = this.viewer.autocam.getWorldRightVector();\r\n        this.yAxis = this.viewer.autocam.getWorldUpVector();\r\n        this.zAxis = this.viewer.autocam.getWorldFrontVector();\r\n    };\r\n\r\n\r\n\r\n    var proto = Indicator.prototype;\r\n    av.GlobalManagerMixin.call(proto);\r\n\r\n    proto.init = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.updateDistance = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.updateAngle = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.clear = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.updateLabelsPosition = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.renderFromPoints = function(points, showMeasureResult) {\r\n        this.showMeasureResult = showMeasureResult;\r\n\r\n        this.clear();\r\n\r\n        for (var i = 1; i <= Object.keys(points).length; i++) {\r\n            const p = points[i];\r\n            if (!this.endpoints[i]) {\r\n                this.createEndpoint(i);\r\n            }\r\n    \r\n            this.endpoints[i].position = new THREE.Vector3(p.x, p.y, p.z);\r\n            this.showClick(i);\r\n        }\r\n            \r\n        this.renderRubberbandFromPoints(points);\r\n        \r\n        this.updateLabelsPosition();\r\n    };\r\n\r\n    // Renders the measurement and the labels.\r\n    proto.render = function(picks, showMeasureResult) {\r\n\r\n        this.showMeasureResult = showMeasureResult;\r\n\r\n        this.clear();\r\n\r\n        for (var i = 1; i <= Object.keys(picks).length; i++) {\r\n            if (this.measurement.hasPick(i)) {\r\n                this.renderPick(i);\r\n            }\r\n        }\r\n            \r\n        this.renderRubberband(picks);\r\n        \r\n        this.updateLabelsPosition();\r\n    };\r\n\r\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\r\n        return false;\r\n    };\r\n\r\n    proto.handleResize = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.setNoTopology = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.setFetchingTopology = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.setTopologyAvailable = function() {\r\n        return false;\r\n    };\r\n\r\n    proto.clientToCanvasCoords = function(event) {\r\n        var rect = this.viewer.impl.getCanvasBoundingClientRect();\r\n        var res = {};\r\n        if( event.hasOwnProperty(\"center\") )\r\n        {\r\n            event.canvasX = res.x = event.center.x - rect.left;\r\n            event.canvasY = res.y = event.center.y - rect.top;\r\n        }\r\n        else\r\n        {\r\n            event.canvasX = res.x = event.pointers[0].clientX - rect.left;\r\n            event.canvasY = res.y = event.pointers[0].clientY - rect.top;\r\n        }\r\n\r\n        return res;\r\n    };\r\n\r\n    proto.initLabelMobileGestures = function(label, pointNumber) {\r\n        var magnifyingGlass = this.viewer.toolController.getTool(\"magnifyingGlass\");\r\n\r\n        this.hammer = new av.Hammer.Manager(label, {\r\n                recognizers: [\r\n                    av.GestureRecognizers.drag,\r\n                    av.GestureRecognizers.singletap\r\n                ],\r\n                handlePointerEventMouse: false,\r\n                inputClass: av.isIE11 ? av.Hammer.PointerEventInput : av.Hammer.TouchInput\r\n            });\r\n\r\n        this.onSingleTapBinded = function(event) { \r\n                                    var pos = this.clientToCanvasCoords(event);\r\n                                    this.snapper.onMouseDown(pos);\r\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id); \r\n                                }.bind(this);\r\n\r\n        this.onDragStartBinded = function(event) {\r\n                                    var pos = this.clientToCanvasCoords(event);\r\n                                    this.snapper.onMouseDown(pos);\r\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id);\r\n                                    this.tool.editByDrag = true;\r\n\r\n                                    // Activate Magnifying Glass and tool by faking press event.\r\n                                    event.type = \"press\";\r\n                                    magnifyingGlass.handlePressHold(event);\r\n                                    this.tool.handlePressHold(event);\r\n                                    event.type = \"dragstart\";\r\n                                    magnifyingGlass.handleGesture(event);\r\n                                    this.tool.handleGesture(event);\r\n                                }.bind(this);\r\n\r\n        this.onDragMoveBinded = function(event){ \r\n                                    var pos = this.clientToCanvasCoords(event);\r\n                                    this.snapper.onMouseDown(pos);\r\n\r\n                                    magnifyingGlass.handleGesture(event);\r\n                                    this.tool.handleGesture(event);\r\n                                }.bind(this);\r\n\r\n        this.onDragEndBinded = function(event){ \r\n                                    var pos = this.clientToCanvasCoords(event);\r\n                                    this.snapper.onMouseDown(pos);\r\n                                    \r\n                                    // Deactivate Magnifying Glass and tool by faking pressup event.\r\n                                    magnifyingGlass.handleGesture(event);\r\n                                    this.tool.handleGesture(event);\r\n                                    event.type = \"pressup\";\r\n                                    magnifyingGlass.handlePressHold(event);\r\n                                    this.tool.handlePressHold(event);\r\n\r\n                                    this.tool.handleButtonUp(event);\r\n                                }.bind(this);\r\n\r\n        this.hammer.on(\"singletap\", this.onSingleTapBinded);\r\n        this.hammer.on(\"dragstart\", this.onDragStartBinded);\r\n        this.hammer.on(\"dragmove\", this.onDragMoveBinded);\r\n        this.hammer.on(\"dragend\", this.onDragEndBinded);\r\n    };\r\n\r\n    proto.clearLabelMobileGestures = function() {\r\n        if (this.hammer) {\r\n            this.hammer.off(\"singletap\", this.onSingleTapBinded);\r\n            this.hammer.off(\"dragstart\", this.onDragStartBinded);\r\n            this.hammer.off(\"dragmove\", this.onDragMoveBinded);\r\n            this.hammer.off(\"dragend\", this.onDragEndBinded);\r\n            this.hammer = null;\r\n        }\r\n    };\r\n\r\n    proto.updateVisibleLabelsArray = function(label, isVisible) {\r\n        if (isVisible) {\r\n            if (!(this.visibleLabels.indexOf(label) > -1)) {\r\n                this.visibleLabels.push(label);        \r\n            }\r\n        } else {\r\n            // remove from array\r\n            var index = this.visibleLabels.indexOf(label);\r\n            if (index > -1) {\r\n                this.visibleLabels.splice(index, 1);\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.hideEndpoints = function() {\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endpoint = this.endpoints[name];\r\n                if (endpoint.label) {\r\n                    this.hideLabel(endpoint.label);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.showEndpoints = function() {\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endpoint = this.endpoints[name];\r\n                if (this.measurement.hasPick(name) && endpoint.label) {\r\n                    this.showLabel(endpoint.label);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.hideLabel = function(label) {\r\n        if (label) {\r\n            MeasureCommon.safeToggle(label, 'visible', false);\r\n            this.updateVisibleLabelsArray(label, false);      \r\n        }\r\n    };\r\n\r\n    proto.showLabel = function(label) {\r\n        if (label) {\r\n            MeasureCommon.safeToggle(label, 'visible', true);\r\n            this.updateVisibleLabelsArray(label, true);\r\n        }\r\n    };\r\n\r\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\r\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\r\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'on-edit', isEditing);\r\n        }\r\n    };\r\n\r\n    proto.changeEndpointEditableStyle = function(endpointNumber, isEditable) {\r\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\r\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'editable', isEditable);\r\n        }\r\n    };\r\n\r\n    proto.changeAllEndpointsEditableStyle = function(isEditable) {\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                this.changeEndpointEditableStyle(name, isEditable);    \r\n            }\r\n        }\r\n    };\r\n\r\n    proto.changeAllEndpointsOnEditStyle = function(isEditing) {\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                this.changeEndpointOnEditStyle(name, isEditing);\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.hideLabelsOutsideOfView = function() {\r\n        // For each label, check if it's inside the camera viewport.\r\n        if (this.viewer.model && !this.viewer.model.is2d()) {\r\n            this.visibleLabels.forEach(function(label) {\r\n\r\n                // Ignore labels if position is not computed yet. This may temporarily happen, because label positions are not\r\n                // always immediately assigned. (see MeasureToolIndicator.js)\r\n                // Note that we must not set them to invisible here, because this may cause a hen-and-egg-problem: \r\n                // Some code sections in MeasureToolIndicator.updatePositions() don't set the label position for invisible labels.\r\n                if (!label.point) {\r\n                    return;\r\n                }\r\n\r\n                var show = this.viewer.navigation.isPointVisible(label.point);\r\n\r\n                if ((label.classList.contains('visible') && !show) || (!label.classList.contains('visible') && show)) {\r\n                    label.classList.toggle('visible', show);    \r\n                } \r\n\r\n            }.bind(this));\r\n        }\r\n    };\r\n\r\n    proto.showClick = function(pickNumber) {\r\n        if (this.tool.getActivePointIndex() !== pickNumber) {\r\n            this.showLabel(this.endpoints[pickNumber].label);\r\n        }\r\n    };\r\n\r\n    proto.hideClick = function(pickNumber) {\r\n\r\n        if (this.endpoints[pickNumber]) {\r\n            this.hideLabel(this.endpoints[pickNumber].label);    \r\n        }\r\n    };\r\n\r\n    proto.renderPick = function(pickNumber) {\r\n        if (!this.endpoints[pickNumber]) {\r\n            this.createEndpoint(pickNumber);\r\n        }\r\n\r\n        this.renderEndpointGeometry(pickNumber);\r\n        this.showClick(pickNumber);\r\n    };\r\n\r\n    proto.renderEndpointGeometry = function(pickNumber) {\r\n        var geometry = MeasureCommon.getSnapResultPosition(this.measurement.getPick(pickNumber), this.viewer);\r\n        \r\n        if (geometry !== null) {\r\n            this.endpoints[pickNumber].position = geometry.clone();\r\n        }\r\n    };\r\n\r\n\r\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\r\n    proto.drawEdgeAsCylinder = function(geom, material, linewidth, type, cylinderGeometry) {\r\n\r\n        // The array for all cylinders\r\n        var edge = [];\r\n        var cylinder;\r\n\r\n        if (type == 1) { // LinePieces\r\n            for (var i = 0; i < geom.vertices.length; i += 2) {\r\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\r\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\r\n                edge.push(cylinder);\r\n            }\r\n        }\r\n        else { // LineStrip\r\n            for (var i = 0; i < geom.vertices.length - 1; i++) {\r\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\r\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\r\n                edge.push(cylinder);\r\n            }\r\n        }\r\n\r\n\r\n        return edge;\r\n    };\r\n\r\n    proto.drawDashedLine = function(p1, p2, dashSize, gapSize, material, width, overlayName) {\r\n\r\n        var geometry = new THREE.Geometry();\r\n        var line = new THREE.Vector3().subVectors(p2, p1);\r\n        var lineLength = line.length() - gapSize;\r\n        var lineDirection = line.normalize();\r\n        \r\n        var i = 0;\r\n        var pos = p1.clone();\r\n        var currLength = 0;\r\n\r\n        while (currLength < lineLength) {\r\n            var isPointVisible = this.viewer.navigation.isPointVisible(pos);\r\n            \r\n            if (isPointVisible) {\r\n                geometry.vertices[i] = pos.clone();\r\n                i++;\r\n            }\r\n            \r\n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(dashSize));\r\n            \r\n            if (isPointVisible) {\r\n                geometry.vertices[i] = pos.clone();\r\n                i++;\r\n            }\r\n            \r\n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(gapSize));\r\n\r\n            currLength += dashSize + gapSize;\r\n        }\r\n        \r\n        line = this.drawEdgeAsCylinder(geometry, material, width, 1, this.getNewCylinderGeometry());\r\n        this.viewer.impl.addMultipleOverlays(overlayName, line);\r\n\r\n        return line;\r\n    };\r\n\r\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\r\n    proto.drawLineAsCylinder = function(geom, material, linewidth, overlayName) {\r\n\r\n        var line;\r\n\r\n        if (geom.vertices.length == 2) {\r\n            line = this.cylinderMesh(geom.vertices[0], geom.vertices[1], material, linewidth, this.getNewCylinderGeometry());\r\n            this.setCylinderScale(line, geom.vertices[0], geom.vertices[1]);\r\n            this.viewer.impl.addOverlay(overlayName, line);\r\n        }\r\n\r\n        return line;\r\n    };\r\n\r\n    proto.getNewCylinderGeometry = function() {\r\n        return new THREE.CylinderGeometry(0.1, 0.1, 1, 8, 1, true);\r\n    };\r\n\r\n\r\n    proto.cylinderMesh = function(pointX, pointY, material, linewidth, cylinderGeometry) {\r\n\r\n        var direction = new THREE.Vector3().subVectors(pointY, pointX);\r\n        var orientation = new THREE.Matrix4();\r\n        orientation.lookAt(pointX, pointY, new THREE.Object3D().up);\r\n        orientation.multiply(new THREE.Matrix4().set(linewidth, 0, 0, 0,\r\n            0, 0, linewidth, 0,\r\n            0, -direction.length(), 0, 0,\r\n            0, 0, 0, 1));\r\n\r\n        var edge = new THREE.Mesh(cylinderGeometry, material);\r\n        edge.applyMatrix(orientation);\r\n        edge.lmv_line_width = linewidth;\r\n        edge.position.x = (pointY.x + pointX.x) / 2;\r\n        edge.position.y = (pointY.y + pointX.y) / 2;\r\n        edge.position.z = (pointY.z + pointX.z) / 2;\r\n\r\n        return edge;\r\n    };\r\n\r\n    // Set scale for cylinder\r\n    proto.setCylinderScale = function(cylinderMesh, p1, p2) {\r\n        var scale;\r\n\r\n        if (p1 && p2) {\r\n            var point = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), p1, p2);\r\n            scale = this.setScale(point);    \r\n        } else {\r\n            scale = this.setScale(cylinderMesh.position);\r\n        }\r\n\r\n        if (cylinderMesh.hasOwnProperty(\"lmv_line_width\"))\r\n            scale *= cylinderMesh.lmv_line_width;\r\n        cylinderMesh.scale.x = scale;\r\n        cylinderMesh.scale.z = scale;\r\n    };\r\n\r\n\r\n    // Set scale for vertex and extension dashed line\r\n    proto.setScale = function(point) {\r\n\r\n        var pixelSize = 5;\r\n\r\n        var navapi = this.viewer.navigation;\r\n        var camera = navapi.getCamera();\r\n        var position = navapi.getPosition();\r\n\r\n        var p = point.clone();\r\n\r\n        var distance = camera.isPerspective ? p.sub(position).length()\r\n            : navapi.getEyeVector().length();\r\n\r\n        var fov = navapi.getVerticalFov();\r\n        var worldHeight = 2.0 * distance * Math.tan(THREE.Math.degToRad(fov * 0.5));\r\n\r\n        var viewport = navapi.getScreenViewport();\r\n        var scale = pixelSize * worldHeight / viewport.height;\r\n\r\n        return scale;\r\n    };\r\n\r\n    proto.alignLabelWithLine = function(label, p1, p2, offset, viewer){\r\n        var camUpVector = viewer.navigation.getCameraUpVector();\r\n        var worldUpVec = new THREE.Vector3(0,1,0);\r\n        var cameraAngle = worldUpVec.angleTo(camUpVector) * 180 / Math.PI;\r\n\r\n        cameraAngle = camUpVector.x >= 0 ? cameraAngle : -cameraAngle;\r\n        \r\n        var angle = null;\r\n\r\n        var deltaX = p1.x - p2.x;\r\n        var deltaY = p1.y - p2.y;\r\n\r\n        if (p1.x < p2.x) {\r\n            angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \r\n        } \r\n        else {\r\n            angle =  Math.atan2(deltaY , deltaX) * 180 / Math.PI;    \r\n        }\r\n\r\n        angle = -(angle + cameraAngle);\r\n\r\n        if (Math.abs(angle) > 90){\r\n            angle = angle + 180;\r\n        }\r\n\r\n        label.style.transform = 'rotate('+ angle +'deg) translate(0px, ' + offset + 'px)';\r\n    };\r\n\r\n    proto.destroy = function() {\r\n        this.materialPoint = null;\r\n        this.materialFace = null;\r\n        this.materialLine = null;\r\n        this.materialAngle = null;\r\n\r\n        if (av.isTouchDevice()) {\r\n            this.clearLabelMobileGestures();    \r\n        }\r\n\r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endPoint = this.endpoints[name];\r\n\r\n                if (endPoint.label) {\r\n                    endPoint.label.removeEventListener(av.isSafari() ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);\r\n                    endPoint.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                    endPoint.label.parentNode.removeChild(endPoint.label);\r\n                    endPoint.label = null;\r\n                }\r\n            }\r\n        }\r\n\r\n        this.visibleLabels = [];\r\n    };\r\n\r\n    proto.renderRubberbandFromPoints = function(points) {\r\n        switch (this.measurement.measurementType) {\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\r\n                var start = points[1];\r\n                var end = points[2];\r\n                \r\n                if (start && end) {\r\n                    this.renderDistanceMeasurementFromPoints(start, end);\r\n                }\r\n                break;\r\n\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\r\n                this.renderAngleMeasurementFromPoints(points);\r\n                break;\r\n\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\r\n                this.renderAreaMeasurementFromPoints(points);\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    proto.renderRubberband = function(picks) {\r\n\r\n        switch (this.measurement.measurementType) {\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\r\n                var previewsPick = picks[1];\r\n                var activePick = picks[2];\r\n                var start = MeasureCommon.getSnapResultPosition(previewsPick, this.viewer);\r\n                var end = MeasureCommon.getSnapResultPosition(activePick, this.viewer);\r\n                \r\n                if (start && end) {\r\n                    this.renderDistanceMeasurement(start, end);\r\n                }\r\n                break;\r\n\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\r\n                this.renderAngleMeasurement(picks);\r\n                break;\r\n\r\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\r\n                this.renderAreaMeasurement(picks);\r\n                break;\r\n        }\r\n    };\r\n\r\n    proto.initMouseEvent = function(label, pointNumber) {\r\n        \r\n        var isSafari = av.isSafari();\r\n        this.onMouseClickBinded = function(event) { \r\n            if(isSafari || event.pointerType === 'mouse'){\r\n                event.canvasX = event.clientX;\r\n                event.canvasY = event.clientY;\r\n                this.tool.editEndpoint(event, pointNumber, this.measurement.id); \r\n            }\r\n        }.bind(this);\r\n        label.addEventListener(isSafari ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);         \r\n    };\r\n","    // Centroid of a polygon is the average of its points.\r\n    export function getCentroidOfPolygon(points) {\r\n        var centroid = new THREE.Vector3();\r\n        var n = points.length;\r\n\r\n        for (var i = 0; i < n; i++) {\r\n            centroid.add(points[i]);\r\n        }\r\n\r\n        centroid.multiplyScalar(1 / n);\r\n        return centroid;\r\n    }\r\n\r\n    // Algorithm based on https://github.com/mapbox/polylabel\r\n    export function getPolygonVisualCenter(polygon) {\r\n        function compareMax(a, b) {\r\n            return b.max - a.max;\r\n        }\r\n\r\n        function Cell(x, y, h, polygon) {\r\n            this.x = x; // cell center x\r\n            this.y = y; // cell center y\r\n            this.h = h; // half the cell size\r\n            this.d = pointToPolygonDist(x, y, polygon); // distance from cell center to polygon\r\n            this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\r\n        }\r\n\r\n        // signed distance from point to polygon outline (negative if point is outside)\r\n        function pointToPolygonDist(x, y, polygon) {\r\n            var inside = false;\r\n            var minDistSq = Infinity;\r\n\r\n            for (var k = 0; k < polygon.length; k++) {\r\n                var ring = polygon[k];\r\n\r\n                for (var i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\r\n                    var a = ring[i];\r\n                    var b = ring[j];\r\n\r\n                    if ((a.y > y !== b.y > y) &&\r\n                        (x < (b.x - a.x) * (y - a.y) / (b.y - a.y) + a.x)) inside = !inside;\r\n\r\n                    minDistSq = Math.min(minDistSq, getSegDistSq(x, y, a, b));\r\n                }\r\n            }\r\n\r\n            return (inside ? 1 : -1) * Math.sqrt(minDistSq);\r\n        }\r\n\r\n        // get polygon centroid\r\n        function getCentroidCell(polygon) {\r\n            var area = 0;\r\n            var x = 0;\r\n            var y = 0;\r\n            var points = polygon[0];\r\n\r\n            for (var i = 0, len = points.length, j = len - 1; i < len; j = i++) {\r\n                var a = points[i];\r\n                var b = points[j];\r\n                var f = a.x * b.y - b.x * a.y;\r\n                x += (a.x + b.x) * f;\r\n                y += (a.y + b.y) * f;\r\n                area += f * 3;\r\n            }\r\n            if (area === 0) return new Cell(points[0].x, points[0].y, 0, polygon);\r\n            return new Cell(x / area, y / area, 0, polygon);\r\n        }\r\n\r\n        // get squared distance from a point to a segment\r\n        function getSegDistSq(px, py, a, b) {\r\n\r\n            var x = a.x;\r\n            var y = a.y;\r\n            var dx = b.x - x;\r\n            var dy = b.y - y;\r\n\r\n            if (dx !== 0 || dy !== 0) {\r\n\r\n                var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\r\n\r\n                if (t > 1) {\r\n                    x = b.x;\r\n                    y = b.y;\r\n\r\n                } else if (t > 0) {\r\n                    x += dx * t;\r\n                    y += dy * t;\r\n                }\r\n            }\r\n\r\n            dx = px - x;\r\n            dy = py - y;\r\n\r\n            return dx * dx + dy * dy;\r\n        }\r\n\r\n        function TinyQueue(data, compare) {\r\n\r\n            function defaultCompare(a, b) {\r\n                return a < b ? -1 : a > b ? 1 : 0;\r\n            }\r\n\r\n            if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\r\n\r\n            this.data = data || [];\r\n            this.length = this.data.length;\r\n            this.compare = compare || defaultCompare;\r\n\r\n            if (this.length > 0) {\r\n                for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\r\n            }\r\n        }\r\n\r\n        TinyQueue.prototype = {\r\n\r\n            push: function (item) {\r\n                this.data.push(item);\r\n                this.length++;\r\n                this._up(this.length - 1);\r\n            },\r\n\r\n            pop: function () {\r\n                if (this.length === 0) return undefined;\r\n\r\n                var top = this.data[0];\r\n                this.length--;\r\n\r\n                if (this.length > 0) {\r\n                    this.data[0] = this.data[this.length];\r\n                    this._down(0);\r\n                }\r\n                this.data.pop();\r\n\r\n                return top;\r\n            },\r\n\r\n            peek: function () {\r\n                return this.data[0];\r\n            },\r\n\r\n            _up: function (pos) {\r\n                var data = this.data;\r\n                var compare = this.compare;\r\n                var item = data[pos];\r\n\r\n                while (pos > 0) {\r\n                    var parent = (pos - 1) >> 1;\r\n                    var current = data[parent];\r\n                    if (compare(item, current) >= 0) break;\r\n                    data[pos] = current;\r\n                    pos = parent;\r\n                }\r\n\r\n                data[pos] = item;\r\n            },\r\n\r\n            _down: function (pos) {\r\n                var data = this.data;\r\n                var compare = this.compare;\r\n                var halfLength = this.length >> 1;\r\n                var item = data[pos];\r\n\r\n                while (pos < halfLength) {\r\n                    var left = (pos << 1) + 1;\r\n                    var right = left + 1;\r\n                    var best = data[left];\r\n\r\n                    if (right < this.length && compare(data[right], best) < 0) {\r\n                        left = right;\r\n                        best = data[right];\r\n                    }\r\n                    if (compare(best, item) >= 0) break;\r\n\r\n                    data[pos] = best;\r\n                    pos = left;\r\n                }\r\n\r\n                data[pos] = item;\r\n            }\r\n        };\r\n\r\n        if (polygon.length === 3) {\r\n            return getCentroidOfPolygon(polygon);\r\n        }\r\n\r\n        var precision = 0.01;\r\n        polygon = [polygon];\r\n\r\n        // find the bounding box of the outer ring\r\n        var minX, minY, maxX, maxY;\r\n        for (var i = 0; i < polygon[0].length; i++) {\r\n            var p = polygon[0][i];\r\n            if (!i || p.x < minX) minX = p.x;\r\n            if (!i || p.y < minY) minY = p.y;\r\n            if (!i || p.x > maxX) maxX = p.x;\r\n            if (!i || p.y > maxY) maxY = p.y;\r\n        }\r\n\r\n        var width = maxX - minX;\r\n        var height = maxY - minY;\r\n        var cellSize = Math.min(width, height);\r\n        var h = cellSize / 2;\r\n\r\n        // a priority queue of cells in order of their \"potential\" (max distance to polygon)\r\n        var cellQueue = new TinyQueue(null, compareMax);\r\n\r\n        if (cellSize === 0) return [minX, minY];\r\n\r\n        // cover polygon with initial cells\r\n        for (var x = minX; x < maxX; x += cellSize) {\r\n            for (var y = minY; y < maxY; y += cellSize) {\r\n                cellQueue.push(new Cell(x + h, y + h, h, polygon));\r\n            }\r\n        }\r\n\r\n        // take centroid as the first best guess\r\n        var bestCell = getCentroidCell(polygon);\r\n\r\n        // special case for rectangular polygons\r\n        var bboxCell = new Cell(minX + width / 2, minY + height / 2, 0, polygon);\r\n        if (bboxCell.d > bestCell.d) bestCell = bboxCell;\r\n\r\n        while (cellQueue.length) {\r\n            // pick the most promising cell from the queue\r\n            var cell = cellQueue.pop();\r\n\r\n            // update the best cell if we found a better one\r\n            if (cell.d > bestCell.d) {\r\n                bestCell = cell;\r\n            }\r\n\r\n            // do not drill down further if there's no chance of a better solution\r\n            if (cell.max - bestCell.d <= precision) continue;\r\n\r\n            // split the cell into four cells\r\n            h = cell.h / 2;\r\n            cellQueue.push(new Cell(cell.x - h, cell.y - h, h, polygon));\r\n            cellQueue.push(new Cell(cell.x + h, cell.y - h, h, polygon));\r\n            cellQueue.push(new Cell(cell.x - h, cell.y + h, h, polygon));\r\n            cellQueue.push(new Cell(cell.x + h, cell.y + h, h, polygon));\r\n        }\r\n\r\n        return {x:bestCell.x, y:bestCell.y};\r\n    };\r\n","import { Indicator } from './Indicator'\r\nimport { getPolygonVisualCenter } from \"./PolygonCentroid\";\r\n\r\n    var av = Autodesk.Viewing;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n\r\n    // /** @constructor */\r\n    export function MeasureToolIndicator( viewer, measurement, measureTool )\r\n    {\r\n        Indicator.call(this, viewer, measurement, measureTool);\r\n        this.measureTool = measureTool;\r\n        this.endpoints = [];\r\n        this.lines = { \r\n            xyz: {axis: false, material: createLineMaterial('005BCE'), className: 'adsk-icon-axis-delta' + '-xyz measure-label-axis-delta' + ' measure-label-axis-xyz'},\r\n            x:   {axis: true,  material: createLineMaterial('F12C2C'), className: 'adsk-icon-axis-delta' + '-x measure-label-axis-delta' + ' measure-label-axis-x', iconText: 'X'},\r\n            y:   {axis: true,  material: createLineMaterial('0BB80B'), className: 'adsk-icon-axis-delta' + '-y measure-label-axis-delta' + ' measure-label-axis-y', iconText: 'Y'},\r\n            z:   {axis: true,  material: createLineMaterial('2C2CF1'), className: 'adsk-icon-axis-delta' + '-z measure-label-axis-delta' + ' measure-label-axis-z', iconText: 'Z'}\r\n        };\r\n        this.segments = [];\r\n        this.dashedLine = {};\r\n        this.simple = false;\r\n        this.angleLabel = {};\r\n        this.areaLabel = {};\r\n        this.labels = [];\r\n        this.isLeaflet = false;\r\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\r\n        this.tmpVector = new THREE.Vector3();\r\n        this.surfaceColor = new THREE.MeshBasicMaterial({\r\n            color: parseInt('005BCE', 16),\r\n            opacity: 0.15,\r\n            transparent: true,\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });   \r\n    }\r\n\r\n    MeasureToolIndicator.prototype = Object.create(Indicator.prototype);\r\n    MeasureToolIndicator.prototype.constructor = MeasureToolIndicator;\r\n    var proto = MeasureToolIndicator.prototype;\r\n\r\n    function createLineMaterial(color) {\r\n        return new THREE.MeshBasicMaterial({\r\n            color: parseInt(color, 16),\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });   \r\n    }\r\n\r\n    var _labelsSpace = 4;\r\n    var _angleLabelOffset = 5;\r\n    var TOPOLOGY_NOT_AVAILABLE = 0;\r\n    var TOPOLOGY_FETCHING = 1; \r\n    var TOPOLOGY_AVAILABLE = 2;\r\n    var _selectorAreaSize = 15;\r\n\r\n    var _tipHeight = 2;\r\n    var _tipWidth = 3;\r\n    var _segmentWidth = 4;\r\n    var _dashedSegmentWidth = 3;\r\n    var _axisLineWidth = 2;\r\n    var _dashSize = 2;\r\n    var _gapSize = 1;\r\n\r\n    var _angleArcWidth = 2;\r\n\r\n    function isVisible(label) {\r\n        return label.classList.contains('visible');\r\n    }\r\n\r\n    proto.init = function() {\r\n        this.isLeaflet = this.viewer.model.getData().isLeaflet;\r\n        // Create HTML Labels\r\n        var currLabel;\r\n\r\n        this.onSelectionAreaClickedBinded = this.onSelectionAreaClicked.bind(this);\r\n\r\n        // Line\r\n        if (!this.lines.xyz.label) {\r\n            currLabel = this.lines.xyz.label = this.createMeasurementLabel(); // Measurement result\r\n            currLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            currLabel.addEventListener('click', this.onSelectionAreaClickedBinded);\r\n            this.viewer.container.appendChild(currLabel);\r\n        }\r\n        switch (this.topologyStatus) {\r\n            case TOPOLOGY_FETCHING:\r\n                this.setFetchingTopology();\r\n                break;\r\n            case TOPOLOGY_AVAILABLE:\r\n                this.setTopologyAvailable();\r\n                break;\r\n            case TOPOLOGY_NOT_AVAILABLE:\r\n                this.setNoTopology();\r\n                break;\r\n        }\r\n\r\n        this.showMeasureResult = false;\r\n\r\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\r\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n\r\n        this.handleButtonUpBinded = this.measureTool.handleButtonUp.bind(this.measureTool);\r\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\r\n    };\r\n\r\n    proto.createEndpoint = function(index) {\r\n        this.endpoints[index] = {};\r\n        var currLabel = this.endpoints[index].label = this.createSnapResultLabel(index);\r\n        this.viewer.container.appendChild(currLabel);    \r\n    };\r\n\r\n    proto.updateLabelsPosition = function() {\r\n\r\n        var point,\r\n            xy,\r\n            label,\r\n            key;\r\n\r\n\r\n        for (key in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(key)) {\r\n                    label = this.endpoints[key].label;\r\n                    point = this.endpoints[key].position;\r\n\r\n                if (label && point && isVisible(label)) {\r\n                    xy = MeasureCommon.project(point, this.viewer);\r\n\r\n                    xy.x = xy.x - label.getBoundingClientRect().width / 2;\r\n                    xy.y = xy.y - label.getBoundingClientRect().height / 2;\r\n                    \r\n                    label.style.top  = xy.y + 'px';\r\n                    label.style.left = xy.x + 'px';\r\n                    label.point = point;\r\n                    this.labels.push(label);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (var name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                    label = item.label;\r\n\r\n                if (label && item.p1 && item.p2 && isVisible(label)) {\r\n                    \r\n                    item.line.visible = item.visible;\r\n\r\n                    point = { x: (item.p1.x + item.p2.x)/2, y: (item.p1.y + item.p2.y)/2, z: (item.p1.z + item.p2.z)/2 };\r\n                    \r\n                    xy = MeasureCommon.project(point, this.viewer);\r\n                    label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\r\n                    label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\r\n\r\n                    if (this.viewer.model && this.viewer.model.is2d()) {\r\n                        var offset = item === this.lines.xyz ? 0 : label.clientHeight;\r\n\r\n                        var p1Projected = MeasureCommon.project(item.p1, this.viewer);\r\n                        var p2Projected = MeasureCommon.project(item.p2, this.viewer);\r\n\r\n                        if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\r\n                            if (item === this.lines.xyz) {\r\n                                offset = label.clientHeight;\r\n                            } else {\r\n                                // Hide all axis labels and quit the loop\r\n                            \r\n                                this.lines.x.line.visible = false;\r\n                                this.lines.y.line.visible = false;\r\n\r\n                                this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\r\n\r\n                                for (name in this.lines) {\r\n                                    if (this.lines.hasOwnProperty(name)) {\r\n                                        if (this.lines[name] !== this.lines.xyz) {\r\n                                            var currLabel = this.lines[name].label;\r\n                                            if (currLabel) {\r\n                                                currLabel.style.opacity = 0;\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n\r\n                                break;\r\n                                \r\n                            }\r\n                        }\r\n\r\n                        if (item !== this.lines.xyz) {\r\n                            var xyzDirection = new THREE.Vector3();\r\n                            var itemDirection = new THREE.Vector3();\r\n                            xyzDirection.subVectors(this.lines.xyz.p1, this.lines.xyz.p2).normalize();\r\n                            itemDirection.subVectors(item.p1, item.p2).normalize();\r\n                            var normal = xyzDirection.cross(this.viewer.navigation.getEyeVector()).normalize();\r\n                            var angle = normal.dot(itemDirection);\r\n                            \r\n                            if (angle < 0) {\r\n                                offset = -offset;\r\n                            }\r\n                        }\r\n\r\n                        this.alignLabelWithLine(label, item.p1, item.p2, offset, this.viewer);\r\n                    }\r\n\r\n                    label.style.opacity = 1;\r\n                    label.point = point;\r\n                    this.labels.push(label);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.angleLabel) {\r\n\r\n            label = this.angleLabel.label;\r\n\r\n            if (label && this.angleLabel.p1 && this.angleLabel.p2 && isVisible(label)) {\r\n                point = { x: (this.angleLabel.p1.x + this.angleLabel.p2.x)/2, y: (this.angleLabel.p1.y + this.angleLabel.p2.y)/2, z: (this.angleLabel.p1.z + this.angleLabel.p2.z)/2 };\r\n                xy = MeasureCommon.project(point, this.viewer, _angleLabelOffset);\r\n                label.style.top = xy.y - Math.floor(label.clientHeight / 2) + 'px';\r\n                label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\r\n                label.point = point;\r\n                this.labels.push(label);\r\n            }\r\n        }\r\n\r\n        if (this.areaLabel) {\r\n\r\n            label = this.areaLabel.label;\r\n\r\n            if (label && this.areaLabel.p1 && this.areaLabel.p2 && isVisible(label)) {\r\n                point = { x: (this.areaLabel.p1.x + this.areaLabel.p2.x)/2, y: (this.areaLabel.p1.y + this.areaLabel.p2.y)/2, z: (this.areaLabel.p1.z + this.areaLabel.p2.z)/2 };\r\n                xy = MeasureCommon.project(point, this.viewer);\r\n                label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\r\n                label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\r\n                label.point = point;\r\n                this.labels.push(label);\r\n            }\r\n        }\r\n\r\n        if (this.viewer.model && !this.viewer.model.is2d()) {\r\n    \r\n            var needToStackLabels = false;\r\n            this.labelsStacked = false;\r\n            var currentLabel, i;\r\n\r\n            // Backup lable's positions in case of the need of stacking them later\r\n            var backupPositions = [];\r\n            for (i = 0; i < this.labels.length; i++) {\r\n                backupPositions.push({left: this.labels[i].style.left, top:this.labels[i].style.top});\r\n            }\r\n\r\n            // Detect and move in case of overlapping.\r\n            for (i = 0; i < this.labels.length && !needToStackLabels; i++) {\r\n                currentLabel = this.labels[i];\r\n                needToStackLabels = this.labelsOverlapDetection(currentLabel, this.labels);\r\n            }\r\n\r\n            // If we found out that the labels need to be stacked, restore their positions from the backup first, and then start again.\r\n            if (needToStackLabels) {\r\n\r\n                for (i = 0; i < this.labels.length; i++) {\r\n                    this.labels[i].style.left = backupPositions[i].left;\r\n                    this.labels[i].style.top = backupPositions[i].top;\r\n                }\r\n\r\n                this.stackLabels(this.labels);\r\n\r\n                for (i = 0; i < this.labels.length; i++) {\r\n                    currentLabel = this.labels[i];\r\n                    this.labelsOverlapDetection(currentLabel, this.labels);\r\n                }\r\n            } \r\n        }\r\n\r\n        this.labels = [];\r\n        \r\n    };\r\n\r\n    function isLeftIntersect(current, other) {\r\n        return current.right >= other.left && current.right <= other.right;\r\n    }\r\n\r\n    function isRightIntersect(current, other) {\r\n        return current.left >= other.left && current.left <= other.right;\r\n    }\r\n\r\n    function isMiddleIntersect(current, other) {\r\n        return current.left <= other.left && current.right >= other.right;\r\n    }\r\n\r\n    function isVerticalIntersect(current, other) {\r\n        return current.top < other.bottom && current.bottom > other.top;\r\n    }\r\n\r\n    function moveLeft(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\r\n    }\r\n\r\n    function moveRight(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\r\n    }\r\n\r\n    function moveDown(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\r\n    }\r\n\r\n\r\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\r\n\r\n        var needToStackLabels = false;\r\n\r\n        for (var i = 0; i < labelsList.length ; i++) {\r\n\r\n            var dynamicLabel = labelsList[i];\r\n            var moved = false;\r\n\r\n            if (staticLabel !== dynamicLabel) {\r\n                var staticRect = staticLabel.getBoundingClientRect();\r\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\r\n\r\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\r\n\r\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\r\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\r\n                        moved = true;\r\n                    }\r\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\r\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\r\n                        moved = true;\r\n                    }\r\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\r\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\r\n                        moved = true;\r\n                    }\r\n\r\n                    if (moved) {\r\n                        var newList = labelsList.slice(0);\r\n                        newList.splice(newList.indexOf(staticLabel), 1);\r\n                        this.labelsOverlapDetection(dynamicLabel, newList);    \r\n                        \r\n                        if (dynamicLabel.causeStacking && staticLabel.causeStacking) {\r\n                            needToStackLabels = true;\r\n                        }\r\n\r\n                        // We don't want that after the labels have been stacked, only one of them will move alone.\r\n                        if (dynamicLabel.causeStacking && this.labelsStacked) {\r\n                            this.stackLabels(this.labels);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return needToStackLabels;\r\n    };\r\n\r\n    proto.stackLabels = function(labels) { \r\n        var topLabel = this.lines.xyz.label;\r\n\r\n        for (var i = 1; i < labels.length; i++) {\r\n            if (labels[i].causeStacking) {\r\n                labels[i].style.left = topLabel.style.left;\r\n            \r\n                var rect = labels[i-1].getBoundingClientRect();\r\n                var space = (labels[i-1] == topLabel) ? _labelsSpace : 0;\r\n                var top = (labels[i] === topLabel) ? topLabel.style.top : labels[i-1].style.top;\r\n                labels[i].style.top = parseInt(top, 10) + rect.height + space + 'px';\r\n            }\r\n            labels[i].style.transform = '';\r\n        }\r\n\r\n        this.labelsStacked = true;\r\n    };\r\n\r\n    proto.drawXYZLine = function(item) {\r\n        var self = this;\r\n\r\n        var p1 = item.p1;\r\n        var p2 = item.p2;\r\n\r\n        if (!p1 || !p2)\r\n            return;\r\n\r\n        var tmpVec = new THREE.Vector3();\r\n        var geometry = item.geometry = new THREE.Geometry();\r\n        var direction = new THREE.Vector3().subVectors(p2, p1).normalize();\r\n        var normal = direction.clone().cross(self.viewer.navigation.getEyeVector()).normalize();\r\n        var point = MeasureCommon.nearestPointInPointToSegment(self.viewer.navigation.getPosition(), p1, p2);\r\n        var scale = self.setScale(point);\r\n\r\n        item.line = this.drawLineSegment(p1, p2, _segmentWidth, item.material);\r\n        item.visible = true;\r\n\r\n        this.segments.push(item);\r\n        \r\n        function drawTip(p) {\r\n            geometry.vertices = [];\r\n\r\n            // Edge\r\n            tmpVec.addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\r\n            geometry.vertices[0] = tmpVec.clone();\r\n            tmpVec.subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\r\n            geometry.vertices[1] = tmpVec.clone();\r\n            var line = self.drawLineAsCylinder(geometry, item.material, _tipWidth, self.overlayName);\r\n            self.setCylinderScale(line, p1 ,p2);\r\n            line.visible = true;\r\n            item.tips.push(line);\r\n        }\r\n\r\n        if (self.showMeasureResult) {\r\n            item.tips = [];\r\n\r\n            drawTip(p1);\r\n            drawTip(p2);    \r\n        }        \r\n    };\r\n\r\n    proto.redrawDashedLine = function() {\r\n        if (!this.dashedLine.p1 || !this.dashedLine.p2)\r\n            return;\r\n\r\n        this.viewer.impl.removeMultipleOverlays(this.overlayName, this.dashedLine.line);\r\n        \r\n        var p1Scale = this.setScale(this.dashedLine.p2);\r\n        var dashSize = _dashSize * p1Scale;\r\n        var gapSize = _gapSize * p1Scale;\r\n        this.dashedLine.line = this.drawDashedLine(this.dashedLine.p2, this.dashedLine.p1, dashSize, gapSize, this.lines.xyz.material, _dashedSegmentWidth, this.overlayName);\r\n\r\n        return this.dashedLine.line;\r\n    }; \r\n\r\n    proto.drawLineSegment = function(p1, p2, width, material, isDashedLine) {\r\n        var line;\r\n\r\n        if (isDashedLine) {\r\n            this.dashedLine.p1 = p1;\r\n            this.dashedLine.p2 = p2;\r\n            line = this.redrawDashedLine();\r\n        } else {\r\n            var geometry = new THREE.Geometry();\r\n            geometry.vertices.push(p1);\r\n            geometry.vertices.push(p2);\r\n            line = this.drawLineAsCylinder(geometry, material, width, this.overlayName);\r\n            this.setCylinderScale(line, p1, p2);\r\n        }\r\n\r\n        line.visible = true;\r\n\r\n        return line;\r\n    };\r\n\r\n    proto.drawSurface = function(points) {\r\n\r\n        const cg = Autodesk.Viewing.Extensions.CompGeom;\r\n\r\n        let cset = new cg.ContourSet();\r\n\r\n        cset.addContour(points);\r\n\r\n        cset.triangulate();\r\n\r\n        if (cset.triangulationFailed)\r\n            return false;\r\n\r\n        let bufferGeometry = cset.toPolygonMesh();\r\n\r\n        var face = new THREE.Mesh(bufferGeometry, this.surfaceColor);\r\n\r\n        this.viewer.impl.addOverlay(this.overlayName, face);\r\n\r\n        return true;\r\n    };\r\n\r\n    proto.drawSegmentAndPush = function(p1, p2, isDashedLine) {\r\n        if (!p1 || !p2) {\r\n            return;\r\n        }\r\n\r\n         var line = this.drawLineSegment(p1, p2, _segmentWidth, this.lines.xyz.material, isDashedLine);\r\n            \r\n        if (!isDashedLine) {\r\n            var item = { line: line, p1: p1, p2: p2 };\r\n            this.segments.push(item);    \r\n        }\r\n    };\r\n\r\n\r\n    proto.renderAreaMeasurementFromPoints = function(pickPositions) {\r\n        let p1, p2;\r\n        let firstPoint;\r\n\r\n        const points = [];\r\n\r\n        const keys = Object.keys(pickPositions);\r\n\r\n        for (var i = 0; i < keys.length - 1; i++) {\r\n            const key = parseFloat(keys[i]);\r\n            const position1 = pickPositions[key];\r\n            const position2 = pickPositions[key+1];\r\n\r\n            if (i === 0) {\r\n                firstPoint = new THREE.Vector3(position1.x, position1.y, position1.z);\r\n            }\r\n\r\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\r\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\r\n\r\n            this.drawSegmentAndPush(p1, p2);\r\n            points.push(p1);\r\n        }\r\n\r\n        if (keys.length > 2) {\r\n            // Draw last line\r\n            this.drawSegmentAndPush(firstPoint, p2, !this.measurement.closedArea);\r\n            \r\n            if(!MeasureCommon.isEqualVectors(firstPoint,p2,MeasureCommon.EPSILON)){\r\n                points.push(p2);\r\n            }\r\n            \r\n            if (this.measurement.area !== 0) {\r\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\r\n                if (this.drawSurface(points)) {\r\n                    this.showAreaLabel(getPolygonVisualCenter(points));\r\n                    this.updateArea();\r\n                }\r\n            }\r\n        }        \r\n    };\r\n\r\n    proto.renderAreaMeasurement = function(picks) {\r\n\r\n        var count = this.measurement.countPicks();\r\n        var p1, p2;\r\n\r\n        var points = [];\r\n        \r\n        for (var i = 1; i < count; i++) {\r\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\r\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\r\n\r\n            this.drawSegmentAndPush(p1, p2);\r\n            points.push(p1);\r\n        }\r\n\r\n        if (count > 2) {\r\n            // Draw last line\r\n            p1 = MeasureCommon.getSnapResultPosition(picks[1], this.viewer);\r\n            this.drawSegmentAndPush(p1, p2, !this.measurement.closedArea);\r\n            \r\n            if(!MeasureCommon.isEqualVectors(p1,p2,MeasureCommon.EPSILON)){\r\n                points.push(p2);\r\n            }\r\n            \r\n            if (this.measurement.area !== 0) {\r\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\r\n                if (this.drawSurface(points)) {\r\n                    this.showAreaLabel(getPolygonVisualCenter(points));\r\n                    this.updateArea();\r\n                }\r\n            }\r\n        }        \r\n    };\r\n\r\n    proto.clearAngleMeshes = function() {\r\n        if (this.angleArc) {\r\n            this.viewer.impl.removeOverlay(this.overlayName, this.angleArc);\r\n            this.angleArc = null;\r\n        }\r\n        if (this.angleOutline.length > 0) {\r\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.angleOutline);\r\n            this.angleOutline.length = 0;\r\n        }\r\n    };\r\n\r\n    proto.drawAngle = function(p, ep1, ep2, n, angle, midPoint) {\r\n\r\n        var smallNum = 0.001;\r\n\r\n        if (!this.materialAngle) {\r\n\r\n            this.materialAngle = new THREE.MeshPhongMaterial({\r\n                    color: 0x999999,\r\n                    ambient: 0x999999,\r\n                    opacity: 0.5,\r\n                    transparent: true,\r\n                    depthTest: false,\r\n                    depthWrite: false,\r\n                    side: THREE.DoubleSide\r\n                }\r\n            );\r\n\r\n            this.materialAngleOutline = new THREE.MeshBasicMaterial({\r\n                color: 0xFF9900,\r\n                depthTest: false,\r\n                depthWrite: false\r\n            });\r\n\r\n        }\r\n\r\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\r\n        this.clearAngleMeshes();\r\n\r\n        // draw arc of angle\r\n        var radius = Math.min(p.distanceTo(ep1), p.distanceTo(ep2)) / 4;\r\n        var segments = 100;\r\n        //angle = angle * Math.PI / 180;\r\n\r\n        var circleGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\r\n        var arc = new THREE.Mesh(circleGeometry, this.surfaceColor);\r\n\r\n        var center = arc.geometry.vertices[0].clone();\r\n        arc.geometry.vertices.push(center);\r\n\r\n\r\n        // Translate and rotate the arc to the plane where it should lie in\r\n        arc.position.set(p.x, p.y, p.z);\r\n        var V = arc.position.clone();\r\n        V.add(n);\r\n        arc.lookAt(V);\r\n        arc.updateMatrixWorld();\r\n\r\n\r\n        // Rotate the arc in the plane to the right place\r\n        var vA = arc.geometry.vertices[1].clone();\r\n        var vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\r\n        vA.applyMatrix4(arc.matrixWorld);\r\n        vB.applyMatrix4(arc.matrixWorld);\r\n\r\n        var v1 = new THREE.Vector3();\r\n        var v2 = new THREE.Vector3();\r\n        var v3 = new THREE.Vector3();\r\n        var v4 = new THREE.Vector3();\r\n        v1.subVectors(vA, p);\r\n        v2.subVectors(vB, p);\r\n        v3.subVectors(ep1, p);\r\n        v4.subVectors(ep2, p);\r\n\r\n        var a13 = v1.angleTo(v3);\r\n        var a14 = v1.angleTo(v4);\r\n        var a23 = v2.angleTo(v3);\r\n        var a24 = v2.angleTo(v4);\r\n\r\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\r\n\r\n        var ra;\r\n        // The arc is in the right place\r\n        if (((a13 <= smallNum && a13 >= -smallNum) || (a14 <= smallNum && a14 >= -smallNum))\r\n            && ((a23 <= smallNum && a23 >= -smallNum) || (a24 <= smallNum && a24 >= -smallNum))) {\r\n\r\n            ra =0;\r\n        }\r\n        // The arc needs to be rotated 180 degree to the right place\r\n        else if (((a13 <= Math.PI + smallNum && a13 >= Math.PI - smallNum) || (a14 <= Math.PI + smallNum && a14 >= Math.PI - smallNum))\r\n            && ((a23 <= Math.PI + smallNum && a23 >= Math.PI - smallNum) || (a24 <= Math.PI + smallNum && a24 >= Math.PI - smallNum))) {\r\n\r\n            ra = Math.PI;\r\n        }\r\n        // The arc needs to be rotated a13 radian\r\n        else if ((a13 <= a23 + smallNum && a13 >= a23 - smallNum) || (a13 <= a24 + smallNum && a13 >= a24 - smallNum)) {\r\n\r\n            ra = a13;\r\n        }\r\n        // The arc needs to be rotated a14 radian\r\n        else {\r\n\r\n            ra = a14;\r\n        }\r\n\r\n        var rotWorldMatrix = new THREE.Matrix4();\r\n        rotWorldMatrix.makeRotationAxis(n, ra);\r\n        //arc.matrix.multiply(rotWorldMatrix);\r\n        rotWorldMatrix.multiply(arc.matrix);\r\n        arc.matrix = rotWorldMatrix;\r\n        arc.rotation.setFromRotationMatrix(arc.matrix);\r\n\r\n        // Check if rotate to the wrong direction, if so, rotate back twice of the degree\r\n        arc.updateMatrixWorld();\r\n        vA = arc.geometry.vertices[1].clone();\r\n        vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\r\n        vA.applyMatrix4(arc.matrixWorld);\r\n        vB.applyMatrix4(arc.matrixWorld);\r\n\r\n        v1.subVectors(vA, p);\r\n        v2.subVectors(vB, p);\r\n\r\n        a13 = v1.angleTo(v3);\r\n        a14 = v1.angleTo(v4);\r\n        a23 = v2.angleTo(v3);\r\n        a24 = v2.angleTo(v4);\r\n\r\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\r\n\r\n        if (a13 >= smallNum && a14 >= smallNum) {\r\n\r\n            rotWorldMatrix = new THREE.Matrix4();\r\n            rotWorldMatrix.makeRotationAxis(n, - ra * 2);\r\n            //arc.matrix.multiply(rotWorldMatrix);\r\n            rotWorldMatrix.multiply(arc.matrix);\r\n            arc.matrix = rotWorldMatrix;\r\n            arc.rotation.setFromRotationMatrix(arc.matrix);\r\n        }\r\n\r\n        // draw outline of the arc\r\n        var outlineGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\r\n        outlineGeometry.vertices.splice(0, 1);\r\n        arc.updateMatrixWorld();\r\n        outlineGeometry.applyMatrix(arc.matrixWorld);\r\n        this.angleOutline = this.drawEdgeAsCylinder(outlineGeometry, this.lines.xyz.material, _angleArcWidth, 0, this.getNewCylinderGeometry());\r\n\r\n        this.angleArc = arc;\r\n        this.viewer.impl.addOverlay(this.overlayName, this.angleArc);\r\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.angleOutline);\r\n\r\n        // This is used for angle label's position\r\n        midPoint.copy(arc.geometry.vertices[Math.round(arc.geometry.vertices.length / 2) - 1]);\r\n        midPoint.applyMatrix4(arc.matrixWorld);\r\n        var dir = new THREE.Vector3();\r\n        dir.subVectors(midPoint, p).normalize();\r\n        dir.multiplyScalar(radius / 2);\r\n        midPoint.add(dir);\r\n    };\r\n\r\n    proto.renderAngleMeasurementFromPoints = function(pickPositions) {\r\n        var p1, p2;\r\n\r\n        var points = [];\r\n        \r\n        const keys = Object.keys(pickPositions);\r\n        for (var i = 0; i < keys.length - 1; i++) {\r\n            const key = parseFloat(keys[i]);\r\n            const position1 = pickPositions[key];\r\n            const position2 = pickPositions[key+1];\r\n\r\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\r\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\r\n\r\n\r\n            this.drawSegmentAndPush(p1, p2);\r\n\r\n            if (p1) {\r\n                points.push(p1);    \r\n            }\r\n        }\r\n\r\n        if (p2) {\r\n            points.push(p2);\r\n        }\r\n        \r\n        if (points.length === 3 && this.measurement.angle) {\r\n            var n = new THREE.Vector3();\r\n            var v1 = new THREE.Vector3();\r\n            var v2 = new THREE.Vector3();\r\n            v1.subVectors(points[0], points[1]);\r\n            v2.subVectors(points[1], points[2]);\r\n            n.crossVectors(v1, v2);\r\n            n.normalize();\r\n\r\n            var midPoint = new THREE.Vector3();\r\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\r\n            this.showAngleLabel(midPoint);\r\n            this.updateAngle();\r\n        }        \r\n    };\r\n\r\n    proto.renderAngleMeasurement = function(picks) {\r\n\r\n        var count = this.measurement.countPicks();\r\n        var p1, p2;\r\n\r\n        var points = [];\r\n        \r\n        for (var i = 1; i < count; i++) {\r\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\r\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\r\n\r\n            this.drawSegmentAndPush(p1, p2);\r\n\r\n            if (p1) {\r\n                points.push(p1);    \r\n            }\r\n        }\r\n\r\n        if (p2) {\r\n            points.push(p2);\r\n        }\r\n        \r\n        if (points.length === 3 && this.measurement.angle) {\r\n            var n = new THREE.Vector3();\r\n            var v1 = new THREE.Vector3();\r\n            var v2 = new THREE.Vector3();\r\n            v1.subVectors(points[0], points[1]);\r\n            v2.subVectors(points[1], points[2]);\r\n            n.crossVectors(v1, v2);\r\n            n.normalize();\r\n\r\n            var midPoint = new THREE.Vector3();\r\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\r\n            this.showAngleLabel(midPoint);\r\n            this.updateAngle();\r\n        }        \r\n    };\r\n\r\n    proto.createDistanceLabel = function(item) {\r\n        var label = item.label = this.createMeasurementLabel();\r\n        \r\n        setVisibilityMeasurementLabelText(label, item === this.lines.xyz);\r\n\r\n        const _document = this.getDocument();\r\n        // Override main label when displaying only an axis label (X, Y or Z)\r\n        if (item.axis) {\r\n            label.className = item.className;\r\n            var axisIcon = _document.createElement('div');\r\n            axisIcon.className = 'measure-label-axis-icon ' + item.iconText;\r\n            axisIcon.innerText = item.iconText;\r\n            label.insertBefore(axisIcon, label.firstChild);\r\n\r\n            if (!av.isMobileDevice()) {\r\n                MeasureCommon.safeToggle(label, 'enableTransition', true);\r\n            }\r\n        }\r\n\r\n        this.viewer.container.appendChild(label);\r\n\r\n        return label;\r\n    };\r\n\r\n    proto.updateLine = function(item, x1, y1, z1, x2, y2, z2, showAxis) {\r\n        var line = item.line,\r\n            label = item.label,\r\n            p1 = new THREE.Vector3(x1, y1, z1),\r\n            p2 = new THREE.Vector3(x2, y2, z2);\r\n\r\n        // Swap points if needed to have consistent axis directions.\r\n        var tmpVec;\r\n        if (item === this.lines.x && p2.x > p1.x) {\r\n            tmpVec = p1.clone();\r\n            p1 = p2.clone();\r\n            p2 = tmpVec.clone();\r\n        } \r\n        else if (item === this.lines.y && p2.y > p1.y) {\r\n            tmpVec = p1.clone();\r\n            p1 = p2.clone();\r\n            p2 = tmpVec.clone();\r\n        } \r\n        else if (item === this.lines.z && p2.z > p1.z) {\r\n            tmpVec = p1.clone();\r\n            p1 = p2.clone();\r\n            p2 = tmpVec.clone();\r\n        }\r\n\r\n        item.line = null;            \r\n\r\n        if (!label) {\r\n            label = this.createDistanceLabel(item);\r\n        }\r\n        else {\r\n            this.hideLabel(label);\r\n        }\r\n        \r\n        if (((this.isLeaflet && item !== this.lines.z) || (p1.distanceTo(p2) >= MeasureCommon.EPSILON)) && showAxis) {\r\n\r\n            item.p1 = p1;\r\n            item.p2 = p2;\r\n\r\n            if (item === this.lines.xyz) {\r\n                this.drawXYZLine(item);\r\n                this.showLabel(label);\r\n                this.updateDistance();\r\n            }\r\n            else {\r\n                line = item.line = this.drawLineSegment(p1, p2, _axisLineWidth, item.material);\r\n                var show = !this.simple && this.showMeasureResult;\r\n\r\n                line.visible = show;\r\n                item.visible = show;\r\n\r\n                if (show) {\r\n                    this.showLabel(label);\r\n                }\r\n                else {\r\n                    this.hideLabel(label);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Draw distance measurement\r\n    proto.renderDistanceMeasurementFromPoints = function(p1, p2) {\r\n\r\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\r\n\r\n        var up = this.viewer.navigation.getAlignedUpVector(),\r\n            x = Math.abs(up.x),\r\n            y = Math.abs(up.y),\r\n            z = Math.abs(up.z);\r\n\r\n        var showAxis = false;\r\n\r\n        if (z > x && z > y) { // z up\r\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\r\n\r\n        } else if (y > x && y > z) { // y up\r\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\r\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\r\n\r\n        } else { // x up - do we ever see this?\r\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\r\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\r\n        }\r\n\r\n    };\r\n\r\n    // Draw distance measurement\r\n    proto.renderDistanceMeasurement = function(p1, p2)\r\n    {\r\n        var self = this;\r\n\r\n        // If the line aligns with one of axis, then don't show axis\r\n        function displayAxis(p1, p2) {\r\n            self.tmpVector.subVectors(p1, p2);\r\n            self.tmpVector.normalize();\r\n\r\n            return !MeasureCommon.isParallel(self.tmpVector, self.xAxis) && !MeasureCommon.isParallel(self.tmpVector, self.yAxis) && !MeasureCommon.isParallel(self.tmpVector, self.zAxis);\r\n        }\r\n\r\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\r\n\r\n        var up = this.viewer.navigation.getAlignedUpVector(),\r\n            x = Math.abs(up.x),\r\n            y = Math.abs(up.y),\r\n            z = Math.abs(up.z);\r\n\r\n        var showAxis = displayAxis(p1, p2);\r\n\r\n        if (z > x && z > y) { // z up\r\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\r\n\r\n        } else if (y > x && y > z) { // y up\r\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\r\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\r\n\r\n        } else { // x up - do we ever see this?\r\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\r\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\r\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\r\n        }\r\n\r\n    };\r\n\r\n    proto.updateResults = function() {\r\n        this.updateDistance();\r\n        this.updateAngle();\r\n        this.updateArea();\r\n        \r\n        setTimeout(function(){\r\n            // This can get called after the viewer is unloaded\r\n            if (this.viewer.impl)\r\n                this.updateLabelsPosition();\r\n        }.bind(this), 0);\r\n    };\r\n\r\n    // Update distance measurement label\r\n    proto.updateDistance = function() {\r\n\r\n        function setWidth(label, value) {\r\n            if (!label) return;\r\n            label.style.width = value;\r\n        }\r\n\r\n        function getWidth(label) {\r\n            return label ? label.clientWidth : 0;\r\n        }\r\n\r\n        Object.keys(this.lines).forEach(function(name) {\r\n            setWidth(this.lines[name].label, '');\r\n        }.bind(this));\r\n        \r\n        setDeltaMeasurementLabelText(this.lines.x.label, \"~ \" + this.measureTool.getDistanceX(this.measurement));\r\n        setDeltaMeasurementLabelText(this.lines.y.label, \"~ \" + this.measureTool.getDistanceY(this.measurement));\r\n        setDeltaMeasurementLabelText(this.lines.z.label, \"~ \" + this.measureTool.getDistanceZ(this.measurement));\r\n        setValueMeasurementLabelText(this.lines.xyz.label, \"~ \" + this.measureTool.getDistanceXYZ(this.measurement));\r\n\r\n        if (this.viewer.model && this.viewer.model.is3d()) {\r\n            setTimeout(function(){\r\n                var maxWidth = Math.max(getWidth(this.lines.x.label), getWidth(this.lines.y.label), getWidth(this.lines.z.label), getWidth(this.lines.xyz.label));                \r\n                Object.keys(this.lines).forEach(function(name) {\r\n                    setWidth(this.lines[name].label, maxWidth + 'px');\r\n                }.bind(this));\r\n            }.bind(this), 0);\r\n        }\r\n    };\r\n\r\n    // Update angle measurement label\r\n    proto.updateAngle = function() {\r\n        setValueMeasurementLabelText(this.angleLabel.label, \"~ \" + this.measureTool.getAngle(this.measurement));\r\n    };\r\n\r\n    // Update area measurement label\r\n    proto.updateArea = function() {\r\n        setValueMeasurementLabelText(this.areaLabel.label, \"~ \" + this.measureTool.getArea(this.measurement));\r\n    };\r\n\r\n    // Set if collapse or expand the xyz delta distance\r\n    proto.setSimple = function(simple) {\r\n        if (this.simple != simple) {\r\n            this.simple = simple;\r\n\r\n            var isVisible = !simple;\r\n            this.setLineVisible(this.lines.x, isVisible);\r\n            this.setLineVisible(this.lines.y, isVisible);\r\n            this.setLineVisible(this.lines.z, isVisible);\r\n\r\n            this.updateLabelsPosition();\r\n\r\n            this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\r\n        }\r\n    };\r\n\r\n    proto.setLineVisible = function(item, isVisible) {\r\n        if (item.line) {\r\n            item.line.visible = isVisible;\r\n            item.visible = isVisible;\r\n\r\n            if (item.label) {\r\n                if (isVisible) {\r\n                    this.showLabel(item.label);\r\n                }\r\n                else {\r\n                    this.hideLabel(item.label);\r\n                    item.label.style.opacity = 0;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.enableLabelsTouchEvents = function(enable) {\r\n        var value = enable ? 'all' : 'none';\r\n\r\n        if (this.lines.xyz.label) {\r\n            this.lines.xyz.label.style.pointerEvents = value;   \r\n        }\r\n\r\n        if (this.angleLabel.label) {\r\n            this.angleLabel.label.style.pointerEvents = value;   \r\n        }\r\n\r\n        if (this.areaLabel.label) {\r\n            this.areaLabel.label.style.pointerEvents = value;\r\n        }\r\n    };\r\n\r\n    proto.setLabelsZIndex = function(zIndex) {\r\n        for (var name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.label) {\r\n                    item.label.style.zIndex = zIndex;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.angleLabel && this.angleLabel.label) {\r\n            this.angleLabel.label.style.zIndex = zIndex;    \r\n        }\r\n\r\n        if (this.areaLabel && this.areaLabel.label) {\r\n            this.areaLabel.label.style.zIndex = zIndex;    \r\n        }\r\n\r\n        for (name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endpoint = this.endpoints[name];\r\n                if (endpoint.label) {\r\n                    endpoint.label.style.zIndex = zIndex - 1;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.focusLabels = function() {\r\n        this.setLabelsZIndex(3);\r\n    };\r\n\r\n    proto.unfocusLabels = function() {\r\n        this.setLabelsZIndex(2);\r\n    };\r\n\r\n    proto.clear = function() {\r\n        var name;\r\n\r\n        for (name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                var endpoint = this.endpoints[name];\r\n                if (endpoint.label) {\r\n                    this.hideLabel(endpoint.label);\r\n                }\r\n            }\r\n        }\r\n\r\n        for (name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.line) {\r\n                    item.line.visible = false;\r\n                    item.visible = false;\r\n\r\n                    item.tips && item.tips.forEach(function(tip) {\r\n                        tip.visible = false;\r\n                    });\r\n                }\r\n                if (item.label) {\r\n                    this.hideLabel(item.label);\r\n                    item.label.style.opacity = 0;\r\n                    item.label.style.zIndex = 2;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.angleLabel && this.angleLabel.label) {\r\n            this.hideLabel(this.angleLabel.label);\r\n        }\r\n\r\n        if (this.areaLabel && this.areaLabel.label) {\r\n            this.hideLabel(this.areaLabel.label);\r\n        }\r\n        \r\n        this.clearSelectionAreas();\r\n\r\n        this.segments = [];\r\n        this.dashedLine = {};\r\n\r\n        this.viewer.impl.clearOverlay(this.overlayName);\r\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\r\n    };\r\n\r\n    proto.hideClick = function(pickNumber) {\r\n\r\n        Indicator.prototype.hideClick.call(this, pickNumber);\r\n\r\n        for (var name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.line) {\r\n                    item.line.visible = false;\r\n                    item.visible = false;\r\n\r\n                    item.tips && item.tips.forEach(function(tip) {\r\n                        tip.visible = false;\r\n                    });\r\n                }\r\n                if (item.label) {\r\n                    this.hideLabel(item.label);\r\n                    item.label.style.opacity = 0;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.angleLabel && this.angleLabel.label) {\r\n            this.hideLabel(this.angleLabel.label);\r\n        }\r\n\r\n        if (this.areaLabel && this.areaLabel.label) {\r\n            this.hideLabel(this.areaLabel.label);\r\n        }\r\n\r\n        this.enableSelectionAreas(item.selectionArea, false);\r\n    };\r\n\r\n    proto.destroy = function() {\r\n        var name;\r\n\r\n        Indicator.prototype.destroy.call(this);\r\n\r\n        for (name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.line) {\r\n                    this.viewer.impl.clearOverlay(self.overlayName);\r\n                    item.material = item.line = item.geometry = null;\r\n                }\r\n\r\n                if (item.label) {\r\n                    if (name === 'xyz') {\r\n                        item.label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                        item.label.removeEventListener('click', this.onSelectionAreaClickedBinded);    \r\n                    }\r\n\r\n                    item.label.parentNode.removeChild(item.label);\r\n                    item.label = null;\r\n                }\r\n                item.material = item.line = item.geometry = item.label = item.p1 = item.p2 = null;\r\n            }\r\n        }\r\n\r\n        this.clearAngleMeshes();\r\n        \r\n        if (this.angleLabel && this.angleLabel.label) {\r\n            this.angleLabel.label.parentNode.removeChild(this.angleLabel.label);\r\n            this.angleLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            this.angleLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\r\n             this.angleLabel.label = this.angleLabel.p1 = this.angleLabel.p2 = null;\r\n        }\r\n\r\n        \r\n\r\n        if (this.areaLabel && this.areaLabel.label) {\r\n            this.areaLabel.label.parentNode.removeChild(this.areaLabel.label);\r\n            this.areaLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            this.areaLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\r\n            this.areaLabel.label = this.areaLabel.p1 = this.areaLabel.p2 = null;\r\n        }\r\n        \r\n        \r\n\r\n        if (this.viewer.impl.overlayScenes[this.overlayName]){\r\n            this.viewer.impl.removeOverlayScene(this.overlayName);\r\n        }\r\n\r\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\r\n    };\r\n\r\n    proto.clearXYZLine = function() {\r\n        this.viewer.impl.removeOverlay(this.overlayName, this.lines.xyz.line);\r\n\r\n        this.lines.xyz.tips && this.lines.xyz.tips.forEach(function(tip) {\r\n            this.viewer.impl.removeOverlay(this.overlayName, tip);\r\n        }.bind(this));\r\n    };\r\n\r\n    // Update scale for vertex, edge, line and extension dash line\r\n    proto.updateScale = function() {\r\n        var name;\r\n\r\n        this.angleOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));\r\n\r\n        for (name in this.lines) {\r\n            if (this.lines.hasOwnProperty(name)) {\r\n                var item = this.lines[name];\r\n                if (item.line && item !== this.lines.xyz) {\r\n                    this.setCylinderScale(item.line, item.p1, item.p2);\r\n                }\r\n            }\r\n        }\r\n        \r\n        for (name in this.segments) {\r\n            if (this.segments.hasOwnProperty(name)) {\r\n                var segment = this.segments[name];\r\n                if (segment.line) {\r\n                    this.setCylinderScale(segment.line, segment.p1, segment.p2);\r\n                } \r\n            }\r\n        }\r\n        \r\n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE) {\r\n            if (this.measurement.isComplete()) {\r\n                this.clearXYZLine();\r\n                this.drawXYZLine(this.lines.xyz);\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.setNoTopology = function(){\r\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\r\n        if (this.lines.xyz.label) {\r\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\r\n            this.lines.xyz.label.classList.remove('fetching-topology');\r\n        }\r\n    };\r\n    proto.setFetchingTopology = function() {\r\n        this.topologyStatus = TOPOLOGY_FETCHING;\r\n        if (this.lines.xyz.label) {\r\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, true, this.topologyStatus);\r\n                this.lines.xyz.label.classList.add('fetching-topology');\r\n        }\r\n    };\r\n    proto.setTopologyAvailable = function() {\r\n        this.topologyStatus = TOPOLOGY_AVAILABLE;\r\n        if (this.lines.xyz.label) {\r\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\r\n            this.lines.xyz.label.classList.remove('fetching-topology');\r\n        }\r\n    };\r\n\r\n    proto.createMeasurementLabel = function() {\r\n      \r\n        const _document = this.getDocument();\r\n\r\n        var label = _document.createElement('div');\r\n        label.className = 'measure-length';\r\n        \r\n        var spinner = _document.createElement('div');\r\n        spinner.className = 'measure-fetching-topology';\r\n        spinner.style.display = 'none';\r\n        label.appendChild(spinner);\r\n\r\n        var text = _document.createElement('div');\r\n        text.className = 'measure-length-text';\r\n        label.appendChild(text);    \r\n\r\n        var delta = _document.createElement('div');\r\n        delta.className = 'measure-delta-text';\r\n        label.appendChild(delta);\r\n\r\n        label.causeStacking = true;\r\n        \r\n        if (!av.isMobileDevice()) {\r\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\r\n        }\r\n\r\n        return label;\r\n    };\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    function setVisibilityMeasurementLabelText(label, isVisible) {\r\n        var div = label.querySelector('.measure-length-text');\r\n        div && (div.style.display = isVisible ? '' : 'none');\r\n    }\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    function setValueMeasurementLabelText(label, strValue) {\r\n        if (!label) return;\r\n        var div = label.querySelector('.measure-length-text');\r\n        div && (div.textContent = strValue);\r\n    }\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    function setDeltaMeasurementLabelText(label, strValue) {\r\n        if (!label) return;\r\n        var div = label.querySelector('.measure-delta-text');\r\n        div && (div.textContent = strValue);\r\n    }\r\n\r\n    // Receives an object created with createMeasurementLabel()\r\n    function setVisibilityMeasurementLabelSpinner(label, isVisible, topologyStatus) {\r\n        if (!label) return;\r\n        var div = label.querySelector('.measure-fetching-topology');\r\n        div && (div.style.display = \r\n            (isVisible && topologyStatus === TOPOLOGY_FETCHING) ? 'inline-block' : 'none');\r\n    }\r\n\r\n    /**\r\n     * Helper function that creates the label used for (1) and (2),\r\n     * which are the 2 mouse clicks for the measurement.\r\n     */\r\n    proto.createSnapResultLabel = function(pointNumber) {\r\n        const _document = this.getDocument();\r\n\r\n        var label = _document.createElement('div');\r\n        label.className = 'measure-label';\r\n\r\n        var label_icon = _document.createElement('div');\r\n        label_icon.className = 'measure-label-icon';\r\n        label.appendChild(label_icon);\r\n\r\n        if (av.isTouchDevice()) {\r\n            this.initLabelMobileGestures(label, pointNumber, this.measureTool);\r\n            var hitArea = _document.createElement('div');\r\n            hitArea.className = 'measure-label-hit-area';\r\n            label.appendChild(hitArea);                      \r\n        } \r\n         \r\n        if (!av.isMobileDevice()) {\r\n            this.initMouseEvent(label, pointNumber);\r\n\r\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            MeasureCommon.safeToggle(label, 'enable-hover', true);  \r\n        }\r\n        \r\n \r\n        label.causeStacking = false;\r\n        \r\n        return label;\r\n    };\r\n\r\n    proto.showAngleLabel = function(midPoint) {\r\n\r\n            var label = this.angleLabel.label;\r\n\r\n            if (!label) {\r\n                label = this.angleLabel.label = this.createMeasurementLabel();\r\n                this.viewer.container.appendChild(label);\r\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\r\n            }\r\n\r\n            this.updateAngle();\r\n            this.showLabel(label);\r\n\r\n            this.angleLabel.p1 = midPoint.clone();\r\n            this.angleLabel.p2 = midPoint.clone();\r\n\r\n    };\r\n\r\n    proto.showAreaLabel = function(midPoint) {\r\n\r\n            var label = this.areaLabel.label;\r\n\r\n            if (!label) {\r\n                label = this.areaLabel.label = this.createMeasurementLabel();\r\n                this.viewer.container.appendChild(label);\r\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\r\n            }\r\n\r\n            this.updateArea();\r\n            this.showLabel(label);\r\n\r\n            this.areaLabel.p1 = midPoint;\r\n            this.areaLabel.p2 = midPoint;\r\n\r\n    };\r\n\r\n    proto.onSelectionAreaClicked = function() {\r\n        this.measureTool.selectMeasurementById(this.measurement.id);\r\n    };\r\n\r\n    proto.createSelectionArea = function() {\r\n        const _document = this.getDocument();\r\n        var selectionArea = _document.createElement('div');\r\n        selectionArea.id = 'measurement-selection-area-' + this.measurement.id;\r\n        this.viewer.container.appendChild(selectionArea);\r\n        selectionArea.className = 'measure-selection-area';\r\n        selectionArea.style.display = 'none';\r\n        selectionArea.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n        selectionArea.addEventListener('click', this.onSelectionAreaClickedBinded);\r\n        return selectionArea;\r\n    };\r\n\r\n    proto.updateSelectionArea = function() {\r\n\r\n        this.segments.forEach(function(item) \r\n        {\r\n            if (item.p1 && item.p2) {\r\n                var p1 = MeasureCommon.project(item.p1, this.viewer);\r\n                var p2 = MeasureCommon.project(item.p2, this.viewer);\r\n\r\n                if (!item.selectionArea) {\r\n                    item.selectionArea = this.createSelectionArea();\r\n                }\r\n\r\n                var selectionArea = item.selectionArea;\r\n\r\n                var v = new THREE.Vector2();\r\n\r\n                selectionArea.style.top = (p1.y - (_selectorAreaSize / 2)) + 'px';\r\n                selectionArea.style.left = p1.x  + 'px';\r\n                selectionArea.style.width = v.subVectors(p1, p2).length() + 'px';\r\n                selectionArea.style.height = _selectorAreaSize + 'px';\r\n\r\n                var angle = null;\r\n                var deltaX = p1.x - p2.x;\r\n                var deltaY = p1.y - p2.y;\r\n\r\n                angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \r\n\r\n                selectionArea.style.transform = 'rotate('+ angle +'deg)';\r\n                selectionArea.style.transformOrigin = '0px ' + (_selectorAreaSize / 2) + 'px';\r\n            }\r\n        }.bind(this));\r\n\r\n        if (this.measureTool.areAllPicksSet()) {\r\n            this.enableSelectionAreas(true);    \r\n        }\r\n    };\r\n\r\n    proto.clearSelectionAreas = function() {\r\n        const _document = this.getDocument();\r\n        this.segments.forEach(function(item) \r\n        {  \r\n            if (item.selectionArea) {\r\n                item.selectionArea.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n                item.selectionArea.removeEventListener('click', this.onSelectionAreaClickedBinded);\r\n                var element = _document.getElementById('measurement-selection-area-' + this.measurement.id);\r\n                if (element) {\r\n                    element.parentNode.removeChild(element);\r\n                }\r\n                item.selectionArea = null;\r\n            }\r\n        }.bind(this));\r\n    };\r\n\r\n    proto.enableSelectionAreas = function(enable) {\r\n        this.segments.forEach(function(item) \r\n        {   \r\n            if (item.selectionArea) {\r\n                if (enable) {\r\n                    item.selectionArea.style.display = 'block';\r\n                } \r\n                else {\r\n                    item.selectionArea.style.display = 'none';\r\n                }\r\n            }\r\n        }.bind(this));\r\n    };\r\n\r\n    proto.render = function(picks, showMeasureResult) {\r\n        Indicator.prototype.render.call(this, picks, showMeasureResult);\r\n\r\n        this.updateSelectionArea();\r\n    };\r\n\r\n    proto.renderFromPoints = function(points, showMeasureResult) {\r\n        Indicator.prototype.renderFromPoints.call(this, points, showMeasureResult);\r\n\r\n        this.updateSelectionArea();\r\n    }\r\n\r\n    proto.onCameraChange = function() {\r\n        this.redrawDashedLine();\r\n        this.updateSelectionArea();\r\n        this.hideLabelsOutsideOfView();\r\n        this.updateLabelsPosition();\r\n    };\r\n\r\n    proto.handleResize = function() {\r\n        this.redrawDashedLine();\r\n        this.updateSelectionArea();\r\n        this.updateLabelsPosition();\r\n    };\r\n\r\n","import { MeasurementsManager } from './MeasurementsManager'\r\nimport { MeasureToolIndicator } from './MeasureToolIndicator'\r\n\r\nconst av = Autodesk.Viewing;\r\n\r\n//\r\n// /** @constructor */\r\n//\r\n//\r\nexport function MeasureTool( viewer, options, sharedMeasureConfig, snapper )\r\n{\r\n    var _viewer  = viewer;\r\n    var _options = options || {};\r\n    var _names  = [\"measure\"];\r\n    var _priority = 50;\r\n\r\n    this.setGlobalManager(viewer.globalManager);\r\n\r\n    // Shared State with CalibrationTool and Indicator\r\n    var _sharedMeasureConfig = sharedMeasureConfig;\r\n\r\n    var av = Autodesk.Viewing;\r\n    var avem = Autodesk.Viewing.Extensions.Measure;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n    \r\n    // Not shared with Indicator.js\r\n    var _active = false;\r\n    var _isDragging = false;\r\n    var _endpointMoved = false;\r\n    var _activePoint = 0;\r\n    var _consumeSingleClick = false;\r\n    var _singleClickHandled = false;\r\n    var _downX = null;\r\n    var _downY = null;\r\n    var _isolateMeasure = false;\r\n\r\n    var _measurementsManager = new MeasurementsManager(_viewer);\r\n    var _currentMeasurement = null;\r\n    var _onIndicatorCreatedCB = null;\r\n    \r\n    var _cursor = \"url(data:image/png;base64,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), auto\";\r\n\r\n    // Snapper\r\n    var _snapper = snapper;\r\n    \r\n    var _isPressing = false;\r\n\r\n    var _picksBackup = [];\r\n    var _cursorPosition = null;\r\n\r\n    var _closeAreaSnapRange = 25;\r\n    var _preMeasureState = null;\r\n\r\n    var _measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\r\n\r\n    var _sessionMeasurements = null;\r\n\r\n    function getActivePick()\r\n    {   \r\n        if(!_currentMeasurement)\r\n            return null;\r\n\r\n        var index;\r\n\r\n        if (_activePoint === 0) {\r\n            return null;\r\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\r\n            index = _currentMeasurement.countPicks();\r\n        } else {\r\n               index = _activePoint;\r\n        }\r\n\r\n        return _currentMeasurement.getPick(index);\r\n    }\r\n\r\n    function getPreviousPick()\r\n    {\r\n        if(!_currentMeasurement)\r\n            return null;\r\n\r\n        var index;\r\n\r\n        if (_activePoint === 0) {\r\n            return null;\r\n        } else if (_activePoint === 1) {\r\n            index = _currentMeasurement.countPicks();\r\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\r\n            index = _currentMeasurement.countPicks() - 1;\r\n        } else {\r\n            index = _activePoint - 1;\r\n        }\r\n        \r\n        return _currentMeasurement.getPick(index);\r\n    }\r\n\r\n    function hasPreviousPick()\r\n    {\r\n        if(!_currentMeasurement)\r\n            return false;\r\n\r\n        var index;\r\n\r\n        if (_activePoint === 0) {\r\n            return false;\r\n        } else if (_activePoint === 1) {\r\n            index = _currentMeasurement.countPicks();\r\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\r\n            index = _currentMeasurement.countPicks() - 1;\r\n        } else {\r\n            index = _activePoint - 1;\r\n        }\r\n        \r\n        return _currentMeasurement.hasPick(index);\r\n    }\r\n\r\n    function noPicksSet() {\r\n        _activePoint = 0;\r\n    }\r\n\r\n    function allPicksSet() {\r\n        _activePoint = _currentMeasurement.countPicks() + 1;\r\n        enableMeasurementsTouchEvents(true);\r\n        _currentMeasurement.indicator.enableSelectionAreas(true);\r\n    }\r\n\r\n    function isNoPicksSet() {\r\n        return _activePoint === 0 || !_currentMeasurement;\r\n    }\r\n\r\n    this.areAllPicksSet = function() {\r\n        return _currentMeasurement && (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1);\r\n    };\r\n\r\n    this.setSessionMeasurements = function(measurementList) {\r\n        // Store the clone of the measurementList\r\n        _sessionMeasurements = JSON.parse(JSON.stringify(measurementList));\r\n    };\r\n\r\n    this.getSessionMeasurements = function() {\r\n        return JSON.parse(JSON.stringify(_sessionMeasurements));\r\n    };\r\n\r\n    this.register = function()\r\n    {\r\n\r\n    };\r\n\r\n    this.deregister = function()\r\n    {\r\n        this.deactivate();\r\n    };\r\n\r\n    this.isActive = function()\r\n    {\r\n        return _active;\r\n    };\r\n\r\n    this.getNames = function()\r\n    {\r\n        return _names;\r\n    };\r\n\r\n    this.getName = function()\r\n    {\r\n        return _names[0];\r\n    };\r\n\r\n    this.getPriority = function()\r\n    {\r\n        return _priority;\r\n    };\r\n\r\n    this.getCursor = function() {\r\n        return _isDragging ? null : _cursor;\r\n    };\r\n\r\n    this.getCurrentMeasurementRaw = function() {\r\n        return _currentMeasurement;\r\n    };\r\n\r\n    this.getActivePointIndex = function() {\r\n        return _activePoint;\r\n    };\r\n\r\n    this.getMeasurementsManager = function() {\r\n        return _measurementsManager;\r\n    }\r\n\r\n\r\n    this.startNewMeasurement = function() {\r\n        _currentMeasurement = _measurementsManager.createMeasurement(_measurementType);\r\n        _currentMeasurement.attachIndicator(_viewer, this, MeasureToolIndicator);\r\n\r\n        if (_onIndicatorCreatedCB instanceof Function) {\r\n            _onIndicatorCreatedCB();\r\n            _onIndicatorCreatedCB = null;\r\n        }\r\n\r\n        enableMeasurementsTouchEvents(false);\r\n    };\r\n\r\n    this.changeMeasurementType = function(type) {\r\n        _measurementType = type;\r\n    };\r\n\r\n    this.activate = function()\r\n    {\r\n        _active = true;\r\n        _measurementsManager.init();\r\n\r\n        noPicksSet();\r\n        _isDragging = false;\r\n        this.isEditingEndpoint = false;\r\n        this.editByDrag = false;\r\n\r\n        _viewer.impl.pauseHighlight(true);\r\n\r\n        _viewer.clearSelection();\r\n        _preMeasureState = _viewer.getState({objectSet: true});\r\n        \r\n        _viewer.toolController.activateTool(\"snapper\");\r\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\r\n \r\n       this.onMeasurementChangedBinded = this.onMeasurementChanged.bind(this);\r\n       _viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\r\n       _viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\r\n       _viewer.addEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\r\n\r\n       // Set the stored session measurements only if the preference is enabled\r\n       const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\r\n       if (restoreSessionMeasurements) {\r\n           const sessionMeasurements = this.getSessionMeasurements();\r\n           this.setMeasurements(sessionMeasurements);\r\n       }\r\n    };\r\n\r\n    this.deactivate = function()\r\n    {\r\n        if (!_active)\r\n            return;\r\n\r\n        // Store the session measurements only if the preference is enabled\r\n        const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\r\n        if (restoreSessionMeasurements) {\r\n            const measurementList = this.getMeasurementList();\r\n            this.setSessionMeasurements(measurementList);\r\n        }\r\n\r\n        _active = false;\r\n        \r\n        this.clearIsolate(); // restore initial isolation\r\n        _preMeasureState = null;\r\n\r\n        while (Object.keys(_measurementsManager.measurementsList).length > 0) {\r\n            _currentMeasurement = _measurementsManager.measurementsList[Object.keys(_measurementsManager.measurementsList)[0]];\r\n            _measurementsManager.changeCurrentMeasurement(_currentMeasurement);\r\n            this.clearCurrentMeasurement();\r\n            _currentMeasurement = null;\r\n        }\r\n\r\n        if(_snapper && _snapper.isActive()) {\r\n            _viewer.toolController.deactivateTool(\"snapper\");\r\n        }\r\n\r\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\r\n\r\n        _viewer.impl.pauseHighlight(false);\r\n\r\n        _measurementsManager.destroy();\r\n        _viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\r\n        _viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\r\n        _viewer.removeEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\r\n    };\r\n\r\n    this.update = function()\r\n    {\r\n        return false;\r\n    };\r\n\r\n    this.getUnits = function() {\r\n        return _sharedMeasureConfig.units;\r\n    };\r\n\r\n    this.setUnits = function( units )\r\n    {\r\n        if (_sharedMeasureConfig.units !== units ) {\r\n            _sharedMeasureConfig.units = units;\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.DISPLAY_UNITS_CHANGED, units: units});\r\n\r\n            for (var key in _measurementsManager.measurementsList) {\r\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                    // Update UI\r\n                    var measurement = _measurementsManager.measurementsList[key];\r\n                    if (measurement.indicator) {\r\n                        measurement.indicator.updateResults();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    this.getPrecision = function() {\r\n        return _sharedMeasureConfig.precision;\r\n    };\r\n\r\n    this.setPrecision = function( precision ) {\r\n\r\n        if (_sharedMeasureConfig.precision !== precision ) {\r\n            _sharedMeasureConfig.precision = precision;\r\n\r\n            for (var key in _measurementsManager.measurementsList) {\r\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                    // Update UI\r\n                    var measurement = _measurementsManager.measurementsList[key];\r\n                    if (measurement.indicator) {\r\n                        measurement.indicator.updateResults();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Prepare the measurement snap result information into a serializable object.\r\n     * @param {*} measurement \r\n     */\r\n    function getPickData(measurement) {\r\n        measurement = measurement || _currentMeasurement;\r\n        const picks = measurement.clonePicks();\r\n        const picksData = [];\r\n        for (let i = 0; i < picks.length; i++) {\r\n            const pick = picks[i];\r\n\r\n            let pickPoint = MeasureCommon.getSnapResultPosition(pick, _viewer);\r\n            const model = pick.hasOwnProperty('modelId') && pick.modelId ? _viewer.impl.findModel(pick.modelId) : _viewer.model;\r\n            if (model) {\r\n                const modelData = model.getData();\r\n                pickPoint = modelData && modelData.hasOwnProperty('globalOffset') ? pickPoint.clone().sub(modelData.globalOffset) : pickPoint.clone();\r\n            }\r\n\r\n            const pickData = {\r\n                intersection: JSON.parse(JSON.stringify(pickPoint)),\r\n                modelId: pick.modelId,\r\n                viewportIndex2d: pick.viewportIndex2d\r\n            };\r\n            picksData.push(pickData);\r\n        }\r\n\r\n        return picksData;\r\n    };\r\n\r\n    this.getDistanceXYZ = function(measurement) {\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        return this.getDistanceAux(measurement.distanceXYZ);\r\n    };\r\n    this.getDistanceX = function(measurement) {\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        return this.getDistanceAux(measurement.distanceX);\r\n    };\r\n    this.getDistanceY = function(measurement) {\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        return this.getDistanceAux(measurement.distanceY);\r\n    };\r\n    this.getDistanceZ = function(measurement) {\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        return this.getDistanceAux(measurement.distanceZ);\r\n    };\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    this.getDistanceAux = function (measurementDistance) {\r\n\r\n        if (_viewer.model) {\r\n            var d = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurementDistance || 0);\r\n            return Autodesk.Viewing.Private.formatValueWithUnits(d, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\r\n        }\r\n    };\r\n\r\n    this.getAngle = function(measurement) {\r\n\r\n        if (!measurement) {\r\n            measurement = _currentMeasurement;\r\n        }\r\n        var angle = measurement.angle;\r\n        return Autodesk.Viewing.Private.formatValueWithUnits(angle, String.fromCharCode(0xb0), 3, _sharedMeasureConfig.precision);\r\n    };\r\n\r\n    this.getArea = function(measurement) { \r\n\r\n        if (_viewer.model) {\r\n\r\n            if (!measurement) {\r\n                measurement = _currentMeasurement;\r\n            }\r\n\r\n            var area = Autodesk.Viewing.Private.convertUnits(viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurement.area, 'square');\r\n\r\n            if (_sharedMeasureConfig.units) {\r\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, _sharedMeasureConfig.units+'^2', 3, _sharedMeasureConfig.precision);\r\n            }\r\n            else {\r\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, null, 3, _sharedMeasureConfig.precision);\r\n            }\r\n        }\r\n    };\r\n\r\n    function snapToFirstPick(currentPick, forceSnap) {\r\n        if (_currentMeasurement.hasPick(1) && _activePoint > 3 && !_currentMeasurement.closedArea) {\r\n            var firstPick = _currentMeasurement.getPick(1);\r\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\r\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\r\n            var currentPickPoint = MeasureCommon.getSnapResultPosition(currentPick, _viewer);\r\n            var currentPickPosition = MeasureCommon.project(currentPickPoint, viewer);\r\n            \r\n            if (forceSnap || currentPickPosition.distanceTo(firstPickPosition) < _closeAreaSnapRange) {\r\n                _snapper.onMouseMove(firstPickPosition);\r\n                firstPick.copyTo(currentPick);\r\n            }\r\n        }\r\n    }\r\n\r\n    function render(showResult) {\r\n\r\n        var hasResult = _currentMeasurement.computeResult(_currentMeasurement.picks, _viewer, _snapper);\r\n        _currentMeasurement.indicator.render(_currentMeasurement.picks, _consumeSingleClick || !!showResult);\r\n\r\n        return hasResult;\r\n    }\r\n\r\n    /**\r\n     * Sets existing measurements from the passed in measurement list. Reference getMeasurementList.\r\n     * \r\n     * @param {Object[]} measurementList - measurements to set.\r\n     */\r\n    this.setMeasurements = function(measurementList) {\r\n        if (!measurementList) return; // Only set the a measurementList is passed in.\r\n        measurementList = !Array.isArray(measurementList) ? [measurementList] : measurementList;\r\n\r\n        if (measurementList.length === 0) return;\r\n\r\n        function getMeasureType(measureData) {\r\n            let measurementType;\r\n            switch (measureData.type) {\r\n                case 'Distance':\r\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\r\n                    break;\r\n                case 'Angle':\r\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE;\r\n                    break;\r\n                case 'Area':\r\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_AREA;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n            return measurementType;\r\n        }\r\n\r\n        // Restore the supplied measurementList.\r\n        for (let i = 0; i < measurementList.length; i++) {\r\n            const measureData = measurementList[i];\r\n\r\n            const unitType = measureData.unitType;\r\n            const precision = measureData.precision;\r\n            const measurementType = getMeasureType(measureData);\r\n            if (!measurementType) continue;\r\n\r\n            this.setUnits(unitType);\r\n            this.setPrecision(precision);\r\n\r\n            const attachIndicatorCb = (measurement) => {\r\n                _currentMeasurement = measurement; // _currentMeasurement needs to be set for the onMeasurementChanged to work\r\n                measurement.attachIndicator(_viewer, this, MeasureToolIndicator);\r\n\r\n                if (_onIndicatorCreatedCB instanceof Function) {\r\n                    _onIndicatorCreatedCB();\r\n                    _onIndicatorCreatedCB = null;\r\n                }\r\n\r\n                enableMeasurementsTouchEvents(false);\r\n            };\r\n\r\n            const initPicksCb = () => {\r\n                const restoredMeasurements = _measurementsManager.getRestoredMeasurementData();\r\n                const points = restoredMeasurements[_currentMeasurement.id];\r\n                _activePoint = points.length;\r\n            };\r\n\r\n            measureData.sharedUnits = _sharedMeasureConfig.units;\r\n            measureData.sharedCalibrationFactor = _sharedMeasureConfig.calibrationFactor;\r\n\r\n            _measurementsManager.createMeasurementFromData(\r\n                measureData,\r\n                measurementType,\r\n                attachIndicatorCb,\r\n                initPicksCb\r\n            );\r\n        }\r\n\r\n        this.deselectAllMeasurements();\r\n    };\r\n\r\n    function getMeasurementType(measurement) {\r\n        measurement = measurement || _currentMeasurement;\r\n        const types = MeasureCommon.MeasurementTypes;\r\n        const type = measurement.measurementType;\r\n        switch (type) {\r\n            case types.MEASUREMENT_DISTANCE:\r\n                return 'Distance';\r\n            case types.MEASUREMENT_ANGLE:\r\n                return 'Angle';\r\n            case types.MEASUREMENT_AREA:\r\n                return 'Area';\r\n            case types.CALIBRATION:\r\n                return 'Calibration';\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * TODO: We need to flesh out the return value here.\r\n     *\r\n     * @param unitType\r\n     * @param precision\r\n     * @returns {Object}\r\n     */\r\n    this.getMeasurement = function(unitType, precision) {\r\n\r\n        _sharedMeasureConfig.units = unitType || _sharedMeasureConfig.units;\r\n        _sharedMeasureConfig.precision = precision || _sharedMeasureConfig.precision;\r\n\r\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\r\n        var picks = getPickData();\r\n        var type = getMeasurementType();\r\n        var measurement = {\r\n            from: geomTypes[_currentMeasurement.getGeometry(1).type],\r\n            to: geomTypes[_currentMeasurement.getGeometry(2).type],\r\n            distance: this.getDistanceXYZ(),\r\n            deltaX: this.getDistanceX(),\r\n            deltaY: this.getDistanceY(),\r\n            deltaZ: this.getDistanceZ(),\r\n            angle: this.getAngle(),\r\n            area: this.getArea(),\r\n            unitType: _sharedMeasureConfig.units,\r\n            precision: _sharedMeasureConfig.precision,\r\n            picks,\r\n            type\r\n        };\r\n\r\n        return measurement;\r\n    };\r\n\r\n    /**\r\n     * @returns {SnapResult[]} list of points for the selected measurement.\r\n     */\r\n    this.getMeasurementPoints = function() {\r\n\r\n        return _currentMeasurement.clonePicks();\r\n    };\r\n\r\n    /**\r\n     * @param unitType\r\n     * @param precision\r\n     * @returns {Array.<Object>}\r\n     */\r\n\r\n    this.getMeasurementList = function(unitType, precision) {\r\n        var list = [];\r\n        var measurement = null;\r\n        // TODO: These need to match the measurement SnapTypes\r\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\r\n        var measurementList = Object.keys(_measurementsManager.measurementsList);\r\n\r\n        for(let i = 0; i < measurementList.length; i++) {\r\n            measurement = _measurementsManager.measurementsList[measurementList[i]];\r\n            var picks = getPickData(measurement);\r\n            var type = getMeasurementType(measurement);\r\n            var result = {\r\n              from: geomTypes[measurement.getGeometry(1).type],\r\n              to: geomTypes[measurement.getGeometry(2).type],\r\n              distance: this.getDistanceXYZ(measurement),\r\n              deltaX: this.getDistanceX(measurement),\r\n              deltaY: this.getDistanceY(measurement),\r\n              deltaZ: this.getDistanceZ(measurement),\r\n              angle: this.getAngle(measurement),\r\n              area: this.getArea(measurement),\r\n              unitType: unitType || _sharedMeasureConfig.units,\r\n              precision: precision || _sharedMeasureConfig.precision,\r\n              picks,\r\n              type\r\n            }\r\n            list.push(result);\r\n        }\r\n        return list;\r\n    };\r\n\r\n    this.clearCurrentMeasurement = function() {\r\n        if (_currentMeasurement) {\r\n            noPicksSet();\r\n\r\n            for (var key in _currentMeasurement.picks) {\r\n                if (_currentMeasurement.picks.hasOwnProperty(key)) {\r\n                    this.clearPick(key);    \r\n                }\r\n            }\r\n            \r\n            this.updateViewportId(true);\r\n\r\n            if (_isolateMeasure) {\r\n                this.clearIsolate();    \r\n            }\r\n\r\n            _currentMeasurement.indicator.clear();\r\n            _currentMeasurement.indicator.destroy();\r\n            _currentMeasurement = _measurementsManager.removeCurrentMeasurement();\r\n            _currentMeasurement = null;\r\n        }\r\n\r\n        enableMeasurementsTouchEvents(true);\r\n    };\r\n\r\n    this.clearPick = function(pickNumber) {\r\n        if (_currentMeasurement && _currentMeasurement.hasPick(pickNumber)) {\r\n            _currentMeasurement.clearPick(pickNumber);\r\n            _currentMeasurement.indicator.hideClick(pickNumber);\r\n        }\r\n    };\r\n\r\n    this.setIsolateMeasure = function(enable) {\r\n        _isolateMeasure = enable;\r\n    };\r\n\r\n    this.isolateMeasurement = function () {\r\n\r\n        if (!_active || !_isolateMeasure) {\r\n            return;\r\n        }\r\n\r\n        var defaultModelId = _viewer.model.id;\r\n        var isolationGroups = {};\r\n\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                for (var key in measurement.picks) {\r\n                    if (measurement.picks.hasOwnProperty(key)) {\r\n                        var pick = measurement.getPick(key);\r\n\r\n                        var modelId = pick.modelId || defaultModelId;\r\n                        if (!Array.isArray(isolationGroups[modelId])) {\r\n                            isolationGroups[modelId] = [];\r\n                        }\r\n                        if (isolationGroups[modelId].indexOf(pick.snapNode) == -1) {\r\n                            isolationGroups[modelId].push(pick.snapNode);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    \r\n\r\n        // convert to expected format\r\n        var isolationSet = [];\r\n        for (var modelId in isolationGroups) {\r\n            if (isolationGroups.hasOwnProperty(modelId)) {\r\n\r\n                var modelInstance = _viewer.impl.findModel(parseInt(modelId));\r\n                isolationSet.push({\r\n                    model: modelInstance,\r\n                    ids: isolationGroups[modelId]\r\n                });\r\n            }\r\n        }\r\n\r\n        if (isolationSet.length) {\r\n            _viewer.impl.visibilityManager.aggregateIsolate(isolationSet);\r\n        }\r\n    };\r\n\r\n    // It actually restores the isolation state to the one just before\r\n    // the measure tool was enabled...\r\n    this.clearIsolate = function() {\r\n        if (_preMeasureState) {\r\n            _viewer.restoreState(_preMeasureState, undefined, true);\r\n        }\r\n    };\r\n\r\n    this.onShowAllEvent = function (event) {\r\n        _preMeasureState = null;\r\n    };\r\n\r\n    this.deselectAllMeasurements = function() {\r\n        if (_currentMeasurement && !this.areAllPicksSet()) {\r\n            if (this.isEditingEndpoint) {\r\n                this.undoEditEndpoint();\r\n            }\r\n            else {\r\n                this.clearCurrentMeasurement();\r\n            }\r\n        }\r\n\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                if (measurement.indicator) {\r\n                    measurement.indicator.setSimple(true);        \r\n                    measurement.indicator.hideEndpoints();\r\n                    measurement.indicator.unfocusLabels();\r\n                }\r\n            }\r\n        }\r\n\r\n        _currentMeasurement = null;\r\n    };\r\n\r\n    this.onMeasurementChanged = function() {\r\n        \r\n        this.deselectAllMeasurements();\r\n\r\n        _currentMeasurement = _measurementsManager.getCurrentMeasurement();\r\n        \r\n        if (_currentMeasurement.isComplete()) {\r\n            _currentMeasurement.indicator.setSimple(false);        \r\n            allPicksSet();\r\n            render(true); \r\n            this.updateResults();\r\n        }\r\n    };\r\n\r\n    this.selectMeasurementById = function(measurementId) {\r\n        if (!_currentMeasurement) {\r\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\r\n        }\r\n\r\n        if (_currentMeasurement.id !== measurementId) {\r\n            if (!this.areAllPicksSet()) {\r\n                if (this.isEditingEndpoint) {\r\n                    this.undoEditEndpoint();\r\n                }\r\n                else {\r\n                    this.clearCurrentMeasurement();\r\n                }\r\n            }\r\n            \r\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\r\n        }\r\n    };\r\n\r\n    function enableMeasurementsTouchEvents(enable) {\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                measurement.indicator.changeAllEndpointsEditableStyle(enable);   \r\n                measurement.indicator.enableSelectionAreas(enable);\r\n                measurement.indicator.enableLabelsTouchEvents(enable);\r\n            }\r\n        }\r\n    }\r\n\r\n    this.editEndpoint = function(event, endpointNumber, measurementId) {\r\n        if (_currentMeasurement.id === measurementId && _activePoint === endpointNumber) {\r\n            _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\r\n            this.undoEditEndpoint();\r\n            return;\r\n        }\r\n\r\n        this.selectMeasurementById(measurementId);\r\n\r\n        _activePoint = endpointNumber;\r\n        this.isEditingEndpoint = true;\r\n\r\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\r\n        enableMeasurementsTouchEvents(false);\r\n\r\n        for (var key in _currentMeasurement.picks) {\r\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\r\n                _picksBackup[key] = _currentMeasurement.getPick(key).clone();\r\n            }\r\n        }\r\n\r\n        this.updateViewportId();\r\n\r\n        if (_isolateMeasure) {\r\n            this.clearIsolate();    \r\n        }\r\n\r\n        if (_currentMeasurement.isRestored) {\r\n            // populate the existing picks with the new snap result from the snapper\r\n            _snapper.onMouseMove({x: event.canvasX, y: event.canvasY});\r\n            const snapResult = _snapper.getSnapResult().clone();\r\n            const pick = _currentMeasurement.getPick(_activePoint);\r\n            snapResult.copyTo(pick);\r\n\r\n            // Keep track of the pick that was updated.\r\n            pick.isValid = true;\r\n\r\n            // Set isRestored flag back to false if all of the picks have been validated\r\n            _currentMeasurement.isRestored = !function() {\r\n                const picks = _currentMeasurement.picks;\r\n                for (var key in picks) {\r\n                    if (picks.hasOwnProperty(key)) {\r\n                        const pick = picks[key];\r\n                        if (!pick.isValid) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n                return true;\r\n            }();\r\n        }\r\n\r\n        if(!av.isMobileDevice()) {\r\n            this._handleMouseEvent(event);\r\n        }\r\n    };\r\n\r\n    function canCloseArea() {\r\n        return _currentMeasurement.countPicks() > 3;\r\n    }\r\n\r\n    this.undoEditEndpoint = function() {\r\n        _currentMeasurement.indicator.clear();\r\n\r\n        for (var key in _currentMeasurement.picks) {\r\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\r\n                _currentMeasurement.setPick(key, _picksBackup[key].clone());\r\n            }\r\n        }\r\n        \r\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\r\n        \r\n        this.isEditingEndpoint = false;\r\n        this.updateViewportId(true);\r\n        allPicksSet();\r\n        render(true);\r\n    };\r\n\r\n    this.updateResults = function() {\r\n\r\n        _currentMeasurement.indicator.updateResults();\r\n        _currentMeasurement.indicator.showEndpoints();\r\n        _currentMeasurement.indicator.focusLabels();\r\n\r\n        if (_currentMeasurement.isComplete()) {\r\n            this.isolateMeasurement();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Delete all measurements.\r\n     */\r\n    this.deleteMeasurements = function() {\r\n        const measurements = _measurementsManager.measurementsList;\r\n        const keys = Object.keys(measurements);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            const key = keys[i];\r\n            _measurementsManager.currentMeasurement = measurements[key];\r\n            _currentMeasurement = _measurementsManager.getCurrentMeasurement();\r\n            this.deleteCurrentMeasurement();\r\n        }\r\n    }\r\n\r\n    this.deleteCurrentMeasurement = function() {\r\n        this.clearCurrentMeasurement();\r\n        this.isEditingEndpoint = false;\r\n        this.editByDrag = false;\r\n        _isDragging = false;\r\n        this.isolateMeasurement();\r\n    };\r\n\r\n    this.deleteCurrentPick = function() {\r\n\r\n        var pick = getActivePick();\r\n        var id = pick.id;\r\n\r\n        while (_currentMeasurement.hasPick(id + 1)) {\r\n            _currentMeasurement.setPick(id, _currentMeasurement.getPick(id + 1));\r\n            id++;\r\n        }\r\n\r\n        delete _currentMeasurement.picks[id];\r\n        \r\n        \r\n        \r\n        var count = _currentMeasurement.countPicks();\r\n        \r\n        _activePoint--;\r\n        \r\n        if (_activePoint <= 0) {\r\n            _activePoint = count;\r\n        }\r\n\r\n        if (this.isEditingEndpoint) {\r\n            if (count == 2) {\r\n                this.deleteCurrentMeasurement();\r\n                return;\r\n            }\r\n\r\n            _currentMeasurement.indicator.changeAllEndpointsOnEditStyle(false);\r\n            this.isEditingEndpoint = false;\r\n            this.updateViewportId(true);\r\n            allPicksSet();\r\n            render();\r\n        } else {\r\n            this._handleMouseEvent();    \r\n        }\r\n    };\r\n\r\n    this.updateViewportId = function(clear) {\r\n        if (_viewer.model && _viewer.model.is2d()) {\r\n            if (clear || isNoPicksSet()) {\r\n                _viewer.impl.updateViewportId(0);\r\n                _snapper.setViewportId(null);\r\n            }\r\n            else if (!_isPressing) {\r\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\r\n                \r\n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\r\n                _viewer.impl.updateViewportId(viewport);\r\n                if (_snapper)\r\n                    _snapper.setViewportId(viewport);  \r\n            \r\n            }\r\n        }\r\n    };\r\n\r\n    this.setNoTopology = function() {\r\n        if (_currentMeasurement && _currentMeasurement.indicator) {\r\n            _currentMeasurement.indicator.setNoTopology();\r\n        }\r\n        else {\r\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setNoTopology(); };\r\n        }\r\n    };\r\n    this.setFetchingTopology = function() {\r\n        if (_currentMeasurement && _currentMeasurement.indicator) {\r\n            _currentMeasurement.indicator.setFetchingTopology();\r\n        }\r\n        else {\r\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setFetchingTopology(); };\r\n        }\r\n    };\r\n    this.setTopologyAvailable = function() {\r\n        if (_currentMeasurement && _currentMeasurement.indicator) {\r\n            _currentMeasurement.indicator.setTopologyAvailable();\r\n        }\r\n        else {\r\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setTopologyAvailable(); };\r\n        }\r\n    };\r\n\r\n    this.getSnapper = function() {\r\n        return _snapper;\r\n    };\r\n\r\n    this.correctPickPosition = function() {\r\n        \r\n        var active = getActivePick();\r\n        \r\n        if (active && !active.getGeometry() && _cursorPosition) {\r\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\r\n            active.geomVertex = _cursorPosition;\r\n            active.intersectPoint = _cursorPosition;\r\n        }\r\n\r\n        if (hasPreviousPick()) {\r\n            var passive = getPreviousPick();\r\n            var corrected = MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\r\n            if (!corrected) {\r\n\r\n                // get next pick in case of closed loop measurement.\r\n                var id = (active.id + 1) % (_currentMeasurement.countPicks() + 1);\r\n                \r\n                if (id === 0)\r\n                    id = 1;\r\n\r\n                if (id !== active.id && _currentMeasurement.hasPick(id)) {\r\n                    var nextPick = _currentMeasurement.getPick(id);   \r\n                    MeasureCommon.correctPerpendicularPicks(nextPick, active, viewer, _snapper);\r\n                }\r\n            }\r\n            \r\n            if (_currentMeasurement.measurementType == MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\r\n                snapToFirstPick(active);    \r\n            }\r\n        }\r\n    };\r\n\r\n    this._handleMouseEvent = function (event) {\r\n\r\n        var valid = false;\r\n\r\n        if (_snapper.isSnapped()) {\r\n            \r\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\r\n            if (this.areAllPicksSet() || isNoPicksSet()) {\r\n                this.startNewMeasurement();\r\n\r\n                _activePoint = 1;\r\n            }\r\n\r\n            _snapper.copyResults(getActivePick());\r\n\r\n            valid = true;\r\n\r\n        } \r\n        else { \r\n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\r\n            if (event && _viewer.model && _viewer.model.is2d()) {\r\n                var viewport = _viewer.container.getBoundingClientRect();\r\n                var x = event.canvasX || event.clientX - viewport.left;\r\n                var y = event.canvasY || event.clientY - viewport.top;\r\n\r\n                if (x && y) {\r\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\r\n                }\r\n            }\r\n\r\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\r\n            if (_consumeSingleClick && _currentMeasurement && !this.isEditingEndpoint) {\r\n                if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            var lastPick = getActivePick();\r\n            if (lastPick) {\r\n                lastPick.clear();\r\n            }\r\n        }\r\n\r\n        if (_currentMeasurement) {\r\n            this.correctPickPosition();\r\n            \r\n            if (_consumeSingleClick) {\r\n                this._doConsumeSingleClick();\r\n            }\r\n\r\n            if (!isNoPicksSet()) {\r\n                var renderSucceeded = render();\r\n                \r\n                // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\r\n                // So enter here only if it's not the first pick.\r\n                if (_currentMeasurement.hasPick(2)) {\r\n                    valid &= renderSucceeded;\r\n                }\r\n            }\r\n        }\r\n\r\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\r\n        return valid;\r\n    };\r\n\r\n    this._doConsumeSingleClick = function() {\r\n        // In case the measurement is a closed loop, eliminate the last pick.\r\n        if (_currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !_currentMeasurement.closedArea) {\r\n            var length = _currentMeasurement.countPicks();\r\n            var firstPick = _currentMeasurement.getPick(1);\r\n            var lastPick = _currentMeasurement.getPick(length);\r\n\r\n            if (length >= 3 && _currentMeasurement.hasEqualPicks(firstPick, lastPick)) {\r\n                lastPick.clear();\r\n                delete _currentMeasurement.picks[length];\r\n                _currentMeasurement.closedArea = true;\r\n            }\r\n        }\r\n\r\n        this.updateResults();\r\n\r\n        var measurementComplete = _currentMeasurement.isComplete();\r\n        this.updateViewportId(measurementComplete);\r\n    };\r\n\r\n\r\n    this.handleButtonDown = function (event, button) {\r\n        if (av.isMobileDevice()) \r\n            return false;\r\n\r\n        _isDragging = true;\r\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\r\n            _consumeSingleClick = true;\r\n            _downX = event.canvasX;\r\n            _downY = event.canvasY;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    this.handleMouseMove = function (event) {\r\n\r\n        if (av.isMobileDevice())\r\n            return false;\r\n\r\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\r\n            _consumeSingleClick = false;    \r\n        } \r\n\r\n        _endpointMoved = this.isEditingEndpoint;\r\n\r\n        if (!isNoPicksSet() && !this.areAllPicksSet()) {\r\n            this.clearPick(_activePoint);\r\n            this._handleMouseEvent(event);\r\n        }\r\n\r\n        _snapper.indicator.render();\r\n\r\n        return false;\r\n    };\r\n\r\n    this.restoreMouseListeners = function () {\r\n\r\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\r\n        // So they won't be triggered as well.\r\n        // The solution is to enable them after the end of the pressing.\r\n\r\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\r\n    };\r\n\r\n    this.handlePressHold = function (event) {\r\n        _consumeSingleClick = false;\r\n\r\n        if (av.isTouchDevice()) {\r\n            switch( event.type )\r\n            {\r\n                case \"press\":\r\n                    _isPressing = true;\r\n\r\n                    if (this.areAllPicksSet() || isNoPicksSet()) {\r\n                        this.startNewMeasurement();\r\n\r\n                        if (_isolateMeasure) { \r\n                            this.clearIsolate();\r\n                        }\r\n\r\n                        _activePoint = 1;\r\n                    }\r\n\r\n                    this._handleMouseEvent(event);\r\n                    _snapper.indicator.render();\r\n\r\n                    return true;\r\n\r\n                case \"pressup\":\r\n                    _consumeSingleClick = true;\r\n                    this.restoreMouseListeners();\r\n                    _singleClickHandled = !_singleClickHandled;\r\n                    this.handleSingleClick(event);\r\n                    _isPressing = false;\r\n                    return true;\r\n            }\r\n        }\r\n        return false;\r\n\r\n    };\r\n\r\n\r\n\r\n    this.handleGesture = function( event )\r\n    {   \r\n        if (av.isTouchDevice()){\r\n            \r\n            _consumeSingleClick = false;\r\n        \r\n            if (_isPressing) {\r\n                \r\n                this.clearPick(_activePoint);\r\n\r\n                switch( event.type )\r\n                {\r\n                    case \"dragstart\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        return true;\r\n\r\n                    case \"dragmove\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        return true;\r\n\r\n                    case \"dragend\":\r\n                        _isPressing = false;\r\n                        _consumeSingleClick = true;\r\n\r\n                        if (!this.editByDrag) {\r\n                            _singleClickHandled = !_singleClickHandled;\r\n                            this.handleSingleClick(event);    \r\n                        }\r\n\r\n                        this.editByDrag = false;\r\n                        this.restoreMouseListeners();\r\n                        return true;\r\n\r\n                    case \"pinchstart\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        break;\r\n\r\n                    case \"pinchmove\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        break;\r\n\r\n                    case \"pinchend\":\r\n                        _consumeSingleClick = true;\r\n                        _singleClickHandled = !_singleClickHandled;\r\n                        this.handleSingleClick(event);\r\n                        this.restoreMouseListeners();\r\n                        return true;\r\n                }\r\n            }\r\n\r\n            if (event.type.indexOf('pinch') !== -1) {\r\n                for (var key in _measurementsManager.measurementsList) {\r\n                    if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                        var measurement = _measurementsManager.measurementsList[key];\r\n                        measurement.indicator.updateScale();    \r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleButtonUp = function (event, button) {\r\n        _isDragging = false;\r\n        _downX = null;\r\n        _downY = null;\r\n        \r\n        if (_endpointMoved) {\r\n            _consumeSingleClick = true;\r\n            _singleClickHandled = !_singleClickHandled;\r\n            this.handleSingleClick(event);\r\n            _endpointMoved = false;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleSingleClick = function (event, button) {\r\n        if (_consumeSingleClick) {\r\n\r\n            _snapper.indicator.clearOverlays();\r\n\r\n            if (_currentMeasurement) {\r\n                _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);    \r\n            }\r\n\r\n            if (this._handleMouseEvent(event)) {\r\n                this.updateResults();\r\n                _activePoint++;\r\n            }\r\n            else {\r\n                if (this.isEditingEndpoint) {\r\n                    this.undoEditEndpoint();\r\n                }\r\n                else {\r\n                    if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && canCloseArea()) {\r\n                        snapToFirstPick(getActivePick(), true);\r\n                        this._handleMouseEvent();\r\n                    } else {\r\n                        this.clearCurrentMeasurement();    \r\n                    }\r\n                }\r\n            }\r\n\r\n            if (_currentMeasurement && _currentMeasurement.isComplete()) {\r\n                allPicksSet();\r\n            }\r\n\r\n            _consumeSingleClick = false;\r\n            _singleClickHandled = !_singleClickHandled;\r\n            this.isEditingEndpoint = false;\r\n\r\n            _snapper.clearSnapped();\r\n        }\r\n        return true;\r\n    };\r\n\r\n    this.handleDoubleClick = function(event) {\r\n        return true;\r\n    };\r\n\r\n    this.onCameraChange = function () {\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                measurement.indicator.updateScale();\r\n            }\r\n        }\r\n\r\n        _snapper.indicator.onCameraChange();\r\n    };\r\n\r\n    this.handleSingleTap = function (event) {\r\n        if (!_singleClickHandled) {\r\n            _consumeSingleClick = true;\r\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\r\n            this.handleSingleClick(event);\r\n        }\r\n        _singleClickHandled = !_singleClickHandled;\r\n\r\n        return true;\r\n    };\r\n\r\n    this.handleDoubleTap = function(event) {\r\n        if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && _currentMeasurement.countPicks() > 2) {\r\n            // fake single click over the first handle, to close the area.\r\n            var firstPick = _currentMeasurement.getPick(1);\r\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\r\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\r\n            event.canvasX = firstPickPosition.x;\r\n            event.canvasY = firstPickPosition.y;\r\n            _consumeSingleClick = true;\r\n            _snapper.onMouseDown(firstPickPosition);\r\n            this.handleSingleClick(event);\r\n            _singleClickHandled = !_singleClickHandled;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    this.handleResize = function() {\r\n        for (var key in _measurementsManager.measurementsList) {\r\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\r\n                var measurement = _measurementsManager.measurementsList[key];\r\n                if (measurement.indicator) {\r\n                    measurement.indicator.handleResize();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    this.handleKeyDown = function(event, keyCode) {\r\n        switch (keyCode) {\r\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\r\n            case Autodesk.Viewing.KeyCode.DELETE:\r\n            if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !this.areAllPicksSet()) {\r\n                if (_currentMeasurement.countPicks() > 2 ) {\r\n                    this.deleteCurrentPick();\r\n                } else {\r\n                    this.deleteCurrentMeasurement();    \r\n                }\r\n            } else {\r\n                this.deleteCurrentMeasurement();\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    };\r\n};\r\n\r\nav.GlobalManagerMixin.call(MeasureTool.prototype);\r\n\r\n","import { Indicator } from './Indicator'\r\n\r\n    var av = Autodesk.Viewing;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    // /** @constructor */\r\n    export function CalibrationToolIndicator(viewer, measurement, calibrationTool)\r\n    {\r\n        Indicator.call(this, viewer, measurement, calibrationTool);\r\n        this.calibrationTool = calibrationTool;\r\n        this.calibrationLabel = null;\r\n        this.endpoints = null;\r\n        this.tmpVector = new THREE.Vector3();\r\n        this.p1 = null;\r\n        this.p2 = null;\r\n\r\n        this.rubberbandDefaultMaterial = new THREE.MeshBasicMaterial({\r\n            color: 0xe8b22c,\r\n            opacity: 1,\r\n            transparent: false,\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });\r\n\r\n        this.rubberbandSnappedMaterial = new THREE.MeshBasicMaterial({\r\n            color: 0x005BCE,\r\n            opacity: 1,\r\n            transparent: false,\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });\r\n\r\n        this.rubberbandTipMaterial = new THREE.MeshBasicMaterial({\r\n            color: 0x000000,\r\n            opacity: 1,\r\n            transparent: false,\r\n            depthTest: false,\r\n            depthWrite: false,\r\n            side: THREE.DoubleSide\r\n        });\r\n\r\n    }\r\n\r\n    CalibrationToolIndicator.prototype = Object.create(Indicator.prototype);\r\n    CalibrationToolIndicator.prototype.constructor = CalibrationToolIndicator;\r\n    var proto = CalibrationToolIndicator.prototype;\r\n    \r\n    var kEndpointOffset = 15;\r\n    \r\n    var kCrossWidth = 1.5;\r\n    var kTipXWidth = 2;\r\n    var kLineWidth = 3;\r\n\r\n    var kTipXLength = 3;\r\n    var kCrossLength = 5;\r\n\r\n    var kDashSize = 2;\r\n    var kGapSize = 1;\r\n\r\n    proto.createEndpoint = function(name) {\r\n        this.endpoints[name] = {};\r\n        this.endpoints[name].position = null;\r\n\r\n        const _document = this.getDocument();\r\n        var label = this.endpoints[name].label = _document.createElement('div');\r\n        label.className = 'calibration-endpoint';\r\n\r\n        this.viewer.container.appendChild(label);\r\n\r\n        var text = _document.createElement('div');\r\n        text.className = 'calibration-endpoint-text';\r\n        text.textContent = name.toString();\r\n        label.appendChild(text);\r\n        \r\n        if (av.isTouchDevice()) {\r\n            this.initLabelMobileGestures(label, name, this.calibrationTool);\r\n        }\r\n        // Disable hover for mobile devices\r\n        if(!av.isMobileDevice()) {\r\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\r\n\r\n            this.initMouseEvent(label, name);\r\n    \r\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            \r\n        }   \r\n    };\r\n\r\n    proto.init = function() {\r\n\r\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\r\n        \r\n        if (!this.calibrationLabel) {\r\n            const _document = this.getDocument();\r\n            this.calibrationLabel = _document.createElement('div');\r\n            this.calibrationLabel.className = 'calibration-label';\r\n            this.hideLabel(this.calibrationLabel);\r\n            this.viewer.container.appendChild(this.calibrationLabel);\r\n            this.calibrationLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n\r\n            var text = _document.createElement('div');\r\n            text.className = 'calibration-label-text';\r\n            this.calibrationLabel.appendChild(text);\r\n        }\r\n\r\n        this.endpoints = [];\r\n\r\n        this.handleButtonUpBinded = this.calibrationTool.handleButtonUp.bind(this.calibrationTool);\r\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\r\n\r\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\r\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n    };\r\n\r\n    proto.destroy = function() {\r\n        this.clear();\r\n\r\n        Indicator.prototype.destroy.call(this);\r\n\r\n        if (this.calibrationLabel) {\r\n            this.calibrationLabel.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\r\n            this.viewer.container.removeChild(this.calibrationLabel);\r\n            this.calibrationLabel = null;\r\n        }\r\n\r\n        \r\n        this.viewer.impl.clearOverlay(this.overlayName);\r\n        this.viewer.impl.removeOverlayScene(this.overlayName);\r\n        \r\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\r\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n    };\r\n\r\n    proto.clearRubberband = function() {\r\n        this.viewer.impl.clearOverlay(this.overlayName);\r\n    };\r\n\r\n    proto.clear = function() {\r\n\r\n        this.clearRubberband();\r\n        \r\n        this.hideLabel(this.calibrationLabel);\r\n        \r\n        for (var name in this.endpoints) {\r\n            if (this.endpoints.hasOwnProperty(name)) {\r\n                this.hideClick(name);\r\n                this.endpoints[name].position = null;\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.updateLabelValue = function(text) {\r\n        if (!text || text === \"\") {\r\n            this.calibrationLabel.childNodes[0].textContent = null;\r\n            this.hideLabel(this.calibrationLabel);\r\n        }\r\n        else {\r\n            this.calibrationLabel.childNodes[0].setAttribute(\"data-i18n\", text);\r\n            this.calibrationLabel.childNodes[0].textContent = av.i18n.translate(text);\r\n            this.showLabel(this.calibrationLabel);\r\n            this.calibrationTool.render();\r\n        }\r\n    };\r\n\r\n    proto.changeLabelClickableMode = function(clickable) {\r\n        if (clickable) {\r\n            this.calibrationLabel.childNodes[0].style.pointerEvents='all';\r\n        }\r\n        else {\r\n            this.calibrationLabel.childNodes[0].style.pointerEvents='none';\r\n        }\r\n    };\r\n\r\n    proto.showAddCalibrationLabel = function() {\r\n        var self = this;\r\n        this.updateLabelValue(\"Add Calibration\");\r\n        this.changeLabelClickableMode(true);\r\n        this.calibrationTool.render();\r\n        \r\n        this.calibrationLabel.addEventListener(\"click\", function onClick() {\r\n            self.calibrationLabel.childNodes[0].style.pointerEvents = 'none';\r\n            self.calibrationTool.render();\r\n            self.updateLabelValue(null);\r\n            self.calibrationTool.showPanel();\r\n            self.calibrationLabel.removeEventListener(\"click\", onClick);\r\n        });    \r\n    };\r\n\r\n    proto.updateLabelsPosition = function() {\r\n        for (var i = 1; i <= Object.keys(this.endpoints).length; i++) {\r\n            if (this.endpoints[i].position) {\r\n                var label = this.endpoints[i].label;\r\n                var pos = MeasureCommon.project(this.endpoints[i].position, this.viewer, kEndpointOffset);\r\n                label.style.left = (pos.x - parseInt(label.clientWidth) / 2) + 'px';\r\n                label.style.top = (pos.y - parseInt(label.clientHeight) / 2) + 'px';\r\n                label.point = this.endpoints[i].position;\r\n\r\n                // Detect and move in case of overlapping.\r\n                this.labelsOverlapDetection(this.endpoints[i].label, this.endpoints);\r\n            }\r\n        }\r\n\r\n        this.hideLabelsOutsideOfView();\r\n    };\r\n\r\n    function isLeftIntersect(current, other) {\r\n        return current.right >= other.left && current.right <= other.right;\r\n    }\r\n\r\n    function isRightIntersect(current, other) {\r\n        return current.left >= other.left && current.left <= other.right;\r\n    }\r\n\r\n    function isMiddleIntersect(current, other) {\r\n        return current.left <= other.left && current.right >= other.right;\r\n    }\r\n\r\n    function isVerticalIntersect(current, other) {\r\n        return current.top < other.bottom && current.bottom > other.top;\r\n    }\r\n\r\n    function moveLeft(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\r\n    }\r\n\r\n    function moveRight(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\r\n    }\r\n\r\n    function moveDown(currentLabel, currentRect, otherRect) {\r\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\r\n    }\r\n\r\n\r\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\r\n\r\n        for (var i = 1; i <= Object.keys(labelsList).length ; i++) {\r\n\r\n            var dynamicLabel = labelsList[i].label;\r\n\r\n            if (staticLabel !== dynamicLabel) {\r\n                var staticRect = staticLabel.getBoundingClientRect();\r\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\r\n\r\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\r\n\r\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\r\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\r\n                    }\r\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\r\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\r\n                    }\r\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\r\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.renderCalibrationLabel = function() {\r\n\r\n        if (this.showMeasureResult && this.calibrationLabel && this.p1 && this.p2) {\r\n            \r\n            var point = { x: (this.p1.x + this.p2.x)/2, y: (this.p1.y + this.p2.y)/2, z: (this.p1.z + this.p2.z)/2 };\r\n            var mid = MeasureCommon.project(point, this.viewer);\r\n\r\n            this.labelPosition = new THREE.Vector2(mid.x, mid.y);\r\n\r\n            if (this.calibrationLabel.childNodes[0].textContent) {\r\n                this.showLabel(this.calibrationLabel);\r\n            }\r\n\r\n            this.calibrationLabel.style.top  = this.labelPosition.y - Math.floor(this.calibrationLabel.clientHeight / 2) + 'px';\r\n            this.calibrationLabel.style.left = this.labelPosition.x - Math.floor(this.calibrationLabel.clientWidth / 2) + 'px' ;\r\n            this.calibrationLabel.point = point;\r\n\r\n            if (this.viewer.model.is2d()) {\r\n                this.alignLabelWithLine(this.calibrationLabel, this.p1, this.p2, this.calibrationLabel.clientHeight, this.viewer);\r\n            }\r\n        }\r\n    };\r\n\r\n    proto.drawMeasurementLineTip = function(point, direction, normal, flip) {\r\n\r\n        var tmpVec = new THREE.Vector3();\r\n        var geometry = new THREE.Geometry();\r\n        var p1Scale = this.setScale(point);\r\n\r\n        flip = flip ? -1 : 1;\r\n\r\n        var tipMaterial = (this.snapper.isSnapped() && !this.showMeasureResult) ? this.rubberbandSnappedMaterial : this.rubberbandTipMaterial;\r\n\r\n        // black tip\r\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\r\n        geometry.vertices[0] = tmpVec.clone();\r\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\r\n        geometry.vertices[1] = tmpVec.clone();\r\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\r\n\r\n        geometry.vertices[0] = point;\r\n        tmpVec.subVectors(point, direction.clone().multiplyScalar(kCrossLength * p1Scale * flip));\r\n        geometry.vertices[1] = tmpVec.clone();\r\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\r\n\r\n        // yellow tip\r\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        geometry.vertices[0] = tmpVec.clone();\r\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        geometry.vertices[1] = tmpVec.clone();\r\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\r\n\r\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        tmpVec.addVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        geometry.vertices[0] = tmpVec.clone();\r\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        tmpVec.subVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\r\n        geometry.vertices[1] = tmpVec.clone();\r\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\r\n    };\r\n\r\n    proto.renderDistanceMeasurement = function(p1, p2) {\r\n\r\n        this.viewer.impl.clearOverlay(this.overlayName);\r\n\r\n        if (!p1 || !p2)\r\n            return;\r\n\r\n        var geometry = new THREE.Geometry();\r\n        var lineDirection = new THREE.Vector3().subVectors(p2, p1).normalize();\r\n        var lineNormal = lineDirection.clone().cross(this.viewer.navigation.getEyeVector()).normalize();\r\n        var p1Scale = this.setScale(p1);\r\n        \r\n        var dashSize = kDashSize * p1Scale;\r\n        var gapSize = kGapSize * p1Scale;\r\n\r\n        // Main line\r\n        \r\n        var lineMaterial = ((Math.abs(p1.x - p2.x) <= 0.1 || Math.abs(p1.y - p2.y) <= 0.1 \r\n                            || this.snapper.getSnapResult().isPerpendicular) && !this.showMeasureResult) \r\n                            ? this.rubberbandSnappedMaterial : this.rubberbandDefaultMaterial;\r\n\r\n        if (this.showMeasureResult) {\r\n            // Single solid line.\r\n            geometry.vertices[0] = p1;\r\n            geometry.vertices[1] = p2;\r\n            this.drawLineAsCylinder(geometry, lineMaterial, kLineWidth, this.overlayName);\r\n        }\r\n        else {\r\n            this.drawDashedLine(p1, p2, dashSize, gapSize, lineMaterial, kLineWidth, this.overlayName); \r\n        }\r\n        \r\n        this.drawMeasurementLineTip(p1, lineDirection, lineNormal, false);\r\n        \r\n        if (this.showMeasureResult) {\r\n            this.drawMeasurementLineTip(p2, lineDirection, lineNormal, true);\r\n        }\r\n\r\n        this.p1 = p1;\r\n        this.p2 = p2;\r\n\r\n        this.renderCalibrationLabel();\r\n    };\r\n\r\n    proto.onCameraChange = function() {\r\n        if (this.measurement.isComplete()) {\r\n            this.renderDistanceMeasurement(this.p1, this.p2);\r\n        }   \r\n        this.updateLabelsPosition();         \r\n    };\r\n\r\n","\r\n\r\n    \"use strict\";\r\n\r\n    var av = Autodesk.Viewing,\r\n        ave = Autodesk.Viewing.Extensions,\r\n        avp = Autodesk.Viewing.Private,\r\n        avu = Autodesk.Viewing.UI,\r\n        MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    // This strange code is there because we \r\n    // don't want DockingPanel, which is used as a base class later\r\n    // to be undefined during headless mode.\r\n    // Simply deriving from undefined will cause an exception (from babel env preset) \r\n    // even if the class is never instantiated\r\n    const DockingPanel = (avu && avu.DockingPanel) || class {};\r\n    // et ViewerPanelMixin to a no-op in headless mode\r\n    const ViewerPanelMixin = (ave && ave.ViewerPanelMixin) || function () {};\r\n\r\n    const _gWindow = av.getGlobal();\r\n    const _gDocument = _gWindow.document;\r\n\r\n    //\r\n    // /** @constructor */\r\n    //\r\n    //\r\n    export var CalibrationPanel = function(calibrationTool, viewer, id, title, options)\r\n    {\r\n        var self = this;\r\n\r\n        options = options || {};\r\n        options.addFooter = false;\r\n\r\n        DockingPanel.call(this, viewer.container, id, title, options);\r\n\r\n        this.viewer = viewer;\r\n        this.calibrationTool = calibrationTool;\r\n        this.parentContainer = viewer.container;\r\n        this.container.style.left = '0px';\r\n        this.container.style.top = '0px';\r\n        this.container.style.resize = 'none';\r\n\r\n        this.container.classList.add('calibration-panel');\r\n\r\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\r\n\r\n        this.addEventListener( this.closer, \"click\", function(e) {\r\n            self.setVisible(false);\r\n            self.calibrationTool.clearSize();\r\n            self.calibrationTool.showAddCalibrationLabel();\r\n        });\r\n\r\n        if (!options.heightAdjustment)\r\n            options.heightAdjustment = 40;\r\n        if (!options.marginTop)\r\n            options.marginTop = 0;\r\n        options.left = false;\r\n\r\n        this.createScrollContainer(options);\r\n\r\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\r\n\r\n        this.calibrationMenu = _document.createElement(\"div\");\r\n\r\n        this.scrollContainer.appendChild( this.calibrationMenu );\r\n\r\n        // Table\r\n        this.table = _document.createElement(\"table\");\r\n        this.table.className = \"adsk-lmv-tftable calibration-table\";\r\n        this.tbody = _document.createElement(\"tbody\");\r\n        this.table.appendChild(this.tbody);\r\n        this.calibrationMenu.appendChild(this.table);\r\n\r\n        // Define Size Row\r\n        this.row = this.tbody.insertRow(0);\r\n        this.requestedSizeTextbox = _document.createElement('input');\r\n        this.requestedSizeTextbox.className = 'docking-panel-textbox';\r\n        this.requestedSizeTextbox.type = 'text';\r\n        this.requestedSizeTextbox.autofocus= 'true';\r\n\r\n        this.addEventListener(this.requestedSizeTextbox, \"keyup\", function(e) {\r\n            var value = self.requestedSizeTextbox.value;\r\n            if (value !== \"\" && value.split(\".\")[0] === \"\") {\r\n                self.requestedSizeTextbox.value = \"0\" + value;\r\n            }\r\n            self.updateLabel();\r\n        });\r\n\r\n\r\n        this.addEventListener(this.requestedSizeTextbox, \"keypress\", function(e) {\r\n            var key = e.key || String.fromCharCode(e.keyCode);\r\n            // Handling backspace and arrows for firefox\r\n            if (key == \"Backspace\" || key == \"ArrowLeft\" || key == \"ArrowRight\"){\r\n                return;\r\n            }\r\n\r\n            // Escape (For IE11)\r\n            if (e.keyCode == av.KeyCode.ESCAPE) {\r\n                self.setVisible(false);\r\n                self.calibrationTool.clearSize();\r\n                self.calibrationTool.showAddCalibrationLabel();\r\n                return;\r\n            }\r\n\r\n            var requestedSize = self.requestedSizeTextbox.value;\r\n            var cursorIndex = self.requestedSizeTextbox.selectionStart;\r\n            requestedSize = [requestedSize.slice(0, cursorIndex), key, requestedSize.slice(cursorIndex)].join('');\r\n            \r\n            if (requestedSize == \".\") {\r\n                return;\r\n            }\r\n\r\n            var isSimple = self.units[self.unitList.selectedIndex].simpleInput;\r\n        \r\n            if (!isPositiveNumber(requestedSize) || (isSimple && (!isSimpleDecimal(requestedSize) || Autodesk.Viewing.Private.calculatePrecision(requestedSize) > self.calibrationTool.getMaxPrecision()))) {\r\n                    e.preventDefault();\r\n            }\r\n        });\r\n\r\n        var caption = \"Define Size\";\r\n        var cell = this.row.insertCell(0);\r\n        this.caption = _document.createElement(\"div\");\r\n        this.caption.setAttribute(\"data-i18n\", caption);\r\n        this.caption.textContent = av.i18n.translate(caption);\r\n        cell.appendChild(this.caption);\r\n\r\n        cell = this.row.insertCell(1);\r\n        cell.appendChild(this.requestedSizeTextbox);\r\n\r\n        // Unit Type Row\r\n        this.units = [\r\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'], simpleInput: false },\r\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'], simpleInput: false },\r\n            { name: 'Meters', units: 'm', matches: ['m'], simpleInput: true },\r\n            { name: 'Centimeters', units: 'cm', matches: ['cm'], simpleInput: true },\r\n            { name: 'Millimeters', units: 'mm', matches: ['mm'], simpleInput: true }\r\n        ];\r\n\r\n        var unitNames = [];\r\n        for (var i = 0; i < this.units.length; ++i) {\r\n            unitNames.push(this.units[i].name);\r\n        }\r\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, 0, null, { paddingLeft: 0, paddingRight: 15 });\r\n        this.unitList.setGlobalManager(this.globalManager);\r\n        this.addEventListener(this.unitList, \"change\", function(e) {\r\n            self.updateLabel();\r\n        });\r\n\r\n        // Set Calibration button\r\n        var setCalibration = _document.createElement('div');\r\n        setCalibration.classList.add('docking-panel-primary-button');\r\n        setCalibration.classList.add('calibration-button');\r\n\r\n        setCalibration.setAttribute(\"data-i18n\", \"Set Calibration\");\r\n        setCalibration.textContent = av.i18n.translate(\"Set Calibration\");\r\n\r\n        setCalibration.addEventListener('click', function () {\r\n            var index = self.unitList.selectedIndex;\r\n            var requestedUnits = self.units[index].units;\r\n            self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\r\n        }, false);\r\n\r\n        this.calibrationMenu.appendChild(setCalibration);\r\n        \r\n\r\n    }; // end constructor\r\n\r\n    var isPositiveNumber = function (n) {\r\n        // The first character of the string has to be a digit.\r\n        return n.match(/^(\\d+)/);\r\n    };\r\n\r\n    var isSimpleDecimal = function (n) {\r\n        // Add \"0\" to the end of the string, to check if there are trailing spaces.\r\n        n += '0';\r\n        return !isNaN(parseFloat(n)) && !isNaN(+n) && parseFloat(n) >= 0;\r\n    };\r\n\r\n    CalibrationPanel.prototype = Object.create(DockingPanel.prototype);\r\n    ViewerPanelMixin.call(CalibrationPanel.prototype);\r\n\r\n\r\n    CalibrationPanel.prototype.uninitialize = function uninitialize() {\r\n        this.viewer = null;\r\n        DockingPanel.prototype.uninitialize.call(this);\r\n    };\r\n\r\n    CalibrationPanel.prototype.findUnits = function findUnits() {\r\n        var i,\r\n            j,\r\n            selectedUnits = this.calibrationTool.getCurrentUnits();\r\n        for (i = 0; i < this.units.length; ++i) {\r\n            var matches = this.units[i].matches;\r\n            if (matches) {\r\n                for (j = 0; j < matches.length; ++j) {\r\n                    if (matches[j] === selectedUnits) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n\r\n    CalibrationPanel.prototype.setPanelValue = function(size) {\r\n        this.unitList.setSelectedIndex(this.findUnits());\r\n        this.requestedSizeTextbox.value = size;\r\n    };\r\n\r\n    CalibrationPanel.prototype.updateLabel = function() {\r\n        var index = this.unitList.selectedIndex;\r\n        var requestedUnits = this.units[index].units;\r\n        var size = this.requestedSizeTextbox.value;\r\n        var parsedNumber = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(size, requestedUnits);\r\n        var text = Autodesk.Viewing.Private.formatValueWithUnits(parsedNumber, requestedUnits, 3, Autodesk.Viewing.Private.calculatePrecision(size));\r\n\r\n        if (size === \"\") {\r\n            this.calibrationTool.updateLabelValue(null);\r\n        } else if (!isNaN(parsedNumber)) {\r\n            this.calibrationTool.updateLabelValue(text);\r\n        }\r\n    };\r\n\r\n    CalibrationPanel.prototype.updatePanelPosition = function (labelPosition, p1, p2, labelOffset) {\r\n\r\n        var width = parseInt(this.container.getBoundingClientRect().width);\r\n        var height = parseInt(this.container.getBoundingClientRect().height);\r\n\r\n        var cornerX;\r\n        var cornerY;\r\n\r\n        if (!labelPosition || !p1 || !p2) {\r\n            cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\r\n            cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\r\n        }\r\n        else {\r\n            p1 = MeasureCommon.project(p1, this.viewer);\r\n            p2 = MeasureCommon.project(p2, this.viewer);\r\n            var rubberbandDirection = new THREE.Vector2().copy(p1).sub(p2).normalize();\r\n\r\n            var normal;\r\n            if (p1.x < p2.x) {\r\n                normal = new THREE.Vector2(rubberbandDirection.y, -rubberbandDirection.x);\r\n            } else {\r\n                normal = new THREE.Vector2(-rubberbandDirection.y, rubberbandDirection.x);\r\n            }\r\n\r\n            var offset = labelOffset + Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) / 2;\r\n\r\n            normal = normal.multiplyScalar(offset);\r\n            var pos =  labelPosition.sub(normal);\r\n\r\n            cornerX = pos.x - Math.floor(width / 2);\r\n            cornerY = pos.y - Math.floor(height / 2);\r\n\r\n            // if panel exceeds screen bounds, just put the panel in the center of the screen.\r\n            if ((cornerX < 0) || (cornerX + width > this.viewer.canvas.clientWidth) || (cornerY < 0) || (cornerY + height > this.viewer.canvas.clientHeight)) {\r\n                cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\r\n                cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\r\n            }\r\n        }\r\n\r\n        this.container.style.left = cornerX + 'px';\r\n        this.container.style.top  = cornerY + 'px';\r\n    };\r\n\r\n    //\r\n    // /** @constructor */\r\n    //\r\n    //\r\n    export var CalibrationRequiredDialog = function(measureExt, viewer, id, title, options)\r\n    {\r\n        var self = this;\r\n\r\n        options = options || {};\r\n        options.addFooter = false;\r\n\r\n        DockingPanel.call(this, viewer.container, id, title, options);\r\n\r\n        this.viewer = viewer;\r\n        this.measureExt = measureExt;\r\n        this.parentContainer = viewer.container;\r\n        this.container.classList.add('calibration-panel');\r\n        this.container.style.width = \"380px\";\r\n        this.container.style.height = \"190px\";\r\n        \r\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\r\n\r\n        if (!options.heightAdjustment)\r\n            options.heightAdjustment = 70;\r\n        if (!options.marginTop)\r\n            options.marginTop = 0;\r\n        options.left = false;\r\n\r\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\r\n\r\n        this.createScrollContainer(options);\r\n        this.dialogBox = _document.createElement(\"div\");\r\n        this.scrollContainer.appendChild( this.dialogBox );\r\n\r\n        // text\r\n        var calibrateNow = _document.createElement('div');\r\n        calibrateNow.className = 'calibration-text';\r\n        var text = \"Calibration Message\";\r\n        calibrateNow.setAttribute(\"data-i18n\", text);\r\n        calibrateNow.textContent = av.i18n.translate(text);\r\n        this.dialogBox.appendChild(calibrateNow);\r\n\r\n        var buttonsWrapper = _document.createElement('div');\r\n        buttonsWrapper.className = 'calibration-buttons-wrapper';\r\n        this.dialogBox.appendChild(buttonsWrapper);\r\n        \r\n        // Cancel button\r\n        var cancel = _document.createElement('div');\r\n        cancel.classList.add('docking-panel-secondary-button');\r\n        cancel.classList.add('calibration-button-left');\r\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\r\n        cancel.textContent = av.i18n.translate(\"Cancel\");\r\n        cancel.addEventListener('click', function () {\r\n            self.setVisible(false);\r\n        }, false);\r\n        buttonsWrapper.appendChild(cancel);\r\n\r\n        // Calibrate-Now button\r\n        var calibrateNowButton = _document.createElement('div');\r\n        calibrateNowButton.classList.add('docking-panel-primary-button');\r\n        calibrateNowButton.classList.add('calibration-button-right');\r\n        calibrateNowButton.setAttribute(\"data-i18n\", \"Calibrate Now\");\r\n        calibrateNowButton.textContent = av.i18n.translate(\"Calibrate Now\");\r\n        calibrateNowButton.addEventListener('click', function () {\r\n            self.measureExt.enableCalibrationTool(true);\r\n            self.setVisible(false);\r\n        }, false);\r\n        buttonsWrapper.appendChild(calibrateNowButton);\r\n        \r\n\r\n    }; // end constructor\r\n\r\n    CalibrationRequiredDialog.prototype = Object.create(DockingPanel.prototype);\r\n    ViewerPanelMixin.call(CalibrationRequiredDialog.prototype);\r\n\r\n\r\n    CalibrationRequiredDialog.prototype.uninitialize = function uninitialize() {\r\n        this.viewer = null;\r\n        DockingPanel.prototype.uninitialize.call(this);\r\n    };\r\n","import { CalibrationToolIndicator } from './CalibrationToolIndicator'\r\nimport { CalibrationPanel } from './CalibrationPanels'\r\n\r\nconst av = Autodesk.Viewing;\r\n\r\n//\r\n// /** @constructor */\r\n//\r\n//\r\nexport var CalibrationTool = function( viewer, options, sharedMeasureConfig, snapper)\r\n{   \r\n    var av = Autodesk.Viewing;\r\n    var avem = Autodesk.Viewing.Extensions.Measure;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    var _names  = [\"calibration\"];\r\n    var _priority = 50;\r\n    var _viewer  = viewer;\r\n    var _measurement = new MeasureCommon.Measurement(MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\r\n    var _options = options || {};\r\n\r\n    this.setGlobalManager(viewer.globalManager);\r\n\r\n    // Shared State with MeasureTool and Indicator\r\n    var _sharedMeasureConfig = sharedMeasureConfig;\r\n\r\n    var _maxPrecision = options.maxPrecision || 5;\r\n    var _isCalibrated = (sharedMeasureConfig.calibrationFactor != null); // True when the user set the calibration, or used a Previous calibration factor.\r\n    \r\n    var _snapper = snapper;\r\n\r\n    var _active = false;\r\n    var _isDragging = false;\r\n    var _isPressing = false;\r\n\r\n    var _distance = null; // The length of the current measurement.\r\n    var _calibrationTaken = false; // True when the user selected two valid points and set the calibration.\r\n    var _selectedSize = null;\r\n    var _selectedUnits = null;\r\n    var _selectedP1 = null;\r\n    var _selectedP2 = null;\r\n    var _waitingForInput = false; // True when the user selected two valid points.\r\n    var _picksBackup = [];\r\n    var _cursorPosition = null;\r\n\r\n    var _activePoint = 0;\r\n    \r\n    var _endpointMoved = false;\r\n\r\n    var _consumeSingleClick = false;\r\n    var _singleClickHandled = false;\r\n    var _downX = null;\r\n    var _downY = null;\r\n\r\n    // GUI.\r\n    var _calibrationPanel = null;\r\n    var _cursor = \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAAAAXNSR0IArs4c6QAAAwZJREFUSA2tVEtLW0EUvjGJefoqSY0x0WBSiY+oNWiUINkU6ioLaaAlG1eudNVFoT+grgopiCkEIbUK1o0lusmurRSEWmmKG6MNtNhNosWqyU2CZPpN8cr15nFD7YHDzHnON2fOGYZhmHkw4XEW+wD4xkT4lMvl6CE0+Y2ohh+dz+cZn89HVS/5+n/d/wVMkXq9Xor2v5SBgsmymQwZHx+vOqlKpXKDXWI3eU6Tg+kqSjSh3W4/s9lsvzUajaNcAK3xY7Dyci3nd6WXSCS60dHRvMfjSRcKBfWV4SYbrVarB8p0PB5nY7HYmdVq/aDX67WlckpKKcvpOjs7X09OTvoPDw8z2Wy2Bu+imJqa+npycnJXGHOt3YRGoSyVSvvMZrNkYWFBs7GxkaoBAXFJcDJhcCW5rq5ur62trQ/EOhyOBhDT2Nj4qVKMqA31ve1yub7Rfufo/PycDA4OxpuamhqECaouhVqtfuD3+1tqa2uZQCCQDoVCWTwknVQDDvIKE1clI1ja09Ozg0cjx8fHpL+/P+50OhMU8f7+Punt7f2I5NdqXRXi9fV1z9jYWCuIWV5eziSTyWAqlXq1urqaw6AwOMiCG4lOYtEturu732xubhK0FQHSvfr6+lsog4HWPIPvIBqNErRiqCiwkkKpVFowZd8xZSQYDLImk+kJ52+xWJ4tLS3hU8yTkZGRBD2Ms4mu6Nun4XA4f3p6SoaGhuJ0+rgg/Bsmt9udYFmWzM3NZdDT05ztWsE5JV0R1AqUCfTt0fb2tjESiRRmZmaOUOcI3w9DY5mdnb03PDzMoDQ/MZFRzM20lO/E38vl8vt46UdAq0WNJWixlEwmu8B1bXioOxwjpgXJ0hMTE1og1qysrDghf+HnKtoD7c7u7i5ZXFzMGY3GF7iFuRR3dHTMr62tXWxtbZH29vZ3RYmECozu54ODAzpdP2hphHZOVigUVjChvgMDA+85fdm1q6vrrU6n+4WR9Zd1ujQ0Nzc/NBgMScSExXwZ2j5oL5Wo46UD/ZvxUemo+AdW1zJzUYr16wAAAABJRU5ErkJggg==), auto\";\r\n    var _hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\r\n\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    function getActivePick()\r\n    {\r\n        switch (_activePoint) {\r\n            case 0:\r\n                return null;\r\n            case 1:\r\n            case 2:\r\n                return _measurement.getPick(_activePoint);\r\n            case 3:\r\n                return _measurement.getPick(_measurement.countPicks());\r\n        }\r\n    }\r\n\r\n    function getPreviousPick()\r\n    {\r\n        switch (_activePoint) {\r\n            case 0:\r\n                return null;\r\n            case 1:\r\n                return _measurement.getPick(_measurement.countPicks());\r\n            case 2:\r\n            case 3:\r\n                return _measurement.getPick(1);\r\n        }\r\n    }\r\n\r\n    function hasPreviousPick()\r\n    {\r\n        switch (_activePoint) {\r\n            case 0:\r\n                return false;\r\n            case 1:\r\n                return _measurement.hasPick(_measurement.countPicks());\r\n            case 2:\r\n            case 3:\r\n                return _measurement.hasPick(1);\r\n        }\r\n    }\r\n\r\n    function noPicksSet() {\r\n        _activePoint = 0;\r\n    }\r\n\r\n    function allPicksSet() {\r\n        _activePoint = 3;\r\n        _measurement.indicator.changeAllEndpointsEditableStyle(true);\r\n    }\r\n\r\n    function isNoPicksSet() {\r\n        return _activePoint === 0;\r\n    }\r\n\r\n    function areAllPicksSet() {\r\n        return _activePoint === 3;   \r\n    }\r\n\r\n    this.register = function()\r\n    {\r\n        if (_hasUI && !_calibrationPanel) {\r\n            _calibrationPanel = new CalibrationPanel( this, _viewer, \"calibration-panel\", \"Calibration\", _options );\r\n            _viewer.addPanel(_calibrationPanel);\r\n        }\r\n\r\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\r\n        this.screenSizeChangedBinded = this.screenSizeChanged.bind(this);\r\n    };\r\n\r\n    this.deregister = function()\r\n    {   \r\n        this.deactivate();\r\n        \r\n        if (_calibrationPanel) {\r\n            _viewer.removePanel( _calibrationPanel );\r\n            _calibrationPanel.uninitialize();\r\n            _calibrationPanel = null;\r\n        }\r\n    };\r\n\r\n    this.isActive = function()\r\n    {\r\n        return _active;\r\n    };\r\n\r\n    this.getNames = function()\r\n    {\r\n        return _names;\r\n    };\r\n\r\n    this.getName = function()\r\n    {\r\n        return _names[0];\r\n    };\r\n\r\n    this.getPriority = function()\r\n    {\r\n        return _priority;\r\n    };\r\n\r\n    this.getCursor = function() {\r\n        return _isDragging ? null : _cursor;\r\n    };\r\n\r\n    this.activate = function()\r\n    {\r\n        _active = true;\r\n        _isDragging = false;\r\n        this.isEditingEndpoint = false;\r\n        this.editByDrag = false;\r\n        noPicksSet();\r\n\r\n        _viewer.toolController.activateTool(_snapper.getName());\r\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\r\n\r\n\r\n        if (!_measurement.indicator) {\r\n            _measurement.attachIndicator(_viewer, this, CalibrationToolIndicator);\r\n        }\r\n\r\n        _measurement.indicator.clear();\r\n\r\n        if (_calibrationTaken && _selectedP1 && _selectedP2) {\r\n            _measurement.setPick(1, _selectedP1.clone());\r\n            _measurement.setPick(2, _selectedP2.clone());\r\n\r\n            allPicksSet();\r\n\r\n            var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(_selectedSize, _selectedUnits);\r\n            _measurement.indicator.updateLabelValue(Autodesk.Viewing.Private.formatValueWithUnits(parsedRequestedSize, _selectedUnits, 3, _sharedMeasureConfig.precision));\r\n            _distance = _measurement.distanceXYZ;\r\n            _measurement.indicator.changeLabelClickableMode(false);\r\n            _waitingForInput = true;\r\n            var valid = this.render();\r\n            _measurement.indicator.changeAllEndpointsEditableStyle(true);\r\n\r\n            if (valid) {\r\n                if (_calibrationPanel) {\r\n                    _calibrationPanel.setPanelValue(_selectedSize);\r\n                }\r\n                \r\n                this.showPanel();\r\n            }\r\n        }\r\n\r\n        _viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n        _viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\r\n    };\r\n\r\n    this.deactivate = function()\r\n    {   \r\n        if (!_active)\r\n            return;\r\n\r\n        _active = false;\r\n\r\n        this.hidePanel();\r\n        this.updateViewportId(true);\r\n        _waitingForInput = false;\r\n        _measurement.clearAllPicks();\r\n\r\n        if(_snapper && _snapper.isActive()) {\r\n            _viewer.toolController.deactivateTool(_snapper.getName());\r\n        }\r\n\r\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\r\n\r\n        if (_measurement.indicator) {\r\n            _measurement.indicator.clear();\r\n            _measurement.indicator.destroy();\r\n            _measurement.indicator = null;\r\n        }\r\n\r\n        _viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\r\n        _viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\r\n    };\r\n\r\n    this.getActivePointIndex = function() {\r\n        return _activePoint;\r\n    };\r\n\r\n    this.setCalibrationFactor = function ( calibrationFactor ) {\r\n        _sharedMeasureConfig.calibrationFactor = calibrationFactor;\r\n    };\r\n\r\n    this.getCalibrationFactor = function () {\r\n        return _sharedMeasureConfig.calibrationFactor;\r\n    };\r\n\r\n    this.updateLabelValue = function (value) {\r\n        _measurement.indicator.updateLabelValue(value);\r\n    };\r\n\r\n    this.isCalibrationValid = function(requestedUnits, requestedSize) { \r\n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits); \r\n        return !isNaN(parsedRequestedSize); \r\n    };\r\n\r\n    this.calibrate = function(requestedUnits, requestedSize)\r\n    {\r\n\r\n        var calibrationFactor = null;\r\n        \r\n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits);\r\n\r\n        if (!isNaN(parsedRequestedSize)) {\r\n            var currentSize = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), requestedUnits, 1, _distance);\r\n            if (currentSize !== 0 && !isNaN(currentSize)) {\r\n                calibrationFactor = parsedRequestedSize / currentSize;\r\n                _sharedMeasureConfig.calibrationFactor = calibrationFactor;\r\n                _sharedMeasureConfig.units = requestedUnits;\r\n                var defualtPrecision = _viewer.model.is2d() ? 3 : 1;\r\n                var requestedPrecision = Autodesk.Viewing.Private.calculatePrecision(requestedSize);\r\n                _sharedMeasureConfig.precision = Math.max((_sharedMeasureConfig.precision ? _sharedMeasureConfig.precision : defualtPrecision), requestedPrecision);\r\n                _selectedSize = requestedSize;\r\n                _selectedUnits = requestedUnits;\r\n                _isCalibrated = true;\r\n                _calibrationTaken = true;\r\n                _selectedP1 = _measurement.getPick(1).clone();\r\n                _selectedP2 = _measurement.getPick(2).clone();\r\n            }\r\n        }\r\n        \r\n        if (calibrationFactor) {\r\n            _viewer.getExtension('Autodesk.Measure').enableCalibrationTool(false);\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION , units: requestedUnits , scaleFactor: calibrationFactor, size: requestedSize});\r\n        }\r\n    };\r\n\r\n    this.calibrateByScale = function(requestedUnits, requestedScale) {\r\n        _sharedMeasureConfig.calibrationFactor = requestedScale;\r\n        \r\n        if (_sharedMeasureConfig.units !== requestedUnits ) {\r\n            _sharedMeasureConfig.units = requestedUnits;\r\n            _selectedUnits = requestedUnits;\r\n        }\r\n\r\n        _isCalibrated = true;\r\n    };\r\n\r\n    this.getCurrentUnits = function () {\r\n        return _sharedMeasureConfig.units;\r\n    };\r\n\r\n    this.hidePanel = function() {\r\n        if (_calibrationPanel) {\r\n            _calibrationPanel.setVisible(false);\r\n        }\r\n        else {\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLOSE_CALIBRATION_PANEL_EVENT });\r\n        }\r\n    };\r\n\r\n    this.showPanel = function() {\r\n\r\n        var self = this;\r\n        const _window = this.getWindow();\r\n\r\n        if (_calibrationPanel) {\r\n            _window.setTimeout(function () { _calibrationPanel.requestedSizeTextbox.focus();}, 0);\r\n            _calibrationPanel.setVisible(true);\r\n            _calibrationPanel.updatePanelPosition(_measurement.indicator.labelPosition, _measurement.indicator.p1, _measurement.indicator.p2, _measurement.indicator.calibrationLabel.clientHeight);\r\n            self.addWindowEventListener(\"keyup\", function onKeyUp(e){\r\n                var key = e.key || String.fromCharCode(e.keyCode);\r\n                if (key == \"Escape\" && self.isActive()) {\r\n                    self.hidePanel();\r\n                    self.clearSize();\r\n                    self.showAddCalibrationLabel();\r\n                    \r\n                    self.removeWindowEventListener(\"keyup\", onKeyUp);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.OPEN_CALIBRATION_PANEL_EVENT, data: {size: _selectedSize, units: _selectedUnits } });\r\n        }\r\n    };\r\n\r\n    this.showAddCalibrationLabel = function() {\r\n        _measurement.indicator.showAddCalibrationLabel();\r\n    };\r\n\r\n    this.isCalibrated = function() {\r\n        return _isCalibrated;\r\n    };\r\n\r\n    this.clearSize = function () {\r\n        _measurement.indicator.updateLabelValue(null);\r\n\r\n        if (_calibrationPanel) {\r\n            _calibrationPanel.requestedSizeTextbox.value = \"\";   \r\n        }\r\n        else {\r\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLEAR_CALIBRATION_SIZE_EVENT });\r\n        }\r\n    };\r\n\r\n    this.getMaxPrecision = function() {\r\n        return _maxPrecision;\r\n    };\r\n    \r\n    this.clearMeasurement = function() {\r\n\r\n        noPicksSet();\r\n\r\n        this.clearPick(1);\r\n        this.clearPick(2);\r\n\r\n        _measurement.indicator.clear();\r\n        \r\n        this.updateViewportId(true);\r\n        this.hidePanel();\r\n\r\n        _waitingForInput = false;\r\n    };\r\n\r\n    this.clearPick = function(pickNumber) {\r\n        if (_measurement.hasPick(pickNumber)) {\r\n            _measurement.clearPick(pickNumber);\r\n            _measurement.indicator.hideClick(pickNumber);\r\n        }\r\n    };\r\n\r\n    this.repickEndpoint = function(pickNumber) {\r\n        this.clearPick(pickNumber);\r\n        this.editEndpoint(null, pickNumber);\r\n    };\r\n\r\n    this.getSnapper = function() {\r\n        return _snapper;\r\n    };\r\n\r\n    this._handleMouseEvent = function (event) {\r\n\r\n        var valid = false;\r\n\r\n        if (_snapper.isSnapped()) {\r\n\r\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\r\n            if (areAllPicksSet() || isNoPicksSet()) {\r\n                this.clearMeasurement();\r\n                _activePoint = 1;\r\n            }\r\n            \r\n            _snapper.copyResults(getActivePick());\r\n\r\n            valid = true;\r\n\r\n        } \r\n        else { \r\n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\r\n            if (event && _viewer.model.is2d()) {\r\n                var viewport = _viewer.container.getBoundingClientRect();\r\n                var x = event.canvasX || event.clientX - viewport.left;\r\n                var y = event.canvasY || event.clientY - viewport.top;\r\n\r\n                if (x && y) {\r\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\r\n                }\r\n            }\r\n\r\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\r\n            if (_consumeSingleClick && _measurement && !this.isEditingEndpoint) {\r\n                if (_activePoint === _measurement.getMaxNumberOfPicks() + 1) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            var lastPick = getActivePick();\r\n            if (lastPick) {\r\n                lastPick.clear();\r\n            }\r\n        }\r\n\r\n        this.correctPickPosition();\r\n\r\n        if (_consumeSingleClick) {\r\n            this._doConsumeSingleClick(valid);\r\n        }\r\n        \r\n        if (!isNoPicksSet()) {\r\n            var renderSucceeded = this.render();\r\n\r\n            // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\r\n            // So enter here only if it's not the first pick.\r\n            if (_measurement.hasPick(2)) {\r\n                valid &= renderSucceeded;\r\n            }\r\n        }\r\n\r\n        if (_consumeSingleClick) {\r\n            if (_measurement.isComplete() && valid) {\r\n                _distance = _measurement.distanceXYZ;\r\n                this.clearSize();\r\n                this.showPanel();\r\n                _waitingForInput = true;\r\n            }\r\n            else {\r\n                this.hidePanel();\r\n                _measurement.indicator.updateLabelValue(null);\r\n                _waitingForInput = false;\r\n            }\r\n        }\r\n\r\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\r\n        return valid;\r\n    };\r\n\r\n    this.updateViewportId = function(clear) {\r\n        if (_viewer.model && _viewer.model.is2d()) {\r\n            if (clear || isNoPicksSet()) {\r\n                viewer.impl.updateViewportId(0);\r\n                _snapper.setViewportId(null);\r\n            }\r\n            else if (!_isPressing) {\r\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\r\n                \r\n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\r\n                viewer.impl.updateViewportId(viewport);\r\n                if (_snapper)\r\n                    _snapper.setViewportId(viewport);  \r\n            \r\n            }\r\n        }\r\n    };\r\n\r\n    this._doConsumeSingleClick = function(valid) {\r\n\r\n        this.updateViewportId(_measurement.isComplete());\r\n\r\n        _measurement.indicator.clear();\r\n    };\r\n\r\n\r\n    this.handleButtonDown = function (event, button) {\r\n        if (av.isMobileDevice()) \r\n            return false;\r\n\r\n        _isDragging = true;\r\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\r\n            _consumeSingleClick = true;\r\n            _downX = event.canvasX;\r\n            _downY = event.canvasY;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    this.handleMouseMove = function (event) {\r\n        if (av.isMobileDevice())\r\n            return false;\r\n\r\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\r\n            _consumeSingleClick = false;    \r\n        }\r\n\r\n        _endpointMoved = this.isEditingEndpoint;    \r\n\r\n        if (!isNoPicksSet() && !areAllPicksSet()) {\r\n            this.clearPick(_activePoint);\r\n            this._handleMouseEvent(event);\r\n        }\r\n\r\n        _snapper.indicator.render();\r\n        \r\n        return false;\r\n    };\r\n\r\n    this.restoreMouseListeners = function () {\r\n\r\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\r\n        // So they won't be triggered as well.\r\n        // The solution is to enable them after the end of the pressing.\r\n\r\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\r\n    };\r\n\r\n    this.handlePressHold = function (event) {\r\n        _consumeSingleClick = false;\r\n\r\n        if (av.isTouchDevice()) {\r\n            switch( event.type )\r\n            {\r\n                case \"press\":\r\n                    _isPressing = true;\r\n                    if (areAllPicksSet()) {\r\n                        this.clearMeasurement();\r\n                    } else {\r\n                        this.clearPick(_activePoint);\r\n                    }\r\n                    this._handleMouseEvent(event);\r\n                    _snapper.indicator.render();\r\n\r\n                    return true;\r\n\r\n                case \"pressup\":\r\n                    _consumeSingleClick = true;\r\n                    this.restoreMouseListeners();\r\n                    _singleClickHandled = !_singleClickHandled;\r\n                    this.handleSingleClick(event);\r\n                    _isPressing = false;\r\n                    return true;\r\n            }\r\n        }\r\n        return false;\r\n\r\n    };\r\n\r\n    this.correctPickPosition = function() {\r\n        \r\n        var active = getActivePick();\r\n            \r\n        if (active && !active.getGeometry() && _cursorPosition) {\r\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\r\n            active.geomVertex = _cursorPosition;\r\n            active.intersectPoint = _cursorPosition;\r\n        }\r\n\r\n        if (hasPreviousPick()) {\r\n            var passive = getPreviousPick();\r\n            MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\r\n        }\r\n    };\r\n\r\n    this.render = function() {\r\n\r\n        var hasResult = _measurement.computeResult(_measurement.picks, _viewer, _snapper);\r\n        _measurement.indicator.render(_measurement.picks, _consumeSingleClick || _waitingForInput);\r\n\r\n        return hasResult;\r\n    };\r\n\r\n    this.editEndpoint = function(event, endpointNumber) {\r\n        if (_activePoint === endpointNumber) {\r\n            _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\r\n            this.undoEditEndpoint();\r\n            return;\r\n        }\r\n\r\n        _activePoint = endpointNumber;\r\n        this.isEditingEndpoint = true;\r\n\r\n        _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\r\n        _measurement.indicator.changeAllEndpointsEditableStyle(false);\r\n\r\n        for (var key in _measurement.picks) {\r\n            if (_measurement.picks.hasOwnProperty(key)) {\r\n                _picksBackup[key] = _measurement.getPick(key).clone();\r\n            }\r\n        }\r\n\r\n        this.updateViewportId();\r\n\r\n        this.hidePanel();\r\n        _measurement.indicator.updateLabelValue(null);\r\n        _waitingForInput = false;\r\n\r\n        if(!av.isMobileDevice()) {\r\n            this._handleMouseEvent(event);\r\n        }\r\n    };\r\n\r\n    this.undoEditEndpoint = function() {\r\n        _measurement.indicator.clear();\r\n\r\n        for (var key in _measurement.picks) {\r\n            if (_measurement.picks.hasOwnProperty(key)) {\r\n                _measurement.setPick(key, _picksBackup[key].clone());\r\n            }\r\n        }\r\n        \r\n        this.updateViewportId(true);\r\n        this.isEditingEndpoint = false;\r\n        _waitingForInput = true;\r\n\r\n        allPicksSet();\r\n        var valid = this.render();\r\n        \r\n        if (valid) {\r\n            this.showPanel();\r\n        }\r\n    };\r\n\r\n    this.handleGesture = function(event)\r\n    {   \r\n        if (av.isTouchDevice()){\r\n            \r\n            _consumeSingleClick = false;\r\n        \r\n            if (_isPressing) {\r\n                \r\n                this.clearPick(_activePoint);\r\n\r\n                switch( event.type )\r\n                {\r\n                    case \"dragstart\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        return true;\r\n\r\n                    case \"dragmove\":\r\n                        this._handleMouseEvent(event);\r\n                        _snapper.indicator.render();\r\n\r\n                        return true;\r\n\r\n                    case \"dragend\":\r\n                        _isPressing = false;\r\n                        _consumeSingleClick = true;\r\n\r\n                        if (!this.editByDrag) {\r\n                            _singleClickHandled = !_singleClickHandled;\r\n                            this.handleSingleClick(event);    \r\n                        }\r\n\r\n                        this.editByDrag = false;\r\n                        this.restoreMouseListeners();\r\n                        return true;\r\n\r\n                    case \"pinchend\":\r\n                        _consumeSingleClick = true;\r\n                        _singleClickHandled = !_singleClickHandled;\r\n                        this.handleSingleClick(event);\r\n                        this.restoreMouseListeners();\r\n                        return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleButtonUp = function (event) {\r\n        _isDragging = false;\r\n        _downX = null;\r\n        _downY = null;\r\n        \r\n        if (_endpointMoved) {\r\n            _consumeSingleClick = true;\r\n            _singleClickHandled = !_singleClickHandled;\r\n            this.handleSingleClick(event);\r\n            _endpointMoved = false;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleSingleClick = function (event) {\r\n        if (_consumeSingleClick) {\r\n            \r\n            _snapper.indicator.clearOverlays();\r\n\r\n            _measurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\r\n\r\n            if (this._handleMouseEvent(event)) {\r\n                _measurement.indicator.showEndpoints();\r\n                _measurement.indicator.updateLabelsPosition();\r\n                _activePoint++;\r\n            }\r\n            else {\r\n                if (this.isEditingEndpoint) {\r\n                    this.undoEditEndpoint();\r\n                }\r\n                else {\r\n                    this.clearMeasurement();\r\n                }\r\n            }\r\n\r\n            if (_measurement.isComplete()) {\r\n                allPicksSet();\r\n            }\r\n\r\n            _consumeSingleClick = false;\r\n            _singleClickHandled = !_singleClickHandled;\r\n            this.isEditingEndpoint = false;\r\n\r\n            _snapper.clearSnapped();\r\n        }\r\n        return true;\r\n    };\r\n\r\n    this.handleDoubleClick = function() {\r\n        return true;\r\n    };\r\n\r\n    this.handleSingleTap = function (event) {\r\n        if (!_singleClickHandled) {\r\n            _consumeSingleClick = true;\r\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\r\n            this.handleSingleClick(event);\r\n        }\r\n        _singleClickHandled = !_singleClickHandled;\r\n\r\n        return true;\r\n    };\r\n\r\n    this.handleDoubleTap = function() {\r\n        return true;\r\n    };\r\n\r\n    this.handleResize = function() {\r\n        if (_measurement.indicator) {\r\n            _measurement.indicator.handleResize();\r\n        }\r\n    };\r\n\r\n    this.onCameraChange = function() {\r\n        if (_snapper.indicator) {\r\n            _snapper.indicator.onCameraChange();\r\n        }\r\n    };\r\n\r\n    this.screenSizeChanged = function(event) {\r\n        this.onCameraChange();\r\n    };\r\n};\r\n\r\nav.GlobalManagerMixin.call(CalibrationTool.prototype);","\r\nconst av = Autodesk.Viewing;\r\n\r\nexport var MagnifyingGlass = function(viewer) {\r\n\r\n    var _viewer = viewer;\r\n    var _active = false;\r\n    var _names = [\"magnifyingGlass\"];\r\n    var _priority = 70;\r\n    var _isPressing = false;\r\n    var _radius = 60;\r\n    var _zoom = 2;\r\n    var _offset = 15;\r\n    var _magnifyingGlassCanvas = null;\r\n    var _imageData = null;\r\n    var _imageBuffer = null;\r\n    var _clientX = null;\r\n    var _clientY = null;\r\n    var _needsClear = false;\r\n    var av = Autodesk.Viewing;\r\n    \r\n    this.setGlobalManager(viewer.globalManager);\r\n\r\n    this.isActive = function() {\r\n\r\n        return _active;\r\n    };\r\n\r\n    this.activate = function() {\r\n\r\n        _active = true;\r\n        this.updateMagnifyingGlassBinded = this.updateMagnifyingGlass.bind(this);\r\n    };\r\n\r\n    this.updateMagnifyingGlass = function() {\r\n        const _window = this.getWindow();\r\n        const _document = this.getDocument();\r\n        if (_needsClear) {\r\n            _magnifyingGlassCanvas && _magnifyingGlassCanvas.classList.remove('visible');\r\n            _needsClear = false;\r\n        }\r\n        else {\r\n            var pixelRatio = _window.devicePixelRatio;\r\n            var diameter = 2 * _radius;\r\n            var normlizedDiameter = diameter * pixelRatio;\r\n            var x = pixelRatio * (_clientX - (_radius  / _zoom));\r\n            var y = pixelRatio * (_clientY - (_radius  / _zoom));\r\n            \r\n            if (!_magnifyingGlassCanvas) {\r\n                _magnifyingGlassCanvas = _document.createElement(\"canvas\");\r\n                _magnifyingGlassCanvas.className = 'magnifying-glass';\r\n                _magnifyingGlassCanvas.width = normlizedDiameter;\r\n                _magnifyingGlassCanvas.height = normlizedDiameter;\r\n                _magnifyingGlassCanvas.style.width = diameter + 'px';\r\n                _magnifyingGlassCanvas.style.height = diameter + 'px';\r\n\r\n                // Swap canvas\r\n                _magnifyingGlassCanvas.getContext(\"2d\").translate(0, normlizedDiameter);\r\n                _magnifyingGlassCanvas.getContext(\"2d\").scale(1,-1);\r\n\r\n                _viewer.container.appendChild(_magnifyingGlassCanvas);\r\n                _imageData = _magnifyingGlassCanvas.getContext(\"2d\").createImageData(Math.ceil(normlizedDiameter / _zoom), Math.ceil(normlizedDiameter / _zoom));\r\n                _imageBuffer = new Uint8Array(_imageData.data.buffer);\r\n            }\r\n\r\n            var ctx = _magnifyingGlassCanvas.getContext(\"2d\");\r\n            \r\n            // Read the pixels from the frame buffer\r\n            var gl = _viewer.canvas.getContext(\"webgl2\") || _viewer.canvas.getContext(\"webgl\") || _viewer.canvas.getContext(\"experimental-webgl\");         \r\n            gl.readPixels(x, _viewer.canvas.height - y - _imageData.height, _imageData.width, _imageData.height, gl.RGBA, gl.UNSIGNED_BYTE, _imageBuffer);\r\n            // Put the pixel into the magnifying context.\r\n            ctx.putImageData(_imageData, 0, 0);\r\n            // Scale the image\r\n            ctx.drawImage(_magnifyingGlassCanvas, 0, 0, _imageData.width, _imageData.height, 0, 0, normlizedDiameter, normlizedDiameter);\r\n            this.setGlassPosition(_magnifyingGlassCanvas, _clientX, _clientY, diameter, _offset); \r\n\r\n            _magnifyingGlassCanvas.classList.toggle('visible', true);\r\n        }\r\n    };\r\n\r\n    this.deactivate = function() {\r\n        this.clearMagnifyingGlass();\r\n        _active = false;\r\n    };\r\n\r\n    this.getNames = function() {\r\n\r\n        return _names;\r\n    };\r\n\r\n    this.getName = function() {\r\n\r\n        return _names[0];\r\n    };\r\n\r\n    this.getPriority = function() {\r\n        return _priority;\r\n    };\r\n\r\n    this.setGlassPosition = function(canvas, x, y, diameter, offset) {\r\n            \r\n        // check the left border of canvas\r\n        canvas.style.left = (x - diameter/2) + 'px';\r\n\r\n        // check the top border of canvas\r\n        if (y - diameter - offset > 0) {\r\n            canvas.style.top  = (y - diameter - offset) + 'px';    \r\n        }\r\n        else {\r\n            canvas.style.top = (y + offset) + 'px';    \r\n        }\r\n    };\r\n\r\n    this.requestUpdate = function() {\r\n        if(!_viewer.hasEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded)) {\r\n           _viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded, { once: true });\r\n        }\r\n    };\r\n\r\n    this.drawMagnifyingGlass = function(clientX, clientY) {\r\n        _clientX = clientX;\r\n        _clientY = clientY;\r\n        _viewer.impl.invalidate(false, false, true);\r\n        this.requestUpdate();\r\n    };\r\n\r\n    this.clearMagnifyingGlass = function () {\r\n        _needsClear = true;\r\n        this.requestUpdate();\r\n    };\r\n\r\n    this.handlePressHold = function (event) {\r\n\r\n        if (av.isTouchDevice()) {\r\n            switch( event.type )\r\n            {\r\n                case \"press\":\r\n                    _isPressing = true;\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"pressup\":\r\n                    this.clearMagnifyingGlass();\r\n                    _isPressing = false;\r\n                    break;\r\n            }\r\n        }\r\n        return false;\r\n\r\n    };\r\n\r\n    this.handleGesture = function(event) {\r\n\r\n        if (_isPressing && av.isTouchDevice()) {\r\n            switch( event.type )\r\n            {\r\n                case \"dragstart\":\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"dragmove\":\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"dragend\":\r\n                    this.clearMagnifyingGlass();\r\n                    _isPressing = false;\r\n                    break;\r\n\r\n                case \"pinchstart\":\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"pinchmove\":\r\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\r\n                    break;\r\n\r\n                case \"pinchend\":\r\n                    this.clearMagnifyingGlass();\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    this.handleMouseMove = function (event) {\r\n        return false;\r\n    };\r\n\r\n    this.handleWheelInput = function (delta) {\r\n        return false;\r\n    };\r\n\r\n    this.handleButtonUp = function (event, button) {\r\n        return false;\r\n    };\r\n\r\n};\r\n\r\nav.GlobalManagerMixin.call(MagnifyingGlass.prototype);\r\n","\r\n    var av = Autodesk.Viewing;\r\n    var avu = Autodesk.Viewing.UI;\r\n    var avp = Autodesk.Viewing.Private;\r\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\r\n\r\n    // /** @constructor */\r\n    export function MeasureToolbar(measureExtension)\r\n    {\r\n        this.measureExtension = measureExtension;\r\n        this.measureTool = this.measureExtension.measureTool;\r\n        this.viewer = this.measureExtension.viewer;\r\n        this.setGlobalManager(this.viewer.globalManager);\r\n        this.visible = false;\r\n        this.buttonsList = [];\r\n    }\r\n\r\n    var proto = MeasureToolbar.prototype;\r\n    av.GlobalManagerMixin.call(MeasureToolbar.prototype);\r\n\r\n    proto.init = function() {\r\n        var self = this;\r\n\r\n        const _document = this.getDocument();\r\n\r\n        // Add Measure tool toolbar to main toolbar\r\n        var toolbar = this.viewer.getToolbar();\r\n        var navigationBar = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\r\n        var toolbarOptions = {};\r\n        toolbarOptions.index = toolbar.indexOf(navigationBar) + 1;\r\n        this.measureToolbar = new avu.ControlGroup(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\r\n        this.measureToolbar.setGlobalManager(this.globalManager);\r\n        toolbar.addControl(this.measureToolbar, toolbarOptions);\r\n    \r\n\r\n        // Create a button for the measure simple distance.\r\n        this.measureSimpleDistanceBtn = new avu.Button(\"toolbar-measureTool-simple-distance\");\r\n        this.measureSimpleDistanceBtn.setGlobalManager(this.globalManager);\r\n        this.measureSimpleDistanceBtn.setToolTip(\"Distance\");\r\n        this.measureSimpleDistanceBtn.setIcon(\"adsk-icon-measure-distance-new\");\r\n        this.measureSimpleDistanceBtn.onClick = function() {\r\n            var enable = self.measureSimpleDistanceBtn.getState() !== avu.Button.State.ACTIVE;\r\n            if (enable) {\r\n                self.measureExtension.activate('distance');\r\n            } else {\r\n                self.measureTool.deselectAllMeasurements();\r\n            }\r\n        };\r\n\r\n        this.measureToolbar.addControl(this.measureSimpleDistanceBtn);\r\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE] = this.measureSimpleDistanceBtn;\r\n\r\n\r\n        // Create a button for the measure Angle.\r\n        this.measureAngleBtn = new avu.Button(\"toolbar-measureTool-angle\");\r\n        this.measureAngleBtn.setGlobalManager(this.globalManager);\r\n        this.measureAngleBtn.setToolTip(\"Angle\");\r\n        this.measureAngleBtn.setIcon(\"adsk-icon-measure-angle-new\");\r\n        this.measureAngleBtn.onClick = function () {\r\n            var enable = self.measureAngleBtn.getState() !== avu.Button.State.ACTIVE;\r\n            if (enable) {\r\n                self.measureExtension.activate('angle');\r\n            } else {\r\n                self.measureTool.deselectAllMeasurements();\r\n            }\r\n        };\r\n        this.measureToolbar.addControl(this.measureAngleBtn);\r\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE] = this.measureAngleBtn;\r\n\r\n        if (this.viewer.model && this.viewer.model.is2d()) {\r\n            // Create a button for the measure distance.\r\n            this.measureAreaBtn = new avu.Button(\"toolbar-measureTool-area\");\r\n            this.measureAreaBtn.setGlobalManager(this.globalManager);\r\n            this.measureAreaBtn.setToolTip(\"Area\");\r\n            this.measureAreaBtn.setIcon(\"adsk-icon-measure-area-new\");\r\n            this.measureAreaBtn.onClick = function() {\r\n                var enable = self.measureAreaBtn.getState() !== avu.Button.State.ACTIVE;\r\n                if (enable) {\r\n                    self.measureExtension.activate('area');\r\n                } else {\r\n                    self.measureTool.deselectAllMeasurements();\r\n                }\r\n            };\r\n\r\n            this.measureToolbar.addControl(this.measureAreaBtn);\r\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_AREA] = this.measureAreaBtn;\r\n        }\r\n\r\n        // Create a button for the Calibration tool.\r\n        this.calibrationToolBtn = new avu.Button( \"toolbar-calibrationTool\");\r\n        this.calibrationToolBtn.setGlobalManager(this.globalManager);\r\n        this.calibrationToolBtn.setToolTip(\"Calibrate\");\r\n        this.calibrationToolBtn.setIcon(\"adsk-icon-measure-calibration\");\r\n        this.calibrationToolBtn.onClick = function(e) {\r\n            var enable = self.calibrationToolBtn.getState() !== avu.Button.State.ACTIVE;\r\n            if(enable) {\r\n                self.measureExtension.activate('calibrate');\r\n            } else  {\r\n                self.measureExtension.enableCalibrationTool(false);\r\n            }\r\n        };\r\n\r\n        this.measureToolbar.addControl(this.calibrationToolBtn);\r\n        this.buttonsList[MeasureCommon.MeasurementTypes.CALIBRATION] = this.calibrationToolBtn;\r\n\r\n        var separator = _document.createElement('div');\r\n        separator.className = 'measure-toolbar-seperator';\r\n\r\n        this.measureToolbar.container.appendChild(separator);\r\n        \r\n\r\n        // Create a button for the Trash.\r\n        this.deleteBtn = new avu.Button( \"toolbar-delete\");\r\n        this.deleteBtn.setGlobalManager(this.globalManager);\r\n        this.deleteBtn.setToolTip(\"Delete measurement\");\r\n        this.deleteBtn.setIcon(\"adsk-icon-measure-trash\");\r\n        this.deleteBtn.onClick = function() {\r\n            self.measureExtension.deleteCurrentMeasurement();\r\n        };\r\n\r\n        this.measureToolbar.addControl(this.deleteBtn);\r\n\r\n        // Create a button for the Settings panel.\r\n        this.settingsBtn = new avu.Button( \"toolbar-settings\");\r\n        this.settingsBtn.setGlobalManager(this.globalManager);\r\n        this.settingsBtn.setToolTip(\"Measure settings\");\r\n        this.settingsBtn.setIcon(\"adsk-icon-measure-settings\");\r\n\r\n        this.settingsControlPanel = _document.createElement('div');\r\n        this.settingsControlPanel.classList.add('docking-panel');\r\n        this.settingsControlPanel.classList.add('docking-panel-container-solid-color-b');\r\n        this.settingsControlPanel.classList.add('measure-settings-popup');\r\n        this.settingsControlPanel.classList.add('hide');\r\n\r\n        this.settingsBtn.onClick = function (event) {\r\n            if (this.settingsControlPanel.classList.contains('hide')) {\r\n                this.settingsControlPanel.classList.remove('hide');\r\n                this.setButtonActive(this.settingsBtn);\r\n            }\r\n            else {\r\n                this.settingsControlPanel.classList.add('hide');\r\n                this.setButtonInactive(this.settingsBtn);\r\n            }\r\n        }.bind(this);\r\n\r\n        this.measureToolbar.container.appendChild(this.settingsControlPanel);\r\n        this.settingsControlPanel.root = this.settingsBtn;\r\n        this.measureToolbar.addControl(this.settingsBtn);\r\n\r\n\r\n        // Settings Panel\r\n        this.table = _document.createElement(\"table\");\r\n        this.table.classList.add(\"adsk-lmv-tftable\");\r\n        this.table.classList.add(\"calibration-table\");\r\n\r\n        this.tbody = _document.createElement(\"tbody\");\r\n        this.table.appendChild(this.tbody);\r\n        this.settingsControlPanel.appendChild(this.table);\r\n\r\n        this.units = [\r\n            { name: 'Unknown', units: '', matches: [''] },                                      // localized in OptionDropDown() call below\r\n            { name: 'Decimal feet', units: 'decimal-ft', matches: ['ft', 'decimal-ft'] },             // localized in OptionDropDown() call below\r\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'] },         // localized in OptionDropDown() call below\r\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'] }, // localized in OptionDropDown() call below\r\n            { name: 'Decimal inches', units: 'decimal-in', matches: ['in', 'decimal-in'] },           // localized in OptionDropDown() call below\r\n            { name: 'Fractional inches', units: 'fractional-in', matches: ['fractional-in'] },  // localized in OptionDropDown() call below\r\n            { name: 'Meters', units: 'm', matches: ['m'] },                                     // localized in OptionDropDown() call below\r\n            { name: 'Centimeters', units: 'cm', matches: ['cm'] },                              // localized in OptionDropDown() call below\r\n            { name: 'Millimeters', units: 'mm', matches: ['mm'] },                              // localized in OptionDropDown() call below\r\n            { name: 'Meters and centimeters', units: 'm-and-cm', matches: ['m-and-cm'] },        // localized in OptionDropDown() call below\r\n            { name: 'Points', units: 'pt', matches: ['pt'] }                                    // localized in OptionDropDown() call below\r\n        ];\r\n\r\n        var initialIndex = this.findUnits(),\r\n            unitNames = [];\r\n        \r\n        // It is not possible to hide elements in Safari.\r\n        if (av.isSafari() && this.viewer.model.getDisplayUnit()){\r\n            // We will remove the 'Unknown' unit from the units array.\r\n            this.units.shift();\r\n        }\r\n        \r\n        for (var i = 0; i < this.units.length; ++i) {\r\n            unitNames.push(this.units[i].name);\r\n        }\r\n\r\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, initialIndex, null, { paddingLeft: 0, paddingRight: 15 });\r\n        this.unitList.setGlobalManager(this.globalManager);\r\n        this.unitList.addEventListener(\"change\", function(e) {\r\n            var index = self.unitList.selectedIndex;\r\n            var toUnits = self.units[index].units;\r\n            self.measureTool.setUnits(toUnits);\r\n            self.setupPrecision();\r\n            avp.logger.track({ category: 'pref_changed', name: 'measure/units', value: toUnits });\r\n        });\r\n\r\n        this.precisionList = new avp.OptionDropDown(\"Precision\", this.tbody, [], -1, null, { paddingLeft: 0, paddingRight: 15 });\r\n        this.precisionList.setGlobalManager(this.globalManager);\r\n        this.precisionList.addEventListener(\"change\", function(e) {\r\n            var index = self.precisionList.selectedIndex;\r\n            self.measureTool.setPrecision(index);\r\n            avp.logger.track({ category: 'pref_changed', name: 'measure/precision', value: index });\r\n        });\r\n\r\n        this.isolate = new avp.OptionCheckbox(\"Isolate measurement\", this.tbody, false);\r\n        this.isolate.setGlobalManager(this.globalManager);\r\n        this.isolate.addEventListener(\"change\", function(e) {\r\n            var enable = self.isolate.checked;\r\n            self.measureTool.setIsolateMeasure(enable);\r\n            if (enable) {\r\n                self.measureTool.isolateMeasurement();\r\n            }\r\n            else {\r\n                self.measureTool.clearIsolate();\r\n            }\r\n            avp.logger.track({ category: 'pref_changed', name: 'measure/isolate', value: enable });\r\n        });\r\n\r\n        this.setupPrecision();\r\n\r\n        this.updateSettingsPanel();\r\n\r\n        if (this.viewer.model && this.viewer.model.is2d()) {\r\n            this.isolate.setVisibility(false);\r\n        }\r\n\r\n        if (!this.measureExtension.sharedMeasureConfig.units) {\r\n            this.disableUnitOption();\r\n        }\r\n        // Only disable option if the browser is not Safari\r\n        else if (!Autodesk.Viewing.isSafari()){\r\n            this.disableUnitOption(0);  // disable \"Unknown\" option when the model has units\r\n        }\r\n\r\n\r\n        // Create a button for 'Done'.\r\n        this.measureDoneBtn = new avu.Button(\"toolbar-measureTool-done\");\r\n        this.measureDoneBtn.setGlobalManager(this.globalManager);\r\n        var doneText = Autodesk.Viewing.i18n.translate('Done');\r\n        this.measureDoneBtn.setToolTip(doneText);\r\n        var cancelLabel = _document.createElement('label');\r\n        cancelLabel.textContent = doneText;\r\n        var btnContainer = this.measureDoneBtn.container;\r\n        btnContainer.appendChild(cancelLabel);\r\n        btnContainer.classList.add('adsk-label-button');\r\n        var iconEle = btnContainer.getElementsByClassName('adsk-button-icon');\r\n        iconEle && iconEle[0] && (iconEle[0].style.display = 'none');\r\n\r\n        this.measureDoneBtn.onClick = function() {\r\n            this.measureExtension.exitMeasurementMode();\r\n        }.bind(this);\r\n        this.measureToolbar.addControl(this.measureDoneBtn);\r\n\r\n        // this.settingsControlPanel.style.width = this.measureToolbar.container.getBoundingClientRect().width + 'px';\r\n        this.measureToolbar.setVisible(false);\r\n\r\n    };\r\n\r\n    proto.destroy = function() {\r\n\r\n        // If toolbar was open, close it first. Otherwise, we leave ModelTools toolbar in a broken state.\r\n        if (this.visible) {\r\n            this.closeToolbar();\r\n        }\r\n\r\n        if (this.measureToolbar) {\r\n            this.measureToolbar.removeFromParent();\r\n            this.measureToolbar = null;\r\n        }\r\n    };\r\n\r\n    proto.closeToolbar = function() {\r\n\r\n        this.measureExtension.enableMeasureTool(false);\r\n        this.measureExtension.enableCalibrationTool(false);\r\n        this.toggleVisible();\r\n\r\n        var toolbar = this.viewer.getToolbar();\r\n        var viewerToolbarContainer = toolbar.container;\r\n        var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\r\n        \r\n        for(var i = 0; i < viewerContainerChildrenCount; ++i) {\r\n            viewerToolbarContainer.children[i].style.display = \"\";\r\n        }\r\n\r\n        var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\r\n        modelTools.addControl(this.measureExtension.measurementToolbarButton, {index: this.measureExtension.measurementToolbarButton.index });\r\n    };\r\n\r\n    proto.toggleVisible = function() {\r\n        this.visible = !this.visible;\r\n        this.measureToolbar.setVisible(this.visible);\r\n        if (!this.visible) {\r\n            this.settingsControlPanel.classList.add('hide');\r\n            this.setButtonInactive(this.settingsBtn);\r\n        }\r\n    };\r\n\r\n    proto.setButtonActive = function(button) {\r\n        button.setState(avu.Button.State.ACTIVE);\r\n    };\r\n\r\n    proto.setButtonInactive = function(button) {\r\n        button.setState(avu.Button.State.INACTIVE);\r\n    };\r\n\r\n    proto.deactivateAllButtons = function() {\r\n        for (var key in this.buttonsList) {\r\n            if (this.buttonsList.hasOwnProperty(key)) {\r\n                var button = this.buttonsList[key];\r\n                this.setButtonInactive(button);   \r\n            }\r\n        }\r\n    };\r\n\r\n    proto.activateButtonByType = function(measurementType) {\r\n        this.setButtonActive(this.buttonsList[measurementType]);\r\n    };            \r\n\r\n    proto.setupPrecision = function() {\r\n        const _document = this.getDocument();\r\n        while (this.precisionList.dropdownElement.lastChild) {\r\n            this.precisionList.dropdownElement.removeChild(this.precisionList.dropdownElement.lastChild);\r\n        }\r\n\r\n        var selectedUnits = this.measureTool.getUnits(),\r\n            precisions;\r\n\r\n        if (selectedUnits === 'ft-and-fractional-in' || selectedUnits === 'fractional-in') {\r\n            precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\r\n        } else {\r\n            precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\r\n        }\r\n\r\n        for (var i = 0; i < precisions.length; ++i) {\r\n            var elem = _document.createElement('option');\r\n            elem.value = i;\r\n            elem.textContent = precisions[i];\r\n            this.precisionList.dropdownElement.appendChild(elem);\r\n        }\r\n\r\n        var selectedIndex = this.measureTool.getPrecision();\r\n        if (precisions.length <= selectedIndex) {\r\n            selectedIndex = precisions.length - 1;\r\n            this.measureTool.setPrecision(selectedIndex);\r\n        }\r\n        this.precisionList.dropdownElement.selectedIndex = selectedIndex;\r\n    };\r\n\r\n    proto.findUnits = function() {\r\n        var i,\r\n            j,\r\n            selectedUnits = this.measureTool.getUnits();\r\n        for (i = 0; i < this.units.length; ++i) {\r\n            var matches = this.units[i].matches;\r\n            if (matches) {\r\n                for (j = 0; j < matches.length; ++j) {\r\n                    if (matches[j] === selectedUnits) {\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n\r\n    proto.disableUnitOption = function( index ) {\r\n        if (index != null) {\r\n            this.unitList.dropdownElement.children[index].style.display = \"none\";\r\n            if (av.isIE11) {\r\n                // IE11 can't hide <option> elements...\r\n                this.unitList.dropdownElement.children[index].disabled = true;\r\n                this.unitList.dropdownElement.children[index].style.visibility = \"hidden\";\r\n            }\r\n        } else {  // disable all options\r\n            this.unitList.dropdownElement.disabled = true;\r\n        }\r\n    };\r\n\r\n    proto.updateSettingsPanel = function() {\r\n        this.unitList.dropdownElement.selectedIndex = this.findUnits();\r\n        this.precisionList.dropdownElement.selectedIndex = this.measureTool.getPrecision();\r\n        this.setupPrecision();\r\n    };\r\n\r\n\r\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./Measure.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./Measure.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!./Calibration.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!./Calibration.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { MeasureTool } from './MeasureTool'\r\nimport { CalibrationTool } from './CalibrationTool'\r\nimport { MagnifyingGlass } from './MagnifyingGlass'\r\nimport { CalibrationRequiredDialog } from './CalibrationPanels'\r\nimport { MeasureToolbar } from './MeasureToolbar'\r\n\r\n\r\nimport CSS_1 from './Measure.css'       // IMPORTANT!!\r\nimport CSS_2 from './Calibration.css'   // IMPORTANT!!\r\n\r\n'use strict';\r\n\r\nvar avem = AutodeskNamespace('Autodesk.Viewing.Extensions.Measure'),\r\n    av = Autodesk.Viewing,\r\n    avp = Autodesk.Viewing.Private,\r\n    avu = av.UI;\r\nvar MeasureCommon = Autodesk.Viewing.MeasureCommon; // Comes form main viewer bundle.\r\n\r\nvar NONE = 0;\r\nvar MEASURE_TOOL = 1;\r\nvar CALIBRATION_TOOL = 2;\r\n\r\nvar DEFAULT_MEASUREMENT_TYPE = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\r\n\r\n/**\r\n * Provides UI controls to perform distance and angle measurements for 2D and 3D models.\r\n * \r\n * The extension id is: `Autodesk.Measure`\r\n * \r\n * @example\r\n *   viewer.loadExtension('Autodesk.Measure')\r\n *  \r\n * @memberof Autodesk.Viewing.Extensions\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension\r\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\r\n * @constructor\r\n*/\r\nexport var MeasureExtension = function(viewer, options) {\r\n    Autodesk.Viewing.Extension.call(this, viewer, options);\r\n    this.modes = ['distance','angle','area','calibrate'];\r\n    this.name = 'measure';\r\n    this._onModelLoaded = this._onModelLoaded.bind(this);\r\n};\r\n\r\nMeasureExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\r\nMeasureExtension.prototype.constructor = MeasureExtension;\r\n\r\n\r\n/**\r\n * Load the measure extension.\r\n * @returns {boolean} True if measure extension is loaded successfully.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#load\r\n*/\r\nMeasureExtension.prototype.load = async function() {\r\n\r\n    await this.viewer.loadExtension('Autodesk.Snapping');\r\nconsole.log(\"MeasureExtension load\");\r\n    var self   = this;\r\n    var viewer = this.viewer;\r\n    this.hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\r\n\r\n    this.escapeHotkeyId = 'Autodesk.Measure.Hotkeys.Escape';\r\nconsole.log(\"MeasureExtension 001\");\r\n    // Register the Measure tool\r\n    if (!viewer.toolController){\r\n        return false;\r\n    }\r\nconsole.log(\"MeasureExtension 002\");\r\n    this.options = this.options || {};\r\n    var measureToolOptions = {};\r\n\r\n    measureToolOptions.onCloseCallback = function() {\r\n        self.enableMeasureTool(false);\r\n    };\r\n\r\n    // Shared State with measureTool & calibrationTool.\r\n    // Gets populated when a model is received.\r\n    this.sharedMeasureConfig = { \r\n        units: null,\r\n        precision: null,\r\n        calibrationFactor: null\r\n    };\r\nconsole.log(\"MeasureExtension 003\");\r\n\tmeasureToolOptions.snapperOptions = this.options.snapperOptions;\r\n\r\n    this.forceCalibrate = this.options.forceCalibrate;\r\n\r\n    this.snapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(viewer, {\r\n        renderSnappedTopology: true\r\n    });\r\n    viewer.toolController.registerTool(this.snapper);\r\nconsole.log(\"MeasureExtension 004\");\r\n    this.measureTool = new MeasureTool(viewer, measureToolOptions, this.sharedMeasureConfig, this.snapper);\r\n    viewer.toolController.registerTool(this.measureTool);\r\n\r\n    this.calibrationTool = new CalibrationTool(viewer, this.options, this.sharedMeasureConfig, this.snapper);\r\n    viewer.toolController.registerTool(this.calibrationTool);\r\n\r\n    this.magnifyingGlass = new MagnifyingGlass(viewer);\r\n    viewer.toolController.registerTool(this.magnifyingGlass);\r\nconsole.log(\"MeasureExtension 005\");\r\n    this.calibration = {};\r\n    this.onFinishedCalibration = function(event) {\r\n        if (self.measureToolbar) {\r\n            self.measureToolbar.updateSettingsPanel();\r\n        }\r\n\r\n        self.activateInitiator && self.activateInitiator();\r\n\r\n        // Set the calibration values\r\n        self.calibration.units = event.units;\r\n        self.calibration.scaleFactor = event.scaleFactor;\r\n        self.calibration.size = event.size;\r\n        self.calibration.precision = self.sharedMeasureConfig.precision;\r\n    };\r\n\r\n    viewer.addEventListener('finished-calibration', this.onFinishedCalibration);\r\nconsole.log(\"MeasureExtension 006\");\r\n    this.onMeasurementChanged = function(event) {\r\n        var type = event.data.type;\r\n        self.changeMeasurementType(type);\r\n    };\r\n\r\n    viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\r\nconsole.log(\"MeasureExtension 007\");\r\n    if (viewer.model) {\r\n        this._onModelLoaded({ model: viewer.model });\r\n    } else {\r\n        viewer.addEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded, { once: true });\r\n    }\r\nconsole.log(\"MeasureExtension 008\");\r\n    // If there is no model anymore, interrupt any ongoing interaction.\r\n    // We need at least one model to derive things like is2d() and model units.\r\n    this.onModelRemoved = function() {\r\n        // If UI was not created yet or destroyed, we don't have to disable anything\r\n        if (!self.measurementToolbarButton) {\r\n            return;\r\n        }\r\n                \r\n        if (!self.viewer.model) {\r\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED);\r\n            self.exitMeasurementMode();\r\n        }\r\n    };\r\n    this.onModelAdded = function() {\r\n\r\n        // If UI was not created yet or destroyed, the button will be enabled in next createUI() call\r\n        if (!self.measurementToolbarButton) {\r\n            return;\r\n        }\r\n\r\n        // On first model-add, re-enable measure toolbar again\r\n        var modelCount = self.viewer.getVisibleModels().length;\r\n        if (modelCount === 1 && self.measurementToolbarButton) {\r\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\r\n        }\r\n    };\r\n    viewer.addEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\r\n    viewer.addEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\r\nconsole.log(\"MeasureExtension 100\");\r\n    //Load the required dependency (and return the pending load as the load completion Promise)\r\n    return this.viewer.loadExtension('Autodesk.CompGeom');\r\n};\r\n\r\nMeasureExtension.prototype._onModelLoaded = function(event) {\r\n    var model = event.model;\r\n\r\n    const setPdfUnits = !!model.getData().isPdf && !this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\r\n    const setLeafletUnits = !!model.getData().isLeaflet && !this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\r\n\r\n    this.sharedMeasureConfig.units = this.options.calibrationUnits || model.getDisplayUnit();\r\n\r\n    // Set the units to points only for pdf and leaflet models that do not contain model units in the metadata.\r\n    if ((setPdfUnits || setLeafletUnits) && !model.getMetadata('page_dimensions', 'model_units', null)) {\r\n        this.sharedMeasureConfig.units = 'pt';\r\n    }\r\n\r\n    this.sharedMeasureConfig.precision = model.is2d() ? 3 : 1;\r\n\r\n    if (this.options.calibrationUnits && !isNaN(this.options.calibrationFactor)) {\r\n        this.calibrationTool.calibrateByScale(this.options.calibrationUnits, this.options.calibrationFactor);\r\n    }\r\n}\r\n\r\n/**\r\n * Unload the measure extension.\r\n * @returns {boolean} True if measure extension is unloaded successfully.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#unload\r\n*/\r\nMeasureExtension.prototype.unload = function () {\r\n    var viewer = this.viewer;\r\n\r\n    // Remove the ui from the viewer.\r\n    this.destroyUI();\r\n\r\n    viewer.removeEventListener('finished-calibration', this.onFinishedCalibration);\r\n    viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\r\n    viewer.removeEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\r\n    viewer.removeEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\r\n    viewer.removeEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded);\r\n\r\n    viewer.toolController.deregisterTool(this.snapper);\r\n    this.snapper = null;\r\n\r\n    viewer.toolController.deregisterTool(this.measureTool);\r\n    this.measureTool = null;\r\n\r\n    viewer.toolController.deregisterTool(this.calibrationTool);\r\n    this.calibrationTool = null;\r\n\r\n    viewer.toolController.deregisterTool(this.magnifyingGlass);\r\n    this.magnifyingGlass = null;\r\n\r\n    this.unloaded = true;\r\n    return true;\r\n};\r\n\r\n/**\r\n * Enable/disable the measure tool.\r\n * It does not update the toolbar UI.\r\n * \r\n * @param {boolean} active - True to activate, false to deactivate.\r\n * @returns {boolean} True if a change in activeness occurred.\r\n */\r\nMeasureExtension.prototype.setActive = function(active) {\r\n    return this.enableMeasureTool(active);\r\n};\r\n\r\n/**\r\n * Toggles activeness of the measure tool.\r\n * It does not update the toolbar UI.\r\n * \r\n * @return {boolean} Whether the tool is active.\r\n */\r\nMeasureExtension.prototype.toggle = function() {\r\n    if (this.isActive()) {\r\n        this.enableMeasureTool(false);\r\n    } else {\r\n        this.enableMeasureTool(true);\r\n    }\r\n    return this.isActive();\r\n};\r\n\r\n/**\r\n * Get the current measurement in the measure tool.\r\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\r\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\r\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\r\n * @returns {object|null} Object with properties of the current measurement, or null.\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement\r\n */\r\nMeasureExtension.prototype.getMeasurement = function(unitType, precision) {\r\n    var measurement = null;\r\n    if (this.measureTool.isActive()) {\r\n        measurement = this.measureTool.getMeasurement(unitType, precision);\r\n    }\r\n    return measurement;\r\n};\r\n\r\n/**\r\n * Get a list of all the measurements that are currently on the screen.\r\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\r\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\r\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\r\n * @returns {Array.<Object>} An array of measurement objects with properties of the measurement.\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList\r\n */\r\n\r\nMeasureExtension.prototype.getMeasurementList = function(unitType, precision) {\r\n  var measurementList = [];\r\n  if(this.measureTool.isActive()) {\r\n      measurementList = this.measureTool.getMeasurementList(unitType, precision);\r\n  }\r\n  return measurementList;\r\n}\r\n\r\n/**\r\n * Restores existing measurements. The `measurements` object should be generated by either the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList|getMeasurementList} or the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement|getMeasurement} methods.\r\n * @param {Object[]|Object} measurements - An array of measurement objects\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setMeasurements\r\n */\r\nMeasureExtension.prototype.setMeasurements = function(measurements) {\r\n    if (this.measureTool.isActive()) {\r\n        this.measureTool.setMeasurements(measurements);\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * Get all available units in measure tool.\r\n * @returns {object[]} Array of all available units.\r\n*/\r\nMeasureExtension.prototype.getUnitOptions = function() {\r\n    var units = [\r\n        { name: 'Unknown', type: '' },\r\n        { name: 'Decimal feet', type: 'decimal-ft' },\r\n        { name: 'Feet and fractional inches', type: 'ft' },\r\n        { name: 'Feet and decimal inches', type: 'ft-and-decimal-in' },\r\n        { name: 'Decimal inches', type: 'decimal-in' },\r\n        { name: 'Fractional inches', type: 'fractional-in' },\r\n        { name: 'Meters', type: 'm' },\r\n        { name: 'Centimeters', type: 'cm' },\r\n        { name: 'Millimeters', type: 'mm' },\r\n        { name: 'Meters and centimeters', type: 'm-and-cm' },\r\n        { name: 'Points', type: 'pt' }\r\n    ];\r\n\r\n    return units;\r\n};\r\n\r\n/**\r\n * Get all available precisions in measure tool.\r\n * @param {boolean} isFractional - Set true to get fractional precisions.\r\n * @return {string[]} List of all available precisions.\r\n*/\r\nMeasureExtension.prototype.getPrecisionOptions = function(isFractional) {\r\n\r\n    var precisions;\r\n\r\n    if (isFractional)\r\n        precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\r\n    else\r\n        precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\r\n\r\n    return precisions;\r\n};\r\n\r\n/**\r\n * Get the default measure unit in measure tool.\r\n * @returns {string} The default measure unit.\r\n*/\r\nMeasureExtension.prototype.getDefaultUnit = function() {\r\n    var unit = this.viewer.model.getDisplayUnit();\r\n\r\n    return unit;\r\n};\r\n\r\nMeasureExtension.prototype.openCalibrationRequiredDialog = function (initiator) {\r\n    if (this.hasUI) {\r\n        if (!this.CalibrationRequiredDialog) {\r\n            this.CalibrationRequiredDialog = new CalibrationRequiredDialog(this, this.viewer, \"calibration-required\", \"Calibration Required\", this.options );\r\n        }\r\n\r\n        this.CalibrationRequiredDialog.setVisible(true);\r\n    }\r\n    else {\r\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.CALIBRATION_REQUIRED_EVENT });\r\n    }\r\n\r\n    if (initiator === 'measure') {\r\n        this.activateInitiator = function() {\r\n            this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\r\n            this.activateInitiator = null;\r\n        };\r\n    } else if (initiator === 'dimension') {\r\n        this.activateInitiator = function() {\r\n            this.viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT });\r\n            this.activateInitiator = null;\r\n        };\r\n    }\r\n};\r\n\r\n/**\r\n * Get the calibration size, unit type and the calibration Factor of the model\r\n * @returns {Object}\r\n */\r\nMeasureExtension.prototype.getCalibration = function() {\r\n    return this.calibration;\r\n};\r\n\r\n\r\n/**\r\n * @param mode Measurement Mode\r\n * @returns {boolean}\r\n */\r\n\r\n /**\r\n  * Activates the tool and UI to start measuring.\r\n  * \r\n  * @param {string} [mode] - Either 'distance', 'angle', 'area' (2D only) or 'calibrate'. Default is 'distance'.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#activate\r\n  */\r\nMeasureExtension.prototype.activate = function (mode) {\r\n    if (this.activeStatus && this.mode === mode) {\r\n        return true;\r\n    }\r\n    this.enterMeasurementMode();\r\n\r\n    var success;\r\n\r\n    switch (mode) {\r\n        default:\r\n            mode = 'distance';\r\n        case 'distance':\r\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\r\n            break;\r\n        case 'angle':\r\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE);\r\n            break;\r\n        case 'area':\r\n            if(!this.viewer.model.is2d()) {\r\n                console.warn('Area mode is applicable on 2D models only');\r\n            } else {\r\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_AREA);\r\n            }\r\n            break;\r\n        case 'calibrate':\r\n            success = this.enableCalibrationTool(true);\r\n            break;\r\n    }\r\n\r\n    this.mode = success ? mode : '';\r\n    this.activeStatus = true;\r\n    return true;\r\n};\r\n\r\n/**\r\n * Deactivates measuring tool and UI.\r\n * \r\n * @returns {boolean}\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deactivate\r\n */\r\nMeasureExtension.prototype.deactivate = function () {\r\n    if(this.activeStatus) {\r\n        this.exitMeasurementMode();\r\n        this.enableMeasureTool(false);\r\n        this.activeStatus = false;\r\n    }\r\n    return true;\r\n};\r\n\r\n/**\r\n * Force the calibration panel for pdf models\r\n * @param {Boolean} enable - true to force the calibration panel\r\n */\r\nMeasureExtension.prototype.setForcePDFCalibrate = function(enable) {\r\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_PDF_CALIBRATION, enable);\r\n};\r\n\r\n/**\r\n * Force the calibration panel for leaflet models\r\n * @param {Boolean} enable - true to force the calibration panel\r\n */\r\nMeasureExtension.prototype.setForceLeafletCalibrate = function(enable) {\r\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION, enable);\r\n};\r\n\r\n/**\r\n * Restore session measurements when enabling the measure tool.\r\n * @param {Boolean} enable - true to restore session measurements. \r\n */\r\nMeasureExtension.prototype.setRestoreSessionMeasurements = function(enable) {\r\n    this.viewer.prefs.set(avp.Prefs.RESTORE_SESSION_MEASUREMENTS, enable);\r\n}\r\n\r\n/**\r\n * Enable/disable the measure tool.\r\n * @param {boolean} enable - True to enable, false to disable.\r\n * @returns {boolean} True if the tool state was changed.\r\n * @private\r\n */\r\nMeasureExtension.prototype.enableMeasureTool = function(enable, measurementType) {\r\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && this.viewer.model && !this.viewer.model.is2d()) {\r\n        return false;\r\n    }\r\n\r\n    var toolController = this.viewer.toolController,\r\n        isActive = (this.selectedTool === MEASURE_TOOL);\r\n\r\n    if (!this.viewer.model || (!enable && isActive)) {\r\n        if (this.measureTool.isActive()) {\r\n            toolController.deactivateTool(\"measure\");\r\n\r\n            if (this.measureToolbar) {\r\n                this.measureToolbar.deactivateAllButtons();\r\n            }\r\n\r\n            // No tool is active anymore. Only do this if measureTool was really the active one before.\r\n            // If not, changing selectedTool would produce an inconsistent state, e.g., CalibrationTool \r\n            // may still be active, but enableCalibrationTool(false) would not properly close it.\r\n            this.selectedTool = NONE;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    const forcePDFCalibration = this.viewer.model.getData().isPdf && this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\r\n    const forceLeafletCalibration = this.viewer.model.getData().isLeaflet && this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\r\n\r\n    this.forceCalibrate |= forceLeafletCalibration || forcePDFCalibration;\r\n\r\n    if (!measurementType) {\r\n        measurementType = DEFAULT_MEASUREMENT_TYPE;\r\n    }\r\n\r\n    if (enable && !isActive) {\r\n        // Fetch topology when opening Measure tool for the first time.\r\n        this.checkAndFetchTopology(toolController.getTool('measure'));\r\n\r\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\r\n            if (this.calibrationTool.isActive()) {\r\n                toolController.deactivateTool(\"calibration\");\r\n            }\r\n            \r\n            if (this.measureToolbar) {\r\n                this.measureToolbar.updateSettingsPanel();\r\n            }\r\n\r\n            toolController.activateTool(\"measure\");\r\n\r\n            this.selectedTool = MEASURE_TOOL;\r\n\r\n            \r\n\r\n            this.changeMeasurementType(measurementType);\r\n            return true;\r\n        }\r\n        else {\r\n            this.viewer.addEventListener(avem.OPEN_TOOL_AFTER_CALIBRAION, function(){\r\n                this.enableMeasureTool(true);                \r\n            }.bind(this), {once: true});\r\n            \r\n            this.openCalibrationRequiredDialog('measure');\r\n            return false;\r\n        }\r\n\r\n    } else if (enable && isActive) {\r\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\r\n            this.changeMeasurementType(measurementType);\r\n            return true;\r\n        }\r\n        else {\r\n            this.openCalibrationRequiredDialog('measure');\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return false;\r\n};\r\n\r\nMeasureExtension.prototype.changeMeasurementType = function(measurementType) {\r\n    this.measureTool.changeMeasurementType(measurementType);\r\n    if (this.measureToolbar) {\r\n        this.measureToolbar.deactivateAllButtons();\r\n        this.measureToolbar.activateButtonByType(measurementType);\r\n    }\r\n\r\n    switch (measurementType) {\r\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\r\n            this.mode = 'distance';\r\n            break;\r\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\r\n            this.mode = 'angle'\r\n            break;\r\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\r\n            this.mode = 'area';\r\n            break;\r\n        default:\r\n            this.mode = '';\r\n    }\r\n};\r\n\r\n/**\r\n * When enabled, the Viewer will only render model parts that are included in\r\n * measurements.\r\n *\r\n * @param {boolean} enable - true to render only nodes being measured.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setIsolateMeasure\r\n */\r\nMeasureExtension.prototype.setIsolateMeasure = function(enable) {\r\n    this.measureTool.setIsolateMeasure(enable);\r\n    if (enable) {\r\n        this.measureTool.isolateMeasurement();\r\n    } else {\r\n        this.measureTool.clearIsolate();\r\n    }\r\n}\r\n\r\n/**\r\n * Enable/disable the measure tool.\r\n * @param {boolean} enable - True to enable, false to disable.\r\n * @returns {boolean} True if the tool state was changed.\r\n * @private\r\n */\r\nMeasureExtension.prototype.enableCalibrationTool = function(enable) {\r\n    var toolController = this.viewer.toolController,\r\n        isActive = (this.selectedTool == CALIBRATION_TOOL);\r\n\r\n    if (enable && !isActive) {\r\n        if (this.measureTool.isActive()) {\r\n            toolController.deactivateTool(\"measure\");\r\n        }\r\n        \r\n        toolController.activateTool(\"calibration\");\r\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.UNITS_CALIBRATION_STARTS_EVENT });\r\n        \r\n        if (this.measureToolbar) {\r\n            this.measureToolbar.deactivateAllButtons();\r\n            this.measureToolbar.activateButtonByType(MeasureCommon.MeasurementTypes.CALIBRATION);\r\n        }\r\n\r\n        this.selectedTool = CALIBRATION_TOOL;\r\n        return true;\r\n\r\n    } else if (!enable && isActive) {\r\n        if (this.calibrationTool.isActive()) {\r\n            this.mode = '';\r\n            toolController.deactivateTool(\"calibration\");\r\n            if (this.measureToolbar) {\r\n                this.measureToolbar.deactivateAllButtons();\r\n            }\r\n        }\r\n\r\n        this.selectedTool = NONE;\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nMeasureExtension.prototype.enterMeasurementMode = function() {\r\n\r\n    if (this._measurementMode) return;\r\n    this._measurementMode = true;\r\n\r\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_ENTER});\r\n\r\n    if (!this.viewer.getToolbar) {\r\n        return; // Adds support for Viewer3D instance\r\n    }\r\n\r\n    var toolbar = this.viewer.getToolbar();    \r\n    var viewerToolbarContainer = toolbar.container;\r\n    var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\r\n    for(var i = 0; i < viewerContainerChildrenCount; ++i) {\r\n        viewerToolbarContainer.children[i].style.display = \"none\";\r\n    }\r\n\r\n    this.navigationControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\r\n    this.navigationControls.setVisible(true);\r\n    this.navigationControls.container.style.display = '';\r\n\r\n    this.measureControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\r\n    this.measureControls.setVisible(true);\r\n    this.measureControls.container.style.display = '';\r\n    \r\n    var measureButtonId = this.measurementToolbarButton.getId();\r\n    this.measurementToolbarButton.index = this.measurementToolbarButton.parent.indexOf(measureButtonId);\r\n    this.measurementToolbarButton.parent.removeControl(measureButtonId);\r\n\r\n    this.measureToolbar.toggleVisible();\r\n\r\n    if (this.viewer.centerToolBar) {\r\n        this.viewer.centerToolBar();\r\n    }\r\n\r\n    this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nMeasureExtension.prototype.exitMeasurementMode = function() {\r\n    if (!this._measurementMode) return;\r\n\r\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_LEAVE});\r\n\r\n    this.measureToolbar && this.measureToolbar.closeToolbar();\r\n    if (this.CalibrationRequiredDialog && this.CalibrationRequiredDialog.isVisible()) {\r\n        this.CalibrationRequiredDialog.setVisible(false);\r\n    }\r\n    this._measurementMode = false;\r\n};\r\n\r\n/**\r\n * Create measure button in toolbar.\r\n * @private\r\n*/\r\nMeasureExtension.prototype.onToolbarCreated = function(toolbar)\r\n{\r\n    if (this.measureToolbar) {\r\n        return;\r\n    }\r\n\r\n    var self   = this;\r\n    var viewer = this.viewer;\r\n\r\n    // Add Measure button to toolbar\r\n    var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\r\n    this.measurementToolbarButton = new avu.Button('toolbar-measurementSubmenuTool');\r\n    this.measurementToolbarButton.setToolTip('Measure');\r\n    this.measurementToolbarButton.setIcon(\"adsk-icon-measure\");\r\n    modelTools.measurementToolbarButton = this.measurementToolbarButton;\r\n    modelTools.addControl(this.measurementToolbarButton, {index:0});\r\n\r\n    // Set button enabled if and only if there is >=1 visible model. Otherwise, it will remain disabled until next model-add event.\r\n    var state = this.viewer.model ? Autodesk.Viewing.UI.Button.State.INACTIVE : Autodesk.Viewing.UI.Button.State.DISABLED;\r\n    this.measurementToolbarButton.setState(state);\r\n\r\n    this.measureToolbar = new MeasureToolbar(this);\r\n    this.measureToolbar.init();\r\n\r\n    this.measurementToolbarButton.onClick = this.activate.bind(this);\r\n\r\n    // Escape hotkey to exit tool.\r\n    //\r\n    var hotkeys = [{\r\n        keycodes: [\r\n            Autodesk.Viewing.KeyCode.ESCAPE\r\n        ],\r\n        onRelease: function () {\r\n            if (self._measurementMode) {\r\n                self.exitMeasurementMode();\r\n                return true;\r\n            }\r\n        }\r\n    }];\r\n    viewer.getHotkeyManager().pushHotkeys(this.escapeHotkeyId, hotkeys);\r\n};\r\n\r\n\r\n/**\r\n * @private\r\n */\r\nMeasureExtension.prototype.checkAndFetchTopology = function(tool) {\r\n\r\n    if (this._checkedTopology) {\r\n        return;\r\n    }\r\n\r\n    this._checkedTopology = true;\r\n    if (!this.viewer.model.is3d()) {\r\n        tool && tool.setNoTopology();\r\n        return;\r\n    }\r\n\r\n    if (this.viewer.modelHasTopology()){\r\n        tool && tool.setTopologyAvailable();\r\n        return;\r\n    }\r\n\r\n    // Fetch topology from backend.\r\n    tool && tool.setFetchingTopology();\r\n    this.viewer.model.fetchTopology()\r\n    .then(function(topoData){\r\n        tool && tool.setTopologyAvailable();\r\n    })\r\n    .catch(function(err){\r\n        avp.logger.log(err); // No topology\r\n        tool && tool.setNoTopology();\r\n    });\r\n};\r\n\r\n/**\r\n * Destroy measure button in toolbar.\r\n * @private\r\n*/\r\nMeasureExtension.prototype.destroyUI = function()\r\n{\r\n    var viewer = this.viewer;\r\n\r\n    if (this.measureToolbar) {\r\n         this.measureToolbar.destroy();\r\n         this.measureToolbar = null;\r\n    }\r\n\r\n    if (this.measurementToolbarButton) {\r\n        this.measurementToolbarButton.removeFromParent();\r\n        this.measurementToolbarButton = null;\r\n    }\r\n\r\n    viewer.getHotkeyManager().popHotkeys(this.escapeHotkeyId);\r\n};\r\n\r\nMeasureExtension.prototype.setUnits = function(units) {\r\n    this.measureTool.setUnits(units);\r\n};\r\n\r\nMeasureExtension.prototype.getUnits = function() {\r\n    return this.measureTool.getUnits();\r\n};\r\n\r\nMeasureExtension.prototype.setPrecision = function(precision) {\r\n    this.measureTool.setPrecision(precision);\r\n};\r\n\r\nMeasureExtension.prototype.getPrecision = function() {\r\n    return this.measureTool.getPrecision();\r\n};\r\n\r\nMeasureExtension.prototype.calibrate = function(requestedUnits, requestedSize) {\r\n    this.calibrationTool.calibrate(requestedUnits, requestedSize);\r\n};\r\n\r\nMeasureExtension.prototype.calibrateByScale = function(requestedUnits, requestedScale) {\r\n    this.calibrationTool.calibrateByScale(requestedUnits, requestedScale);\r\n};\r\n\r\nMeasureExtension.prototype.isCalibrationValid = function(requestedUnits, requestedSize) { \r\n    return this.calibrationTool.isCalibrationValid(requestedUnits, requestedSize); \r\n};\r\n\r\nMeasureExtension.prototype.getCalibrationFactor = function() {\r\n    return this.calibrationTool.getCalibrationFactor();\r\n};\r\n\r\nMeasureExtension.prototype.showAddCalibrationLabel = function() {\r\n    this.calibrationTool.showAddCalibrationLabel();\r\n};\r\n\r\n/**\r\n * Delete all measurements.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteAllMeasurements\r\n */\r\nMeasureExtension.prototype.deleteMeasurements = function() {\r\n    this.measureTool.deleteMeasurements();\r\n};\r\n\r\n/**\r\n * Deletes the selected measurement.\r\n * \r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteCurrentMeasurement\r\n */\r\nMeasureExtension.prototype.deleteCurrentMeasurement = function() {\r\n    this.measureTool.deleteCurrentMeasurement();\r\n};\r\n\r\nMeasureExtension.prototype.selectMeasurementById = function(id) {\r\n    this.measureTool.selectMeasurementById(id);\r\n};\r\n\r\n/**\r\n * Enable measuring on non snapped locations.\r\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setFreeMeasureMode\r\n * @param {Boolean} allow - true to allow measuring on non snapped locations, otherwise false;\r\n */\r\nMeasureExtension.prototype.setFreeMeasureMode = function(allow) {\r\n    this.snapper.setSnapToPixel(allow);\r\n};\r\n\r\nav.theExtensionManager.registerExtension('Autodesk.Measure', MeasureExtension);\r\n\r\n\r\n"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","push","module","id","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","url","options","String","__esModule","default","test","slice","hash","needQuotes","replace","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","Function","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","scriptUrl","importScripts","location","currentScript","src","scripts","getElementsByTagName","p","b","baseURI","self","href","nc","MeasureCommon","Autodesk","Viewing","MeasurementsManager","viewer","init","restoredMeasurementData","proto","getCurrentMeasurement","currentMeasurement","getRestoredMeasurementData","selectMeasurementById","measurement","measurementsList","changeCurrentMeasurement","createMeasurement","measurementType","measurementsCounter","Measurement","createMeasurementFromData","measurementData","createIndicatorCb","preparePicksCb","initPicks","picks","MeasurementTypes","MEASUREMENT_AREA","closedArea","isRestored","convertUnits","square","Private","sharedUnits","model","getUnitString","sharedCalibrationFactor","parseFloat","distanceXYZ","distance","distanceX","deltaX","distanceY","deltaY","distanceZ","deltaZ","area","angle","indicator","renderFromPoints","points","keys","intersectPoints","pointData","intersection","getIntersectPoints","changeAllEndpointsEditableStyle","enableSelectionAreas","enableLabelsTouchEvents","activatePicks","pickData","pick","pickPoint","THREE","Vector3","x","y","z","modelId","impl","findModel","modelData","getData","add","globalOffset","clone","viewportId","viewportIndex2d","hasTopology","getPick","pointInfo","getGeometry","geomType","SnapType","SNAP_VERTEX","geomVertex","intersectPoint","dispatchEvent","type","Events","MEASUREMENT_CHANGED_EVENT","removeCurrentMeasurement","reset","destroy","av","Indicator","tool","setGlobalManager","globalManager","snapper","getSnapper","materialExtensionLine","materialExtensionFace","extensionLines","extensionFaces","grayOutPlane","materialPoint","materialLine","materialAngle","materialAngleOutline","materialGreyOutPlane","materialFace","angleArc","angleOutline","showMeasureResult","visibleLabels","overlayName","xAxis","autocam","getWorldRightVector","yAxis","getWorldUpVector","zAxis","getWorldFrontVector","getPolygonVisualCenter","polygon","Cell","h","inside","minDistSq","Infinity","ring","len","j","Math","min","getSegDistSq","sqrt","pointToPolygonDist","max","SQRT2","px","py","dx","dy","t","TinyQueue","compare","_down","_up","pop","top","peek","pos","parent","current","halfLength","left","right","best","centroid","multiplyScalar","getCentroidOfPolygon","minX","minY","maxX","maxY","width","height","cellSize","cellQueue","bestCell","f","getCentroidCell","bboxCell","cell","GlobalManagerMixin","updateDistance","updateAngle","clear","updateLabelsPosition","endpoints","createEndpoint","position","showClick","renderRubberbandFromPoints","render","hasPick","renderPick","renderRubberband","changeEndpointOnEditStyle","endpointNumber","isEditing","handleResize","setNoTopology","setFetchingTopology","setTopologyAvailable","clientToCanvasCoords","event","rect","getCanvasBoundingClientRect","res","canvasX","center","canvasY","pointers","clientX","clientY","initLabelMobileGestures","label","pointNumber","magnifyingGlass","toolController","getTool","hammer","Hammer","Manager","recognizers","GestureRecognizers","drag","singletap","handlePointerEventMouse","inputClass","isIE11","PointerEventInput","TouchInput","onSingleTapBinded","onMouseDown","editEndpoint","bind","onDragStartBinded","editByDrag","handlePressHold","handleGesture","onDragMoveBinded","onDragEndBinded","handleButtonUp","on","clearLabelMobileGestures","off","updateVisibleLabelsArray","isVisible","indexOf","hideEndpoints","name","endpoint","hideLabel","showEndpoints","showLabel","safeToggle","changeEndpointEditableStyle","isEditable","changeAllEndpointsOnEditStyle","hideLabelsOutsideOfView","is2d","forEach","point","show","navigation","isPointVisible","classList","contains","toggle","pickNumber","getActivePointIndex","hideClick","renderEndpointGeometry","geometry","getSnapResultPosition","drawEdgeAsCylinder","geom","material","linewidth","cylinderGeometry","cylinder","edge","vertices","cylinderMesh","setCylinderScale","drawDashedLine","p1","p2","dashSize","gapSize","Geometry","line","subVectors","lineLength","lineDirection","normalize","currLength","addVectors","getNewCylinderGeometry","addMultipleOverlays","drawLineAsCylinder","addOverlay","CylinderGeometry","pointX","pointY","direction","orientation","Matrix4","lookAt","Object3D","up","multiply","set","Mesh","applyMatrix","lmv_line_width","scale","nearestPointInPointToSegment","getPosition","setScale","navapi","camera","getCamera","isPerspective","sub","getEyeVector","fov","getVerticalFov","tan","degToRad","getScreenViewport","alignLabelWithLine","offset","camUpVector","getCameraUpVector","cameraAngle","angleTo","PI","atan2","abs","transform","isTouchDevice","endPoint","removeEventListener","isSafari","onMouseClickBinded","mousewheel","MEASUREMENT_DISTANCE","start","end","renderDistanceMeasurementFromPoints","MEASUREMENT_ANGLE","renderAngleMeasurementFromPoints","renderAreaMeasurementFromPoints","previewsPick","activePick","renderDistanceMeasurement","renderAngleMeasurement","renderAreaMeasurement","initMouseEvent","pointerType","addEventListener","MeasureToolIndicator","measureTool","lines","xyz","axis","createLineMaterial","className","iconText","segments","dashedLine","simple","angleLabel","areaLabel","labels","isLeaflet","topologyStatus","TOPOLOGY_NOT_AVAILABLE","tmpVector","surfaceColor","MeshBasicMaterial","color","parseInt","opacity","transparent","depthTest","depthWrite","side","DoubleSide","create","constructor","isLeftIntersect","other","isRightIntersect","isMiddleIntersect","moveRight","currentLabel","currentRect","otherRect","moveDown","bottom","setValueMeasurementLabelText","strValue","div","textContent","setDeltaMeasurementLabelText","setVisibilityMeasurementLabelSpinner","display","MeasureTool","sharedMeasureConfig","_viewer","_names","_sharedMeasureConfig","Extensions","Measure","_active","_isDragging","_endpointMoved","_activePoint","_consumeSingleClick","_singleClickHandled","_downX","_downY","_isolateMeasure","_measurementsManager","_currentMeasurement","_onIndicatorCreatedCB","_snapper","_isPressing","_picksBackup","_cursorPosition","_preMeasureState","_measurementType","_sessionMeasurements","getActivePick","getMaxNumberOfPicks","countPicks","getPreviousPick","noPicksSet","allPicksSet","enableMeasurementsTouchEvents","isNoPicksSet","getPickData","clonePicks","picksData","parse","snapToFirstPick","currentPick","forceSnap","firstPick","firstPickPoint","firstPickPosition","project","currentPickPoint","currentPickPosition","distanceTo","onMouseMove","copyTo","showResult","hasResult","computeResult","getMeasurementType","types","CALIBRATION","enable","areAllPicksSet","setSessionMeasurements","measurementList","getSessionMeasurements","register","deregister","deactivate","isActive","getNames","getName","getPriority","getCursor","getCurrentMeasurementRaw","getMeasurementsManager","startNewMeasurement","attachIndicator","changeMeasurementType","activate","isEditingEndpoint","pauseHighlight","clearSelection","getState","objectSet","activateTool","onMeasurementChangedBinded","onMeasurementChanged","CAMERA_CHANGE_EVENT","onCameraChange","SHOW_ALL_EVENT","onShowAllEvent","prefs","Prefs","RESTORE_SESSION_MEASUREMENTS","sessionMeasurements","setMeasurements","getMeasurementList","clearIsolate","clearCurrentMeasurement","deactivateTool","getUnits","units","setUnits","DISPLAY_UNITS_CHANGED","updateResults","getPrecision","precision","setPrecision","getDistanceXYZ","getDistanceAux","getDistanceX","getDistanceY","getDistanceZ","measurementDistance","calibrationFactor","formatValueWithUnits","getAngle","fromCharCode","getArea","Array","isArray","measureData","unitType","getMeasureType","attachIndicatorCb","initPicksCb","deselectAllMeasurements","getMeasurement","geomTypes","from","to","getMeasurementPoints","clearPick","updateViewportId","setIsolateMeasure","isolateMeasurement","defaultModelId","isolationGroups","snapNode","isolationSet","modelInstance","ids","visibilityManager","aggregateIsolate","restoreState","undoEditEndpoint","setSimple","unfocusLabels","isComplete","measurementId","snapResult","getSnapResult","isValid","isMobileDevice","_handleMouseEvent","setPick","focusLabels","deleteMeasurements","measurements","deleteCurrentMeasurement","deleteCurrentPick","setViewportId","viewport","correctPickPosition","active","passive","correctPerpendicularPicks","nextPick","valid","isSnapped","copyResults","container","getBoundingClientRect","inverseProject","lastPick","_doConsumeSingleClick","renderSucceeded","hasEqualPicks","measurementComplete","handleButtonDown","button","ctrlKey","metaKey","shiftKey","altKey","handleMouseMove","restoreMouseListeners","controller","enableMouseButtons","handleSingleClick","updateScale","clearOverlays","clearSnapped","handleDoubleClick","handleSingleTap","handleDoubleTap","handleKeyDown","keyCode","KeyCode","BACKSPACE","DELETE","currLabel","onSelectionAreaClickedBinded","onSelectionAreaClicked","createMeasurementLabel","onCameraChangeBinded","handleButtonUpBinded","addWindowEventListener","createSnapResultLabel","xy","visible","floor","clientHeight","clientWidth","p1Projected","p2Projected","invalidate","xyzDirection","itemDirection","cross","dot","needToStackLabels","labelsStacked","backupPositions","labelsOverlapDetection","stackLabels","staticLabel","labelsList","dynamicLabel","moved","staticRect","dynamicRect","causeStacking","topLabel","space","drawXYZLine","tmpVec","normal","drawLineSegment","tips","drawTip","redrawDashedLine","removeMultipleOverlays","p1Scale","isDashedLine","drawSurface","cset","CompGeom","ContourSet","addContour","triangulate","triangulationFailed","bufferGeometry","toPolygonMesh","face","drawSegmentAndPush","pickPositions","firstPoint","position1","position2","isEqualVectors","EPSILON","showAreaLabel","updateArea","clearAngleMeshes","removeOverlay","drawAngle","ep1","ep2","midPoint","smallNum","MeshPhongMaterial","ambient","createCommonOverlay","radius","circleGeometry","CircleGeometry","arc","V","updateMatrixWorld","vA","vB","applyMatrix4","matrixWorld","v1","v2","v3","v4","ra","a13","a14","a23","a24","rotWorldMatrix","makeRotationAxis","matrix","rotation","setFromRotationMatrix","outlineGeometry","copy","round","dir","crossVectors","showAngleLabel","createDistanceLabel","setVisibilityMeasurementLabelText","_document","getDocument","axisIcon","innerText","insertBefore","updateLine","x1","y1","z1","x2","y2","z2","showAxis","getAlignedUpVector","isParallel","displayAxis","setTimeout","setWidth","getWidth","is3d","maxWidth","setLineVisible","pointerEvents","setLabelsZIndex","zIndex","tip","clearSelectionAreas","clearOverlay","selectionArea","overlayScenes","removeOverlayScene","removeWindowEventListener","clearXYZLine","segment","spinner","text","delta","label_icon","hitArea","createSelectionArea","updateSelectionArea","v","Vector2","_selectorAreaSize","transformOrigin","getElementById","CalibrationToolIndicator","calibrationTool","calibrationLabel","rubberbandDefaultMaterial","rubberbandSnappedMaterial","rubberbandTipMaterial","clearRubberband","updateLabelValue","childNodes","i18n","translate","changeLabelClickableMode","clickable","showAddCalibrationLabel","onClick","showPanel","renderCalibrationLabel","mid","labelPosition","drawMeasurementLineTip","flip","tipMaterial","lineNormal","lineMaterial","isPerpendicular","ave","avp","avu","UI","DockingPanel","ViewerPanelMixin","_gDocument","getGlobal","CalibrationPanel","title","addFooter","parentContainer","resize","closer","setVisible","clearSize","heightAdjustment","marginTop","createScrollContainer","calibrationMenu","scrollContainer","table","tbody","row","insertRow","requestedSizeTextbox","autofocus","split","updateLabel","ESCAPE","requestedSize","cursorIndex","selectionStart","isSimple","unitList","selectedIndex","simpleInput","isPositiveNumber","isSimpleDecimal","calculatePrecision","getMaxPrecision","preventDefault","caption","insertCell","matches","unitNames","OptionDropDown","paddingLeft","paddingRight","setCalibration","requestedUnits","calibrate","match","isNaN","uninitialize","findUnits","selectedUnits","getCurrentUnits","setPanelValue","size","setSelectedIndex","parsedNumber","UnitParser","parsePositiveNumber","updatePanelPosition","labelOffset","cornerX","cornerY","rubberbandDirection","pow","canvas","CalibrationRequiredDialog","measureExt","dialogBox","calibrateNow","buttonsWrapper","cancel","calibrateNowButton","enableCalibrationTool","CalibrationTool","_measurement","_options","_maxPrecision","maxPrecision","_isCalibrated","_distance","_calibrationTaken","_selectedSize","_selectedUnits","_selectedP1","_selectedP2","_waitingForInput","_calibrationPanel","_hasUI","GuiViewer3D","addPanel","screenSizeChangedBinded","screenSizeChanged","removePanel","parsedRequestedSize","VIEWER_RESIZE_EVENT","hidePanel","clearAllPicks","setCalibrationFactor","getCalibrationFactor","isCalibrationValid","currentSize","defualtPrecision","requestedPrecision","getExtension","FINISHED_CALIBRATION","scaleFactor","calibrateByScale","requestedScale","CLOSE_CALIBRATION_PANEL_EVENT","_window","getWindow","focus","onKeyUp","OPEN_CALIBRATION_PANEL_EVENT","isCalibrated","CLEAR_CALIBRATION_SIZE_EVENT","clearMeasurement","repickEndpoint","hasPreviousPick","MagnifyingGlass","_magnifyingGlassCanvas","_imageData","_imageBuffer","_clientX","_clientY","_needsClear","updateMagnifyingGlassBinded","updateMagnifyingGlass","pixelRatio","devicePixelRatio","normlizedDiameter","diameter","getContext","createImageData","ceil","Uint8Array","buffer","ctx","gl","readPixels","RGBA","UNSIGNED_BYTE","putImageData","drawImage","setGlassPosition","clearMagnifyingGlass","requestUpdate","hasEventListener","RENDER_PRESENTED_EVENT","once","drawMagnifyingGlass","handleWheelInput","MeasureToolbar","measureExtension","buttonsList","toolbar","getToolbar","navigationBar","getControl","TOOLBAR","NAVTOOLSID","toolbarOptions","measureToolbar","ControlGroup","MEASURETOOLSID","addControl","measureSimpleDistanceBtn","Button","setToolTip","setIcon","State","ACTIVE","measureAngleBtn","measureAreaBtn","calibrationToolBtn","separator","deleteBtn","settingsBtn","settingsControlPanel","setButtonActive","setButtonInactive","root","initialIndex","getDisplayUnit","shift","toUnits","setupPrecision","logger","track","category","precisionList","isolate","OptionCheckbox","checked","updateSettingsPanel","setVisibility","disableUnitOption","measureDoneBtn","doneText","cancelLabel","btnContainer","iconEle","getElementsByClassName","exitMeasurementMode","closeToolbar","removeFromParent","enableMeasureTool","toggleVisible","viewerToolbarContainer","viewerContainerChildrenCount","children","MODELTOOLSID","measurementToolbarButton","setState","INACTIVE","deactivateAllButtons","activateButtonByType","dropdownElement","lastChild","precisions","elem","disabled","visibility","avem","AutodeskNamespace","DEFAULT_MEASUREMENT_TYPE","MeasureExtension","Extension","modes","_onModelLoaded","load","async","loadExtension","console","log","hasUI","escapeHotkeyId","measureToolOptions","snapperOptions","forceCalibrate","Snapping","Snapper","renderSnappedTopology","registerTool","calibration","onFinishedCalibration","activateInitiator","MODEL_ROOT_LOADED_EVENT","onModelRemoved","DISABLED","onModelAdded","getVisibleModels","MODEL_ADDED_EVENT","MODEL_REMOVED_EVENT","setPdfUnits","isPdf","Prefs2D","FORCE_PDF_CALIBRATION","setLeafletUnits","FORCE_LEAFLET_CALIBRATION","calibrationUnits","getMetadata","unload","destroyUI","deregisterTool","unloaded","setActive","getUnitOptions","getPrecisionOptions","isFractional","getDefaultUnit","openCalibrationRequiredDialog","initiator","CALIBRATION_REQUIRED_EVENT","FINISHED_CALIBRATION_FOR_DIMENSION_EVENT","getCalibration","mode","activeStatus","success","enterMeasurementMode","warn","setForcePDFCalibrate","setForceLeafletCalibrate","setRestoreSessionMeasurements","selectedTool","forcePDFCalibration","forceLeafletCalibration","checkAndFetchTopology","OPEN_TOOL_AFTER_CALIBRAION","UNITS_CALIBRATION_STARTS_EVENT","_measurementMode","MEASUREMENT_MODE_ENTER","navigationControls","measureControls","measureButtonId","getId","removeControl","centerToolBar","MEASUREMENT_MODE_LEAVE","onToolbarCreated","modelTools","state","hotkeys","keycodes","onRelease","getHotkeyManager","pushHotkeys","_checkedTopology","modelHasTopology","fetchTopology","then","topoData","catch","err","popHotkeys","setFreeMeasureMode","allow","setSnapToPixel","theExtensionManager","registerExtension"],"sourceRoot":""}